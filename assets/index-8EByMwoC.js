var ax=Object.defineProperty;var nw=n=>{throw TypeError(n)};var lx=(n,e,t)=>e in n?ax(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var le=(n,e,t)=>lx(n,typeof e!="symbol"?e+"":e,t),Fg=(n,e,t)=>e.has(n)||nw("Cannot "+t);var c=(n,e,t)=>(Fg(n,e,"read from private field"),t?t.call(n):e.get(n)),E=(n,e,t)=>e.has(n)?nw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),w=(n,e,t,i)=>(Fg(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),_=(n,e,t)=>(Fg(n,e,"access private method"),t);var xn=(n,e,t,i)=>({set _(r){w(n,e,r,t)},get _(){return c(n,e,i)}});function hE(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Py(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dE={exports:{}},Gp={},fE={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=Symbol.for("react.element"),cx=Symbol.for("react.portal"),ux=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),dx=Symbol.for("react.profiler"),fx=Symbol.for("react.provider"),px=Symbol.for("react.context"),gx=Symbol.for("react.forward_ref"),mx=Symbol.for("react.suspense"),vx=Symbol.for("react.memo"),yx=Symbol.for("react.lazy"),iw=Symbol.iterator;function wx(n){return n===null||typeof n!="object"?null:(n=iw&&n[iw]||n["@@iterator"],typeof n=="function"?n:null)}var pE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,mE={};function Ec(n,e,t){this.props=n,this.context=e,this.refs=mE,this.updater=t||pE}Ec.prototype.isReactComponent={};Ec.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ec.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function vE(){}vE.prototype=Ec.prototype;function Ly(n,e,t){this.props=n,this.context=e,this.refs=mE,this.updater=t||pE}var My=Ly.prototype=new vE;My.constructor=Ly;gE(My,Ec.prototype);My.isPureReactComponent=!0;var rw=Array.isArray,yE=Object.prototype.hasOwnProperty,Dy={current:null},wE={key:!0,ref:!0,__self:!0,__source:!0};function _E(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yE.call(e,i)&&!wE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:vd,type:n,key:s,ref:o,props:r,_owner:Dy.current}}function _x(n,e){return{$$typeof:vd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Iy(n){return typeof n=="object"&&n!==null&&n.$$typeof===vd}function Ex(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var sw=/\/+/g;function Ng(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Ex(""+n.key):e.toString(36)}function af(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case vd:case cx:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Ng(o,0):i,rw(r)?(t="",n!=null&&(t=n.replace(sw,"$&/")+"/"),af(r,e,t,"",function(u){return u})):r!=null&&(Iy(r)&&(r=_x(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(sw,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",rw(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Ng(s,a);o+=af(s,e,t,l,r)}else if(l=wx(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Ng(s,a++),o+=af(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nd(n,e,t){if(n==null)return n;var i=[],r=0;return af(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Ax(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var un={current:null},lf={transition:null},Sx={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:lf,ReactCurrentOwner:Dy};function EE(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Nd,forEach:function(n,e,t){Nd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Nd(n,function(){e++}),e},toArray:function(n){return Nd(n,function(e){return e})||[]},only:function(n){if(!Iy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ye.Component=Ec;ye.Fragment=ux;ye.Profiler=dx;ye.PureComponent=Ly;ye.StrictMode=hx;ye.Suspense=mx;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx;ye.act=EE;ye.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=gE({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Dy.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)yE.call(e,l)&&!wE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:vd,type:n.type,key:r,ref:s,props:i,_owner:o}};ye.createContext=function(n){return n={$$typeof:px,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:fx,_context:n},n.Consumer=n};ye.createElement=_E;ye.createFactory=function(n){var e=_E.bind(null,n);return e.type=n,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(n){return{$$typeof:gx,render:n}};ye.isValidElement=Iy;ye.lazy=function(n){return{$$typeof:yx,_payload:{_status:-1,_result:n},_init:Ax}};ye.memo=function(n,e){return{$$typeof:vx,type:n,compare:e===void 0?null:e}};ye.startTransition=function(n){var e=lf.transition;lf.transition={};try{n()}finally{lf.transition=e}};ye.unstable_act=EE;ye.useCallback=function(n,e){return un.current.useCallback(n,e)};ye.useContext=function(n){return un.current.useContext(n)};ye.useDebugValue=function(){};ye.useDeferredValue=function(n){return un.current.useDeferredValue(n)};ye.useEffect=function(n,e){return un.current.useEffect(n,e)};ye.useId=function(){return un.current.useId()};ye.useImperativeHandle=function(n,e,t){return un.current.useImperativeHandle(n,e,t)};ye.useInsertionEffect=function(n,e){return un.current.useInsertionEffect(n,e)};ye.useLayoutEffect=function(n,e){return un.current.useLayoutEffect(n,e)};ye.useMemo=function(n,e){return un.current.useMemo(n,e)};ye.useReducer=function(n,e,t){return un.current.useReducer(n,e,t)};ye.useRef=function(n){return un.current.useRef(n)};ye.useState=function(n){return un.current.useState(n)};ye.useSyncExternalStore=function(n,e,t){return un.current.useSyncExternalStore(n,e,t)};ye.useTransition=function(){return un.current.useTransition()};ye.version="18.3.1";fE.exports=ye;var D=fE.exports;const AE=Py(D),bx=hE({__proto__:null,default:AE},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx=D,Cx=Symbol.for("react.element"),kx=Symbol.for("react.fragment"),Tx=Object.prototype.hasOwnProperty,Rx=xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Px={key:!0,ref:!0,__self:!0,__source:!0};function SE(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Tx.call(e,i)&&!Px.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Cx,type:n,key:s,ref:o,props:r,_owner:Rx.current}}Gp.Fragment=kx;Gp.jsx=SE;Gp.jsxs=SE;dE.exports=Gp;var P=dE.exports,vm={},bE={exports:{}},Un={},xE={exports:{}},CE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,B){var Z=N.length;N.push(B);e:for(;0<Z;){var we=Z-1>>>1,ne=N[we];if(0<r(ne,B))N[we]=B,N[Z]=ne,Z=we;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],Z=N.pop();if(Z!==B){N[0]=Z;e:for(var we=0,ne=N.length,de=ne>>>1;we<de;){var ze=2*(we+1)-1,Qe=N[ze],Se=ze+1,fe=N[Se];if(0>r(Qe,Z))Se<ne&&0>r(fe,Qe)?(N[we]=fe,N[Se]=Z,we=Se):(N[we]=Qe,N[ze]=Z,we=ze);else if(Se<ne&&0>r(fe,Z))N[we]=fe,N[Se]=Z,we=Se;else break e}}return B}function r(N,B){var Z=N.sortIndex-B.sortIndex;return Z!==0?Z:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,p=!1,g=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(N){for(var B=t(u);B!==null;){if(B.callback===null)i(u);else if(B.startTime<=N)i(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(u)}}function x(N){if(y=!1,A(N),!g)if(t(l)!==null)g=!0,ae(k);else{var B=t(u);B!==null&&U(x,B.startTime-N)}}function k(N,B){g=!1,y&&(y=!1,m(b),b=-1),p=!0;var Z=f;try{for(A(B),d=t(l);d!==null&&(!(d.expirationTime>B)||N&&!O());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var ne=we(d.expirationTime<=B);B=n.unstable_now(),typeof ne=="function"?d.callback=ne:d===t(l)&&i(l),A(B)}else i(l);d=t(l)}if(d!==null)var de=!0;else{var ze=t(u);ze!==null&&U(x,ze.startTime-B),de=!1}return de}finally{d=null,f=Z,p=!1}}var R=!1,L=null,b=-1,I=5,F=-1;function O(){return!(n.unstable_now()-F<I)}function J(){if(L!==null){var N=n.unstable_now();F=N;var B=!0;try{B=L(!0,N)}finally{B?Y():(R=!1,L=null)}}else R=!1}var Y;if(typeof v=="function")Y=function(){v(J)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,se=W.port2;W.port1.onmessage=J,Y=function(){se.postMessage(null)}}else Y=function(){S(J,0)};function ae(N){L=N,R||(R=!0,Y())}function U(N,B){b=S(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,ae(k))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var Z=f;f=B;try{return N()}finally{f=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Z=f;f=N;try{return B()}finally{f=Z}},n.unstable_scheduleCallback=function(N,B,Z){var we=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,N){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Z+ne,N={id:h++,callback:B,priorityLevel:N,startTime:Z,expirationTime:ne,sortIndex:-1},Z>we?(N.sortIndex=Z,e(u,N),t(l)===null&&N===t(u)&&(y?(m(b),b=-1):y=!0,U(x,Z-we))):(N.sortIndex=ne,e(l,N),g||p||(g=!0,ae(k))),N},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(N){var B=f;return function(){var Z=f;f=B;try{return N.apply(this,arguments)}finally{f=Z}}}})(CE);xE.exports=CE;var Lx=xE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=D,Bn=Lx;function z(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kE=new Set,yu={};function Pa(n,e){fc(n,e),fc(n+"Capture",e)}function fc(n,e){for(yu[n]=e,n=0;n<e.length;n++)kE.add(e[n])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ym=Object.prototype.hasOwnProperty,Dx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},aw={};function Ix(n){return ym.call(aw,n)?!0:ym.call(ow,n)?!1:Dx.test(n)?aw[n]=!0:(ow[n]=!0,!1)}function Fx(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Nx(n,e,t,i){if(e===null||typeof e>"u"||Fx(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$t[n]=new hn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];$t[e]=new hn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){$t[n]=new hn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$t[n]=new hn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$t[n]=new hn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){$t[n]=new hn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){$t[n]=new hn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){$t[n]=new hn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){$t[n]=new hn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Fy=/[\-:]([a-z])/g;function Ny(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Fy,Ny);$t[e]=new hn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Fy,Ny);$t[e]=new hn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Fy,Ny);$t[e]=new hn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){$t[n]=new hn(n,1,!1,n.toLowerCase(),null,!1,!1)});$t.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){$t[n]=new hn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Oy(n,e,t,i){var r=$t.hasOwnProperty(e)?$t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nx(e,t,r,i)&&(t=null),i||r===null?Ix(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Zr=Mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Od=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Ya=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),RE=Symbol.for("react.context"),zy=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),Hy=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),PE=Symbol.for("react.offscreen"),lw=Symbol.iterator;function Cc(n){return n===null||typeof n!="object"?null:(n=lw&&n[lw]||n["@@iterator"],typeof n=="function"?n:null)}var rt=Object.assign,Og;function Hc(n){if(Og===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Og=e&&e[1]||""}return`
`+Og+n}var jg=!1;function zg(n,e){if(!n||jg)return"";jg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{jg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Hc(n):""}function Ox(n){switch(n.tag){case 5:return Hc(n.type);case 16:return Hc("Lazy");case 13:return Hc("Suspense");case 19:return Hc("SuspenseList");case 0:case 2:case 15:return n=zg(n.type,!1),n;case 11:return n=zg(n.type.render,!1),n;case 1:return n=zg(n.type,!0),n;default:return""}}function Am(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ya:return"Fragment";case Ka:return"Portal";case wm:return"Profiler";case jy:return"StrictMode";case _m:return"Suspense";case Em:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RE:return(n.displayName||"Context")+".Consumer";case TE:return(n._context.displayName||"Context")+".Provider";case zy:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Hy:return e=n.displayName||null,e!==null?e:Am(n.type)||"Memo";case cs:e=n._payload,n=n._init;try{return Am(n(e))}catch{}}return null}function jx(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Am(e);case 8:return e===jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function LE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zx(n){var e=LE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function jd(n){n._valueTracker||(n._valueTracker=zx(n))}function ME(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=LE(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Gf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Sm(n,e){var t=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function cw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ws(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DE(n,e){e=e.checked,e!=null&&Oy(n,"checked",e,!1)}function bm(n,e){DE(n,e);var t=Ws(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?xm(n,e.type,t):e.hasOwnProperty("defaultValue")&&xm(n,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function uw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function xm(n,e,t){(e!=="number"||Gf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Bc=Array.isArray;function ll(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ws(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Cm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(z(92));if(Bc(t)){if(1<t.length)throw Error(z(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ws(t)}}function IE(n,e){var t=Ws(e.value),i=Ws(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function dw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function FE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function km(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?FE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var zd,NE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(zd=zd||document.createElement("div"),zd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function wu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hx=["Webkit","ms","Moz","O"];Object.keys(ou).forEach(function(n){Hx.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ou[e]=ou[n]})});function OE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ou.hasOwnProperty(n)&&ou[n]?(""+e).trim():e+"px"}function jE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=OE(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var Bx=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tm(n,e){if(e){if(Bx[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Rm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pm=null;function By(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Lm=null,cl=null,ul=null;function fw(n){if(n=_d(n)){if(typeof Lm!="function")throw Error(z(280));var e=n.stateNode;e&&(e=Qp(e),Lm(n.stateNode,n.type,e))}}function zE(n){cl?ul?ul.push(n):ul=[n]:cl=n}function HE(){if(cl){var n=cl,e=ul;if(ul=cl=null,fw(n),e)for(n=0;n<e.length;n++)fw(e[n])}}function BE(n,e){return n(e)}function UE(){}var Hg=!1;function $E(n,e,t){if(Hg)return n(e,t);Hg=!0;try{return BE(n,e,t)}finally{Hg=!1,(cl!==null||ul!==null)&&(UE(),HE())}}function _u(n,e){var t=n.stateNode;if(t===null)return null;var i=Qp(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(z(231,e,typeof t));return t}var Mm=!1;if(Xr)try{var kc={};Object.defineProperty(kc,"passive",{get:function(){Mm=!0}}),window.addEventListener("test",kc,kc),window.removeEventListener("test",kc,kc)}catch{Mm=!1}function Ux(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var au=!1,Xf=null,Kf=!1,Dm=null,$x={onError:function(n){au=!0,Xf=n}};function Vx(n,e,t,i,r,s,o,a,l){au=!1,Xf=null,Ux.apply($x,arguments)}function Wx(n,e,t,i,r,s,o,a,l){if(Vx.apply(this,arguments),au){if(au){var u=Xf;au=!1,Xf=null}else throw Error(z(198));Kf||(Kf=!0,Dm=u)}}function La(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function VE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function pw(n){if(La(n)!==n)throw Error(z(188))}function Gx(n){var e=n.alternate;if(!e){if(e=La(n),e===null)throw Error(z(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return pw(r),n;if(s===i)return pw(r),e;s=s.sibling}throw Error(z(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(z(189))}}if(t.alternate!==i)throw Error(z(190))}if(t.tag!==3)throw Error(z(188));return t.stateNode.current===t?n:e}function WE(n){return n=Gx(n),n!==null?GE(n):null}function GE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=GE(n);if(e!==null)return e;n=n.sibling}return null}var XE=Bn.unstable_scheduleCallback,gw=Bn.unstable_cancelCallback,Xx=Bn.unstable_shouldYield,Kx=Bn.unstable_requestPaint,ht=Bn.unstable_now,Yx=Bn.unstable_getCurrentPriorityLevel,Uy=Bn.unstable_ImmediatePriority,KE=Bn.unstable_UserBlockingPriority,Yf=Bn.unstable_NormalPriority,qx=Bn.unstable_LowPriority,YE=Bn.unstable_IdlePriority,Xp=null,Ji=null;function Qx(n){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(Xp,n,void 0,(n.current.flags&128)===128)}catch{}}var ki=Math.clz32?Math.clz32:eC,Jx=Math.log,Zx=Math.LN2;function eC(n){return n>>>=0,n===0?32:31-(Jx(n)/Zx|0)|0}var Hd=64,Bd=4194304;function Uc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qf(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Uc(a):(s&=o,s!==0&&(i=Uc(s)))}else o=t&~r,o!==0?i=Uc(o):s!==0&&(i=Uc(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ki(e),r=1<<t,i|=n[t],e&=~r;return i}function tC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nC(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ki(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=tC(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Im(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function qE(){var n=Hd;return Hd<<=1,!(Hd&4194240)&&(Hd=64),n}function Bg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function yd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ki(e),n[e]=t}function iC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ki(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function $y(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ki(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Me=0;function QE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var JE,Vy,ZE,eA,tA,Fm=!1,Ud=[],Os=null,js=null,zs=null,Eu=new Map,Au=new Map,hs=[],rC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mw(n,e){switch(n){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Eu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(e.pointerId)}}function Tc(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=_d(e),e!==null&&Vy(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function sC(n,e,t,i,r){switch(e){case"focusin":return Os=Tc(Os,n,e,t,i,r),!0;case"dragenter":return js=Tc(js,n,e,t,i,r),!0;case"mouseover":return zs=Tc(zs,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Eu.set(s,Tc(Eu.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Au.set(s,Tc(Au.get(s)||null,n,e,t,i,r)),!0}return!1}function nA(n){var e=go(n.target);if(e!==null){var t=La(e);if(t!==null){if(e=t.tag,e===13){if(e=VE(t),e!==null){n.blockedOn=e,tA(n.priority,function(){ZE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Nm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Pm=i,t.target.dispatchEvent(i),Pm=null}else return e=_d(t),e!==null&&Vy(e),n.blockedOn=t,!1;e.shift()}return!0}function vw(n,e,t){cf(n)&&t.delete(e)}function oC(){Fm=!1,Os!==null&&cf(Os)&&(Os=null),js!==null&&cf(js)&&(js=null),zs!==null&&cf(zs)&&(zs=null),Eu.forEach(vw),Au.forEach(vw)}function Rc(n,e){n.blockedOn===e&&(n.blockedOn=null,Fm||(Fm=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,oC)))}function Su(n){function e(r){return Rc(r,n)}if(0<Ud.length){Rc(Ud[0],n);for(var t=1;t<Ud.length;t++){var i=Ud[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Os!==null&&Rc(Os,n),js!==null&&Rc(js,n),zs!==null&&Rc(zs,n),Eu.forEach(e),Au.forEach(e),t=0;t<hs.length;t++)i=hs[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<hs.length&&(t=hs[0],t.blockedOn===null);)nA(t),t.blockedOn===null&&hs.shift()}var hl=Zr.ReactCurrentBatchConfig,Qf=!0;function aC(n,e,t,i){var r=Me,s=hl.transition;hl.transition=null;try{Me=1,Wy(n,e,t,i)}finally{Me=r,hl.transition=s}}function lC(n,e,t,i){var r=Me,s=hl.transition;hl.transition=null;try{Me=4,Wy(n,e,t,i)}finally{Me=r,hl.transition=s}}function Wy(n,e,t,i){if(Qf){var r=Nm(n,e,t,i);if(r===null)Qg(n,e,i,Jf,t),mw(n,i);else if(sC(r,n,e,t,i))i.stopPropagation();else if(mw(n,i),e&4&&-1<rC.indexOf(n)){for(;r!==null;){var s=_d(r);if(s!==null&&JE(s),s=Nm(n,e,t,i),s===null&&Qg(n,e,i,Jf,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Qg(n,e,i,null,t)}}var Jf=null;function Nm(n,e,t,i){if(Jf=null,n=By(i),n=go(n),n!==null)if(e=La(n),e===null)n=null;else if(t=e.tag,t===13){if(n=VE(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Jf=n,null}function iA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yx()){case Uy:return 1;case KE:return 4;case Yf:case qx:return 16;case YE:return 536870912;default:return 16}default:return 16}}var Fs=null,Gy=null,uf=null;function rA(){if(uf)return uf;var n,e=Gy,t=e.length,i,r="value"in Fs?Fs.value:Fs.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return uf=r.slice(n,1<i?1-i:void 0)}function hf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $d(){return!0}function yw(){return!1}function $n(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$d:yw,this.isPropagationStopped=yw,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$d)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$d)},persist:function(){},isPersistent:$d}),e}var Ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xy=$n(Ac),wd=rt({},Ac,{view:0,detail:0}),cC=$n(wd),Ug,$g,Pc,Kp=rt({},wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ky,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pc&&(Pc&&n.type==="mousemove"?(Ug=n.screenX-Pc.screenX,$g=n.screenY-Pc.screenY):$g=Ug=0,Pc=n),Ug)},movementY:function(n){return"movementY"in n?n.movementY:$g}}),ww=$n(Kp),uC=rt({},Kp,{dataTransfer:0}),hC=$n(uC),dC=rt({},wd,{relatedTarget:0}),Vg=$n(dC),fC=rt({},Ac,{animationName:0,elapsedTime:0,pseudoElement:0}),pC=$n(fC),gC=rt({},Ac,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),mC=$n(gC),vC=rt({},Ac,{data:0}),_w=$n(vC),yC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_C={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EC(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=_C[n])?!!e[n]:!1}function Ky(){return EC}var AC=rt({},wd,{key:function(n){if(n.key){var e=yC[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=hf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ky,charCode:function(n){return n.type==="keypress"?hf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),SC=$n(AC),bC=rt({},Kp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ew=$n(bC),xC=rt({},wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ky}),CC=$n(xC),kC=rt({},Ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),TC=$n(kC),RC=rt({},Kp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),PC=$n(RC),LC=[9,13,27,32],Yy=Xr&&"CompositionEvent"in window,lu=null;Xr&&"documentMode"in document&&(lu=document.documentMode);var MC=Xr&&"TextEvent"in window&&!lu,sA=Xr&&(!Yy||lu&&8<lu&&11>=lu),Aw=" ",Sw=!1;function oA(n,e){switch(n){case"keyup":return LC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qa=!1;function DC(n,e){switch(n){case"compositionend":return aA(e);case"keypress":return e.which!==32?null:(Sw=!0,Aw);case"textInput":return n=e.data,n===Aw&&Sw?null:n;default:return null}}function IC(n,e){if(qa)return n==="compositionend"||!Yy&&oA(n,e)?(n=rA(),uf=Gy=Fs=null,qa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sA&&e.locale!=="ko"?null:e.data;default:return null}}var FC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!FC[n.type]:e==="textarea"}function lA(n,e,t,i){zE(i),e=Zf(e,"onChange"),0<e.length&&(t=new Xy("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var cu=null,bu=null;function NC(n){wA(n,0)}function Yp(n){var e=Za(n);if(ME(e))return n}function OC(n,e){if(n==="change")return e}var cA=!1;if(Xr){var Wg;if(Xr){var Gg="oninput"in document;if(!Gg){var xw=document.createElement("div");xw.setAttribute("oninput","return;"),Gg=typeof xw.oninput=="function"}Wg=Gg}else Wg=!1;cA=Wg&&(!document.documentMode||9<document.documentMode)}function Cw(){cu&&(cu.detachEvent("onpropertychange",uA),bu=cu=null)}function uA(n){if(n.propertyName==="value"&&Yp(bu)){var e=[];lA(e,bu,n,By(n)),$E(NC,e)}}function jC(n,e,t){n==="focusin"?(Cw(),cu=e,bu=t,cu.attachEvent("onpropertychange",uA)):n==="focusout"&&Cw()}function zC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yp(bu)}function HC(n,e){if(n==="click")return Yp(e)}function BC(n,e){if(n==="input"||n==="change")return Yp(e)}function UC(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ri=typeof Object.is=="function"?Object.is:UC;function xu(n,e){if(Ri(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!ym.call(e,r)||!Ri(n[r],e[r]))return!1}return!0}function kw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Tw(n,e){var t=kw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=kw(t)}}function hA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?hA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dA(){for(var n=window,e=Gf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Gf(n.document)}return e}function qy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function $C(n){var e=dA(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&hA(t.ownerDocument.documentElement,t)){if(i!==null&&qy(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Tw(t,s);var o=Tw(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var VC=Xr&&"documentMode"in document&&11>=document.documentMode,Qa=null,Om=null,uu=null,jm=!1;function Rw(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;jm||Qa==null||Qa!==Gf(i)||(i=Qa,"selectionStart"in i&&qy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uu&&xu(uu,i)||(uu=i,i=Zf(Om,"onSelect"),0<i.length&&(e=new Xy("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Qa)))}function Vd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ja={animationend:Vd("Animation","AnimationEnd"),animationiteration:Vd("Animation","AnimationIteration"),animationstart:Vd("Animation","AnimationStart"),transitionend:Vd("Transition","TransitionEnd")},Xg={},fA={};Xr&&(fA=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function qp(n){if(Xg[n])return Xg[n];if(!Ja[n])return n;var e=Ja[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fA)return Xg[n]=e[t];return n}var pA=qp("animationend"),gA=qp("animationiteration"),mA=qp("animationstart"),vA=qp("transitionend"),yA=new Map,Pw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(n,e){yA.set(n,e),Pa(e,[n])}for(var Kg=0;Kg<Pw.length;Kg++){var Yg=Pw[Kg],WC=Yg.toLowerCase(),GC=Yg[0].toUpperCase()+Yg.slice(1);qs(WC,"on"+GC)}qs(pA,"onAnimationEnd");qs(gA,"onAnimationIteration");qs(mA,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(vA,"onTransitionEnd");fc("onMouseEnter",["mouseout","mouseover"]);fc("onMouseLeave",["mouseout","mouseover"]);fc("onPointerEnter",["pointerout","pointerover"]);fc("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XC=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function Lw(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Wx(i,e,void 0,n),n.currentTarget=null}function wA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Lw(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Lw(r,a,u),s=l}}}if(Kf)throw n=Dm,Kf=!1,Dm=null,n}function Xe(n,e){var t=e[$m];t===void 0&&(t=e[$m]=new Set);var i=n+"__bubble";t.has(i)||(_A(e,n,2,!1),t.add(i))}function qg(n,e,t){var i=0;e&&(i|=4),_A(t,n,i,e)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function Cu(n){if(!n[Wd]){n[Wd]=!0,kE.forEach(function(t){t!=="selectionchange"&&(XC.has(t)||qg(t,!1,n),qg(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Wd]||(e[Wd]=!0,qg("selectionchange",!1,e))}}function _A(n,e,t,i){switch(iA(e)){case 1:var r=aC;break;case 4:r=lC;break;default:r=Wy}t=r.bind(null,e,t,n),r=void 0,!Mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Qg(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=go(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}$E(function(){var u=s,h=By(t),d=[];e:{var f=yA.get(n);if(f!==void 0){var p=Xy,g=n;switch(n){case"keypress":if(hf(t)===0)break e;case"keydown":case"keyup":p=SC;break;case"focusin":g="focus",p=Vg;break;case"focusout":g="blur",p=Vg;break;case"beforeblur":case"afterblur":p=Vg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=CC;break;case pA:case gA:case mA:p=pC;break;case vA:p=TC;break;case"scroll":p=cC;break;case"wheel":p=PC;break;case"copy":case"cut":case"paste":p=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ew}var y=(e&4)!==0,S=!y&&n==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var v=u,A;v!==null;){A=v;var x=A.stateNode;if(A.tag===5&&x!==null&&(A=x,m!==null&&(x=_u(v,m),x!=null&&y.push(ku(v,x,A)))),S)break;v=v.return}0<y.length&&(f=new p(f,g,null,t,h),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==Pm&&(g=t.relatedTarget||t.fromElement)&&(go(g)||g[Kr]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=u,g=g?go(g):null,g!==null&&(S=La(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=ww,x="onMouseLeave",m="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(y=Ew,x="onPointerLeave",m="onPointerEnter",v="pointer"),S=p==null?f:Za(p),A=g==null?f:Za(g),f=new y(x,v+"leave",p,t,h),f.target=S,f.relatedTarget=A,x=null,go(h)===u&&(y=new y(m,v+"enter",g,t,h),y.target=A,y.relatedTarget=S,x=y),S=x,p&&g)t:{for(y=p,m=g,v=0,A=y;A;A=Ha(A))v++;for(A=0,x=m;x;x=Ha(x))A++;for(;0<v-A;)y=Ha(y),v--;for(;0<A-v;)m=Ha(m),A--;for(;v--;){if(y===m||m!==null&&y===m.alternate)break t;y=Ha(y),m=Ha(m)}y=null}else y=null;p!==null&&Mw(d,f,p,y,!1),g!==null&&S!==null&&Mw(d,S,g,y,!0)}}e:{if(f=u?Za(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=OC;else if(bw(f))if(cA)k=BC;else{k=zC;var R=jC}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=HC);if(k&&(k=k(n,u))){lA(d,k,t,h);break e}R&&R(n,f,u),n==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&xm(f,"number",f.value)}switch(R=u?Za(u):window,n){case"focusin":(bw(R)||R.contentEditable==="true")&&(Qa=R,Om=u,uu=null);break;case"focusout":uu=Om=Qa=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,Rw(d,t,h);break;case"selectionchange":if(VC)break;case"keydown":case"keyup":Rw(d,t,h)}var L;if(Yy)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qa?oA(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(sA&&t.locale!=="ko"&&(qa||b!=="onCompositionStart"?b==="onCompositionEnd"&&qa&&(L=rA()):(Fs=h,Gy="value"in Fs?Fs.value:Fs.textContent,qa=!0)),R=Zf(u,b),0<R.length&&(b=new _w(b,n,null,t,h),d.push({event:b,listeners:R}),L?b.data=L:(L=aA(t),L!==null&&(b.data=L)))),(L=MC?DC(n,t):IC(n,t))&&(u=Zf(u,"onBeforeInput"),0<u.length&&(h=new _w("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=L))}wA(d,e)})}function ku(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Zf(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=_u(n,t),s!=null&&i.unshift(ku(n,s,r)),s=_u(n,e),s!=null&&i.push(ku(n,s,r))),n=n.return}return i}function Ha(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Mw(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=_u(t,s),l!=null&&o.unshift(ku(t,l,a))):r||(l=_u(t,s),l!=null&&o.push(ku(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var KC=/\r\n?/g,YC=/\u0000|\uFFFD/g;function Dw(n){return(typeof n=="string"?n:""+n).replace(KC,`
`).replace(YC,"")}function Gd(n,e,t){if(e=Dw(e),Dw(n)!==e&&t)throw Error(z(425))}function ep(){}var zm=null,Hm=null;function Bm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Um=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,QC=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(n){return Iw.resolve(null).then(n).catch(JC)}:Um;function JC(n){setTimeout(function(){throw n})}function Jg(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Su(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Su(e)}function Hs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Fw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Sc,Tu="__reactProps$"+Sc,Kr="__reactContainer$"+Sc,$m="__reactEvents$"+Sc,ZC="__reactListeners$"+Sc,ek="__reactHandles$"+Sc;function go(n){var e=n[Qi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Kr]||t[Qi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Fw(n);n!==null;){if(t=n[Qi])return t;n=Fw(n)}return e}n=t,t=n.parentNode}return null}function _d(n){return n=n[Qi]||n[Kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Za(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(z(33))}function Qp(n){return n[Tu]||null}var Vm=[],el=-1;function Qs(n){return{current:n}}function Ke(n){0>el||(n.current=Vm[el],Vm[el]=null,el--)}function Ge(n,e){el++,Vm[el]=n.current,n.current=e}var Gs={},Zt=Qs(Gs),_n=Qs(!1),va=Gs;function pc(n,e){var t=n.type.contextTypes;if(!t)return Gs;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function En(n){return n=n.childContextTypes,n!=null}function tp(){Ke(_n),Ke(Zt)}function Nw(n,e,t){if(Zt.current!==Gs)throw Error(z(168));Ge(Zt,e),Ge(_n,t)}function EA(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(z(108,jx(n)||"Unknown",r));return rt({},t,i)}function np(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gs,va=Zt.current,Ge(Zt,n),Ge(_n,_n.current),!0}function Ow(n,e,t){var i=n.stateNode;if(!i)throw Error(z(169));t?(n=EA(n,e,va),i.__reactInternalMemoizedMergedChildContext=n,Ke(_n),Ke(Zt),Ge(Zt,n)):Ke(_n),Ge(_n,t)}var fr=null,Jp=!1,Zg=!1;function AA(n){fr===null?fr=[n]:fr.push(n)}function tk(n){Jp=!0,AA(n)}function Js(){if(!Zg&&fr!==null){Zg=!0;var n=0,e=Me;try{var t=fr;for(Me=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}fr=null,Jp=!1}catch(r){throw fr!==null&&(fr=fr.slice(n+1)),XE(Uy,Js),r}finally{Me=e,Zg=!1}}return null}var tl=[],nl=0,ip=null,rp=0,Zn=[],ei=0,ya=null,zr=1,Hr="";function oo(n,e){tl[nl++]=rp,tl[nl++]=ip,ip=n,rp=e}function SA(n,e,t){Zn[ei++]=zr,Zn[ei++]=Hr,Zn[ei++]=ya,ya=n;var i=zr;n=Hr;var r=32-ki(i)-1;i&=~(1<<r),t+=1;var s=32-ki(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,zr=1<<32-ki(e)+r|t<<r|i,Hr=s+n}else zr=1<<s|t<<r|i,Hr=n}function Qy(n){n.return!==null&&(oo(n,1),SA(n,1,0))}function Jy(n){for(;n===ip;)ip=tl[--nl],tl[nl]=null,rp=tl[--nl],tl[nl]=null;for(;n===ya;)ya=Zn[--ei],Zn[ei]=null,Hr=Zn[--ei],Zn[ei]=null,zr=Zn[--ei],Zn[ei]=null}var Hn=null,zn=null,qe=!1,Ci=null;function bA(n,e){var t=ii(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Hn=n,zn=Hs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Hn=n,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ya!==null?{id:zr,overflow:Hr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ii(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Hn=n,zn=null,!0):!1;default:return!1}}function Wm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Gm(n){if(qe){var e=zn;if(e){var t=e;if(!jw(n,e)){if(Wm(n))throw Error(z(418));e=Hs(t.nextSibling);var i=Hn;e&&jw(n,e)?bA(i,t):(n.flags=n.flags&-4097|2,qe=!1,Hn=n)}}else{if(Wm(n))throw Error(z(418));n.flags=n.flags&-4097|2,qe=!1,Hn=n}}}function zw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hn=n}function Xd(n){if(n!==Hn)return!1;if(!qe)return zw(n),qe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Bm(n.type,n.memoizedProps)),e&&(e=zn)){if(Wm(n))throw xA(),Error(z(418));for(;e;)bA(n,e),e=Hs(e.nextSibling)}if(zw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(z(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zn=Hs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zn=null}}else zn=Hn?Hs(n.stateNode.nextSibling):null;return!0}function xA(){for(var n=zn;n;)n=Hs(n.nextSibling)}function gc(){zn=Hn=null,qe=!1}function Zy(n){Ci===null?Ci=[n]:Ci.push(n)}var nk=Zr.ReactCurrentBatchConfig;function Lc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(z(309));var i=t.stateNode}if(!i)throw Error(z(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(z(284));if(!t._owner)throw Error(z(290,n))}return n}function Kd(n,e){throw n=Object.prototype.toString.call(e),Error(z(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Hw(n){var e=n._init;return e(n._payload)}function CA(n){function e(m,v){if(n){var A=m.deletions;A===null?(m.deletions=[v],m.flags|=16):A.push(v)}}function t(m,v){if(!n)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function i(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function r(m,v){return m=Vs(m,v),m.index=0,m.sibling=null,m}function s(m,v,A){return m.index=A,n?(A=m.alternate,A!==null?(A=A.index,A<v?(m.flags|=2,v):A):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,v,A,x){return v===null||v.tag!==6?(v=om(A,m.mode,x),v.return=m,v):(v=r(v,A),v.return=m,v)}function l(m,v,A,x){var k=A.type;return k===Ya?h(m,v,A.props.children,x,A.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cs&&Hw(k)===v.type)?(x=r(v,A.props),x.ref=Lc(m,v,A),x.return=m,x):(x=yf(A.type,A.key,A.props,null,m.mode,x),x.ref=Lc(m,v,A),x.return=m,x)}function u(m,v,A,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=am(A,m.mode,x),v.return=m,v):(v=r(v,A.children||[]),v.return=m,v)}function h(m,v,A,x,k){return v===null||v.tag!==7?(v=ma(A,m.mode,x,k),v.return=m,v):(v=r(v,A),v.return=m,v)}function d(m,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return v=om(""+v,m.mode,A),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Od:return A=yf(v.type,v.key,v.props,null,m.mode,A),A.ref=Lc(m,null,v),A.return=m,A;case Ka:return v=am(v,m.mode,A),v.return=m,v;case cs:var x=v._init;return d(m,x(v._payload),A)}if(Bc(v)||Cc(v))return v=ma(v,m.mode,A,null),v.return=m,v;Kd(m,v)}return null}function f(m,v,A,x){var k=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:a(m,v,""+A,x);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Od:return A.key===k?l(m,v,A,x):null;case Ka:return A.key===k?u(m,v,A,x):null;case cs:return k=A._init,f(m,v,k(A._payload),x)}if(Bc(A)||Cc(A))return k!==null?null:h(m,v,A,x,null);Kd(m,A)}return null}function p(m,v,A,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(A)||null,a(v,m,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Od:return m=m.get(x.key===null?A:x.key)||null,l(v,m,x,k);case Ka:return m=m.get(x.key===null?A:x.key)||null,u(v,m,x,k);case cs:var R=x._init;return p(m,v,A,R(x._payload),k)}if(Bc(x)||Cc(x))return m=m.get(A)||null,h(v,m,x,k,null);Kd(v,x)}return null}function g(m,v,A,x){for(var k=null,R=null,L=v,b=v=0,I=null;L!==null&&b<A.length;b++){L.index>b?(I=L,L=null):I=L.sibling;var F=f(m,L,A[b],x);if(F===null){L===null&&(L=I);break}n&&L&&F.alternate===null&&e(m,L),v=s(F,v,b),R===null?k=F:R.sibling=F,R=F,L=I}if(b===A.length)return t(m,L),qe&&oo(m,b),k;if(L===null){for(;b<A.length;b++)L=d(m,A[b],x),L!==null&&(v=s(L,v,b),R===null?k=L:R.sibling=L,R=L);return qe&&oo(m,b),k}for(L=i(m,L);b<A.length;b++)I=p(L,m,b,A[b],x),I!==null&&(n&&I.alternate!==null&&L.delete(I.key===null?b:I.key),v=s(I,v,b),R===null?k=I:R.sibling=I,R=I);return n&&L.forEach(function(O){return e(m,O)}),qe&&oo(m,b),k}function y(m,v,A,x){var k=Cc(A);if(typeof k!="function")throw Error(z(150));if(A=k.call(A),A==null)throw Error(z(151));for(var R=k=null,L=v,b=v=0,I=null,F=A.next();L!==null&&!F.done;b++,F=A.next()){L.index>b?(I=L,L=null):I=L.sibling;var O=f(m,L,F.value,x);if(O===null){L===null&&(L=I);break}n&&L&&O.alternate===null&&e(m,L),v=s(O,v,b),R===null?k=O:R.sibling=O,R=O,L=I}if(F.done)return t(m,L),qe&&oo(m,b),k;if(L===null){for(;!F.done;b++,F=A.next())F=d(m,F.value,x),F!==null&&(v=s(F,v,b),R===null?k=F:R.sibling=F,R=F);return qe&&oo(m,b),k}for(L=i(m,L);!F.done;b++,F=A.next())F=p(L,m,b,F.value,x),F!==null&&(n&&F.alternate!==null&&L.delete(F.key===null?b:F.key),v=s(F,v,b),R===null?k=F:R.sibling=F,R=F);return n&&L.forEach(function(J){return e(m,J)}),qe&&oo(m,b),k}function S(m,v,A,x){if(typeof A=="object"&&A!==null&&A.type===Ya&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Od:e:{for(var k=A.key,R=v;R!==null;){if(R.key===k){if(k=A.type,k===Ya){if(R.tag===7){t(m,R.sibling),v=r(R,A.props.children),v.return=m,m=v;break e}}else if(R.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cs&&Hw(k)===R.type){t(m,R.sibling),v=r(R,A.props),v.ref=Lc(m,R,A),v.return=m,m=v;break e}t(m,R);break}else e(m,R);R=R.sibling}A.type===Ya?(v=ma(A.props.children,m.mode,x,A.key),v.return=m,m=v):(x=yf(A.type,A.key,A.props,null,m.mode,x),x.ref=Lc(m,v,A),x.return=m,m=x)}return o(m);case Ka:e:{for(R=A.key;v!==null;){if(v.key===R)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){t(m,v.sibling),v=r(v,A.children||[]),v.return=m,m=v;break e}else{t(m,v);break}else e(m,v);v=v.sibling}v=am(A,m.mode,x),v.return=m,m=v}return o(m);case cs:return R=A._init,S(m,v,R(A._payload),x)}if(Bc(A))return g(m,v,A,x);if(Cc(A))return y(m,v,A,x);Kd(m,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,v!==null&&v.tag===6?(t(m,v.sibling),v=r(v,A),v.return=m,m=v):(t(m,v),v=om(A,m.mode,x),v.return=m,m=v),o(m)):t(m,v)}return S}var mc=CA(!0),kA=CA(!1),sp=Qs(null),op=null,il=null,e0=null;function t0(){e0=il=op=null}function n0(n){var e=sp.current;Ke(sp),n._currentValue=e}function Xm(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function dl(n,e){op=n,e0=il=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(vn=!0),n.firstContext=null)}function si(n){var e=n._currentValue;if(e0!==n)if(n={context:n,memoizedValue:e,next:null},il===null){if(op===null)throw Error(z(308));il=n,op.dependencies={lanes:0,firstContext:n}}else il=il.next=n;return e}var mo=null;function i0(n){mo===null?mo=[n]:mo.push(n)}function TA(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,i0(e)):(t.next=r.next,r.next=t),e.interleaved=t,Yr(n,i)}function Yr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var us=!1;function r0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RA(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Br(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,xe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Yr(n,t)}return r=i.interleaved,r===null?(e.next=e,i0(i)):(e.next=r.next,r.next=e),i.interleaved=e,Yr(n,t)}function df(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,$y(n,t)}}function Bw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ap(n,e,t,i){var r=n.updateQueue;us=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,y=a;switch(f=e,p=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=rt({},d,f);break e;case 2:us=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);_a|=o,n.lanes=o,n.memoizedState=d}}function Uw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(z(191,r));r.call(i)}}}var Ed={},Zi=Qs(Ed),Ru=Qs(Ed),Pu=Qs(Ed);function vo(n){if(n===Ed)throw Error(z(174));return n}function s0(n,e){switch(Ge(Pu,e),Ge(Ru,n),Ge(Zi,Ed),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:km(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=km(e,n)}Ke(Zi),Ge(Zi,e)}function vc(){Ke(Zi),Ke(Ru),Ke(Pu)}function PA(n){vo(Pu.current);var e=vo(Zi.current),t=km(e,n.type);e!==t&&(Ge(Ru,n),Ge(Zi,t))}function o0(n){Ru.current===n&&(Ke(Zi),Ke(Ru))}var nt=Qs(0);function lp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var em=[];function a0(){for(var n=0;n<em.length;n++)em[n]._workInProgressVersionPrimary=null;em.length=0}var ff=Zr.ReactCurrentDispatcher,tm=Zr.ReactCurrentBatchConfig,wa=0,it=null,bt=null,Pt=null,cp=!1,hu=!1,Lu=0,ik=0;function Vt(){throw Error(z(321))}function l0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ri(n[t],e[t]))return!1;return!0}function c0(n,e,t,i,r,s){if(wa=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ff.current=n===null||n.memoizedState===null?ak:lk,n=t(i,r),hu){s=0;do{if(hu=!1,Lu=0,25<=s)throw Error(z(301));s+=1,Pt=bt=null,e.updateQueue=null,ff.current=ck,n=t(i,r)}while(hu)}if(ff.current=up,e=bt!==null&&bt.next!==null,wa=0,Pt=bt=it=null,cp=!1,e)throw Error(z(300));return n}function u0(){var n=Lu!==0;return Lu=0,n}function Ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?it.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function oi(){if(bt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var e=Pt===null?it.memoizedState:Pt.next;if(e!==null)Pt=e,bt=n;else{if(n===null)throw Error(z(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Pt===null?it.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Mu(n,e){return typeof e=="function"?e(n):e}function nm(n){var e=oi(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var i=bt,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((wa&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,it.lanes|=h,_a|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Ri(i,e.memoizedState)||(vn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,it.lanes|=s,_a|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function im(n){var e=oi(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Ri(s,e.memoizedState)||(vn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function LA(){}function MA(n,e){var t=it,i=oi(),r=e(),s=!Ri(i.memoizedState,r);if(s&&(i.memoizedState=r,vn=!0),i=i.queue,h0(FA.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(t.flags|=2048,Du(9,IA.bind(null,t,i,r,e),void 0,null),Lt===null)throw Error(z(349));wa&30||DA(t,e,r)}return r}function DA(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function IA(n,e,t,i){e.value=t,e.getSnapshot=i,NA(e)&&OA(n)}function FA(n,e,t){return t(function(){NA(e)&&OA(n)})}function NA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ri(n,t)}catch{return!0}}function OA(n){var e=Yr(n,1);e!==null&&Ti(e,n,1,-1)}function $w(n){var e=Ii();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:n},e.queue=n,n=n.dispatch=ok.bind(null,it,n),[e.memoizedState,n]}function Du(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function jA(){return oi().memoizedState}function pf(n,e,t,i){var r=Ii();it.flags|=n,r.memoizedState=Du(1|e,t,void 0,i===void 0?null:i)}function Zp(n,e,t,i){var r=oi();i=i===void 0?null:i;var s=void 0;if(bt!==null){var o=bt.memoizedState;if(s=o.destroy,i!==null&&l0(i,o.deps)){r.memoizedState=Du(e,t,s,i);return}}it.flags|=n,r.memoizedState=Du(1|e,t,s,i)}function Vw(n,e){return pf(8390656,8,n,e)}function h0(n,e){return Zp(2048,8,n,e)}function zA(n,e){return Zp(4,2,n,e)}function HA(n,e){return Zp(4,4,n,e)}function BA(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function UA(n,e,t){return t=t!=null?t.concat([n]):null,Zp(4,4,BA.bind(null,e,n),t)}function d0(){}function $A(n,e){var t=oi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&l0(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function VA(n,e){var t=oi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&l0(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function WA(n,e,t){return wa&21?(Ri(t,e)||(t=qE(),it.lanes|=t,_a|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,vn=!0),n.memoizedState=t)}function rk(n,e){var t=Me;Me=t!==0&&4>t?t:4,n(!0);var i=tm.transition;tm.transition={};try{n(!1),e()}finally{Me=t,tm.transition=i}}function GA(){return oi().memoizedState}function sk(n,e,t){var i=$s(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},XA(n))KA(e,t);else if(t=TA(n,e,t,i),t!==null){var r=an();Ti(t,n,i,r),YA(t,e,i)}}function ok(n,e,t){var i=$s(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(XA(n))KA(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Ri(a,o)){var l=e.interleaved;l===null?(r.next=r,i0(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=TA(n,e,r,i),t!==null&&(r=an(),Ti(t,n,i,r),YA(t,e,i))}}function XA(n){var e=n.alternate;return n===it||e!==null&&e===it}function KA(n,e){hu=cp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function YA(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,$y(n,t)}}var up={readContext:si,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},ak={readContext:si,useCallback:function(n,e){return Ii().memoizedState=[n,e===void 0?null:e],n},useContext:si,useEffect:Vw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,pf(4194308,4,BA.bind(null,e,n),t)},useLayoutEffect:function(n,e){return pf(4194308,4,n,e)},useInsertionEffect:function(n,e){return pf(4,2,n,e)},useMemo:function(n,e){var t=Ii();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ii();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=sk.bind(null,it,n),[i.memoizedState,n]},useRef:function(n){var e=Ii();return n={current:n},e.memoizedState=n},useState:$w,useDebugValue:d0,useDeferredValue:function(n){return Ii().memoizedState=n},useTransition:function(){var n=$w(!1),e=n[0];return n=rk.bind(null,n[1]),Ii().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=it,r=Ii();if(qe){if(t===void 0)throw Error(z(407));t=t()}else{if(t=e(),Lt===null)throw Error(z(349));wa&30||DA(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Vw(FA.bind(null,i,s,n),[n]),i.flags|=2048,Du(9,IA.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ii(),e=Lt.identifierPrefix;if(qe){var t=Hr,i=zr;t=(i&~(1<<32-ki(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Lu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ik++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},lk={readContext:si,useCallback:$A,useContext:si,useEffect:h0,useImperativeHandle:UA,useInsertionEffect:zA,useLayoutEffect:HA,useMemo:VA,useReducer:nm,useRef:jA,useState:function(){return nm(Mu)},useDebugValue:d0,useDeferredValue:function(n){var e=oi();return WA(e,bt.memoizedState,n)},useTransition:function(){var n=nm(Mu)[0],e=oi().memoizedState;return[n,e]},useMutableSource:LA,useSyncExternalStore:MA,useId:GA,unstable_isNewReconciler:!1},ck={readContext:si,useCallback:$A,useContext:si,useEffect:h0,useImperativeHandle:UA,useInsertionEffect:zA,useLayoutEffect:HA,useMemo:VA,useReducer:im,useRef:jA,useState:function(){return im(Mu)},useDebugValue:d0,useDeferredValue:function(n){var e=oi();return bt===null?e.memoizedState=n:WA(e,bt.memoizedState,n)},useTransition:function(){var n=im(Mu)[0],e=oi().memoizedState;return[n,e]},useMutableSource:LA,useSyncExternalStore:MA,useId:GA,unstable_isNewReconciler:!1};function ci(n,e){if(n&&n.defaultProps){e=rt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Km(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:rt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var eg={isMounted:function(n){return(n=n._reactInternals)?La(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=an(),r=$s(n),s=Br(i,r);s.payload=e,t!=null&&(s.callback=t),e=Bs(n,s,r),e!==null&&(Ti(e,n,r,i),df(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=an(),r=$s(n),s=Br(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Bs(n,s,r),e!==null&&(Ti(e,n,r,i),df(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=an(),i=$s(n),r=Br(t,i);r.tag=2,e!=null&&(r.callback=e),e=Bs(n,r,i),e!==null&&(Ti(e,n,i,t),df(e,n,i))}};function Ww(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!xu(t,i)||!xu(r,s):!0}function qA(n,e,t){var i=!1,r=Gs,s=e.contextType;return typeof s=="object"&&s!==null?s=si(s):(r=En(e)?va:Zt.current,i=e.contextTypes,s=(i=i!=null)?pc(n,r):Gs),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function Gw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&eg.enqueueReplaceState(e,e.state,null)}function Ym(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},r0(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=si(s):(s=En(e)?va:Zt.current,r.context=pc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Km(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&eg.enqueueReplaceState(r,r.state,null),ap(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function yc(n,e){try{var t="",i=e;do t+=Ox(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function rm(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function qm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var uk=typeof WeakMap=="function"?WeakMap:Map;function QA(n,e,t){t=Br(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){dp||(dp=!0,ov=i),qm(n,e)},t}function JA(n,e,t){t=Br(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){qm(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){qm(n,e),typeof i!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Xw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new uk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=bk.bind(null,n,e,t),e.then(n,n))}function Kw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Yw(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Br(-1,1),e.tag=2,Bs(t,e,1))),t.lanes|=1),n)}var hk=Zr.ReactCurrentOwner,vn=!1;function sn(n,e,t,i){e.child=n===null?kA(e,null,t,i):mc(e,n.child,t,i)}function qw(n,e,t,i,r){t=t.render;var s=e.ref;return dl(e,r),i=c0(n,e,t,i,s,r),t=u0(),n!==null&&!vn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,qr(n,e,r)):(qe&&t&&Qy(e),e.flags|=1,sn(n,e,i,r),e.child)}function Qw(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!_0(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,ZA(n,e,s,i,r)):(n=yf(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:xu,t(o,i)&&n.ref===e.ref)return qr(n,e,r)}return e.flags|=1,n=Vs(s,i),n.ref=e.ref,n.return=e,e.child=n}function ZA(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(xu(s,i)&&n.ref===e.ref)if(vn=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(vn=!0);else return e.lanes=n.lanes,qr(n,e,r)}return Qm(n,e,t,i,r)}function eS(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(sl,Nn),Nn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ge(sl,Nn),Nn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Ge(sl,Nn),Nn|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Ge(sl,Nn),Nn|=i;return sn(n,e,r,t),e.child}function tS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Qm(n,e,t,i,r){var s=En(t)?va:Zt.current;return s=pc(e,s),dl(e,r),t=c0(n,e,t,i,s,r),i=u0(),n!==null&&!vn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,qr(n,e,r)):(qe&&i&&Qy(e),e.flags|=1,sn(n,e,t,r),e.child)}function Jw(n,e,t,i,r){if(En(t)){var s=!0;np(e)}else s=!1;if(dl(e,r),e.stateNode===null)gf(n,e),qA(e,t,i),Ym(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=si(u):(u=En(t)?va:Zt.current,u=pc(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Gw(e,o,i,u),us=!1;var f=e.memoizedState;o.state=f,ap(e,i,o,r),l=e.memoizedState,a!==i||f!==l||_n.current||us?(typeof h=="function"&&(Km(e,t,h,i),l=e.memoizedState),(a=us||Ww(e,t,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,RA(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ci(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=si(l):(l=En(t)?va:Zt.current,l=pc(e,l));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Gw(e,o,i,l),us=!1,f=e.memoizedState,o.state=f,ap(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||_n.current||us?(typeof p=="function"&&(Km(e,t,p,i),g=e.memoizedState),(u=us||Ww(e,t,u,i,f,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return Jm(n,e,t,i,s,r)}function Jm(n,e,t,i,r,s){tS(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Ow(e,t,!1),qr(n,e,s);i=e.stateNode,hk.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=mc(e,n.child,null,s),e.child=mc(e,null,a,s)):sn(n,e,a,s),e.memoizedState=i.state,r&&Ow(e,t,!0),e.child}function nS(n){var e=n.stateNode;e.pendingContext?Nw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Nw(n,e.context,!1),s0(n,e.containerInfo)}function Zw(n,e,t,i,r){return gc(),Zy(r),e.flags|=256,sn(n,e,t,i),e.child}var Zm={dehydrated:null,treeContext:null,retryLane:0};function ev(n){return{baseLanes:n,cachePool:null,transitions:null}}function iS(n,e,t){var i=e.pendingProps,r=nt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ge(nt,r&1),n===null)return Gm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ig(o,i,0,null),n=ma(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=ev(t),e.memoizedState=Zm,n):f0(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return dk(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Vs(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Vs(a,s):(s=ma(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?ev(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Zm,i}return s=n.child,n=s.sibling,i=Vs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function f0(n,e){return e=ig({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Yd(n,e,t,i){return i!==null&&Zy(i),mc(e,n.child,null,t),n=f0(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function dk(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=rm(Error(z(422))),Yd(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ig({mode:"visible",children:i.children},r,0,null),s=ma(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&mc(e,n.child,null,o),e.child.memoizedState=ev(o),e.memoizedState=Zm,s);if(!(e.mode&1))return Yd(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(z(419)),i=rm(s,i,void 0),Yd(n,e,o,i)}if(a=(o&n.childLanes)!==0,vn||a){if(i=Lt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Yr(n,r),Ti(i,n,r,-1))}return w0(),i=rm(Error(z(421))),Yd(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=xk.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,zn=Hs(r.nextSibling),Hn=e,qe=!0,Ci=null,n!==null&&(Zn[ei++]=zr,Zn[ei++]=Hr,Zn[ei++]=ya,zr=n.id,Hr=n.overflow,ya=e),e=f0(e,i.children),e.flags|=4096,e)}function e_(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Xm(n.return,e,t)}function sm(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function rS(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(sn(n,e,i.children,t),i=nt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e_(n,t,e);else if(n.tag===19)e_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ge(nt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&lp(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),sm(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&lp(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}sm(e,!0,t,null,s);break;case"together":sm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function qr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),_a|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(z(153));if(e.child!==null){for(n=e.child,t=Vs(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Vs(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function fk(n,e,t){switch(e.tag){case 3:nS(e),gc();break;case 5:PA(e);break;case 1:En(e.type)&&np(e);break;case 4:s0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ge(sp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ge(nt,nt.current&1),e.flags|=128,null):t&e.child.childLanes?iS(n,e,t):(Ge(nt,nt.current&1),n=qr(n,e,t),n!==null?n.sibling:null);Ge(nt,nt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return rS(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ge(nt,nt.current),i)break;return null;case 22:case 23:return e.lanes=0,eS(n,e,t)}return qr(n,e,t)}var sS,tv,oS,aS;sS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};tv=function(){};oS=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,vo(Zi.current);var s=null;switch(t){case"input":r=Sm(n,r),i=Sm(n,i),s=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),s=[];break;case"textarea":r=Cm(n,r),i=Cm(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=ep)}Tm(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xe("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};aS=function(n,e,t,i){t!==i&&(e.flags|=4)};function Mc(n,e){if(!qe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Wt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function pk(n,e,t){var i=e.pendingProps;switch(Jy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return En(e.type)&&tp(),Wt(e),null;case 3:return i=e.stateNode,vc(),Ke(_n),Ke(Zt),a0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Xd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ci!==null&&(cv(Ci),Ci=null))),tv(n,e),Wt(e),null;case 5:o0(e);var r=vo(Pu.current);if(t=e.type,n!==null&&e.stateNode!=null)oS(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(z(166));return Wt(e),null}if(n=vo(Zi.current),Xd(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Qi]=e,i[Tu]=s,n=(e.mode&1)!==0,t){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(r=0;r<$c.length;r++)Xe($c[r],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":cw(i,s),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",i);break;case"textarea":hw(i,s),Xe("invalid",i)}Tm(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gd(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gd(i.textContent,a,n),r=["children",""+a]):yu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xe("scroll",i)}switch(t){case"input":jd(i),uw(i,s,!0);break;case"textarea":jd(i),dw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ep)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=FE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Qi]=e,n[Tu]=i,sS(n,e,!1,!1),e.stateNode=n;e:{switch(o=Rm(t,i),t){case"dialog":Xe("cancel",n),Xe("close",n),r=i;break;case"iframe":case"object":case"embed":Xe("load",n),r=i;break;case"video":case"audio":for(r=0;r<$c.length;r++)Xe($c[r],n);r=i;break;case"source":Xe("error",n),r=i;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),r=i;break;case"details":Xe("toggle",n),r=i;break;case"input":cw(n,i),r=Sm(n,i),Xe("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Xe("invalid",n);break;case"textarea":hw(n,i),r=Cm(n,i),Xe("invalid",n);break;default:r=i}Tm(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jE(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NE(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&wu(n,l):typeof l=="number"&&wu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Xe("scroll",n):l!=null&&Oy(n,s,l,o))}switch(t){case"input":jd(n),uw(n,i,!1);break;case"textarea":jd(n),dw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ws(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?ll(n,!!i.multiple,s,!1):i.defaultValue!=null&&ll(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=ep)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(n&&e.stateNode!=null)aS(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(z(166));if(t=vo(Pu.current),vo(Zi.current),Xd(e)){if(i=e.stateNode,t=e.memoizedProps,i[Qi]=e,(s=i.nodeValue!==t)&&(n=Hn,n!==null))switch(n.tag){case 3:Gd(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gd(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Qi]=e,e.stateNode=i}return Wt(e),null;case 13:if(Ke(nt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(qe&&zn!==null&&e.mode&1&&!(e.flags&128))xA(),gc(),e.flags|=98560,s=!1;else if(s=Xd(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Qi]=e}else gc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else Ci!==null&&(cv(Ci),Ci=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||nt.current&1?Ct===0&&(Ct=3):w0())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return vc(),tv(n,e),n===null&&Cu(e.stateNode.containerInfo),Wt(e),null;case 10:return n0(e.type._context),Wt(e),null;case 17:return En(e.type)&&tp(),Wt(e),null;case 19:if(Ke(nt),s=e.memoizedState,s===null)return Wt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Mc(s,!1);else{if(Ct!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=lp(n),o!==null){for(e.flags|=128,Mc(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ge(nt,nt.current&1|2),e.child}n=n.sibling}s.tail!==null&&ht()>wc&&(e.flags|=128,i=!0,Mc(s,!1),e.lanes=4194304)}else{if(!i)if(n=lp(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Mc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qe)return Wt(e),null}else 2*ht()-s.renderingStartTime>wc&&t!==1073741824&&(e.flags|=128,i=!0,Mc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,t=nt.current,Ge(nt,i?t&1|2:t&1),e):(Wt(e),null);case 22:case 23:return y0(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Nn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function gk(n,e){switch(Jy(e),e.tag){case 1:return En(e.type)&&tp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return vc(),Ke(_n),Ke(Zt),a0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return o0(e),null;case 13:if(Ke(nt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(z(340));gc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ke(nt),null;case 4:return vc(),null;case 10:return n0(e.type._context),null;case 22:case 23:return y0(),null;case 24:return null;default:return null}}var qd=!1,qt=!1,mk=typeof WeakSet=="function"?WeakSet:Set,X=null;function rl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){lt(n,e,i)}else t.current=null}function nv(n,e,t){try{t()}catch(i){lt(n,e,i)}}var t_=!1;function vk(n,e){if(zm=Qf,n=dA(),qy(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Hm={focusedElem:n,selectionRange:t},Qf=!1,X=e;X!==null;)if(e=X,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,X=n;else for(;X!==null;){e=X;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,S=g.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:ci(e.type,y),S);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(x){lt(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}return g=t_,t_=!1,g}function du(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&nv(e,t,s)}r=r.next}while(r!==i)}}function tg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function iv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function lS(n){var e=n.alternate;e!==null&&(n.alternate=null,lS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Qi],delete e[Tu],delete e[$m],delete e[ZC],delete e[ek])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cS(n){return n.tag===5||n.tag===3||n.tag===4}function n_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ep));else if(i!==4&&(n=n.child,n!==null))for(rv(n,e,t),n=n.sibling;n!==null;)rv(n,e,t),n=n.sibling}function sv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(sv(n,e,t),n=n.sibling;n!==null;)sv(n,e,t),n=n.sibling}var Ht=null,bi=!1;function rs(n,e,t){for(t=t.child;t!==null;)uS(n,e,t),t=t.sibling}function uS(n,e,t){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(Xp,t)}catch{}switch(t.tag){case 5:qt||rl(t,e);case 6:var i=Ht,r=bi;Ht=null,rs(n,e,t),Ht=i,bi=r,Ht!==null&&(bi?(n=Ht,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ht.removeChild(t.stateNode));break;case 18:Ht!==null&&(bi?(n=Ht,t=t.stateNode,n.nodeType===8?Jg(n.parentNode,t):n.nodeType===1&&Jg(n,t),Su(n)):Jg(Ht,t.stateNode));break;case 4:i=Ht,r=bi,Ht=t.stateNode.containerInfo,bi=!0,rs(n,e,t),Ht=i,bi=r;break;case 0:case 11:case 14:case 15:if(!qt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nv(t,e,o),r=r.next}while(r!==i)}rs(n,e,t);break;case 1:if(!qt&&(rl(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){lt(t,e,a)}rs(n,e,t);break;case 21:rs(n,e,t);break;case 22:t.mode&1?(qt=(i=qt)||t.memoizedState!==null,rs(n,e,t),qt=i):rs(n,e,t);break;default:rs(n,e,t)}}function i_(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new mk),e.forEach(function(i){var r=Ck.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ai(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,bi=!1;break e;case 3:Ht=a.stateNode.containerInfo,bi=!0;break e;case 4:Ht=a.stateNode.containerInfo,bi=!0;break e}a=a.return}if(Ht===null)throw Error(z(160));uS(s,o,r),Ht=null,bi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){lt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hS(e,n),e=e.sibling}function hS(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ai(e,n),Mi(n),i&4){try{du(3,n,n.return),tg(3,n)}catch(y){lt(n,n.return,y)}try{du(5,n,n.return)}catch(y){lt(n,n.return,y)}}break;case 1:ai(e,n),Mi(n),i&512&&t!==null&&rl(t,t.return);break;case 5:if(ai(e,n),Mi(n),i&512&&t!==null&&rl(t,t.return),n.flags&32){var r=n.stateNode;try{wu(r,"")}catch(y){lt(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&DE(r,s),Rm(a,o);var u=Rm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?jE(r,d):h==="dangerouslySetInnerHTML"?NE(r,d):h==="children"?wu(r,d):Oy(r,h,d,u)}switch(a){case"input":bm(r,s);break;case"textarea":IE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ll(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ll(r,!!s.multiple,s.defaultValue,!0):ll(r,!!s.multiple,s.multiple?[]:"",!1))}r[Tu]=s}catch(y){lt(n,n.return,y)}}break;case 6:if(ai(e,n),Mi(n),i&4){if(n.stateNode===null)throw Error(z(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(y){lt(n,n.return,y)}}break;case 3:if(ai(e,n),Mi(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(y){lt(n,n.return,y)}break;case 4:ai(e,n),Mi(n);break;case 13:ai(e,n),Mi(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(m0=ht())),i&4&&i_(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(qt=(u=qt)||h,ai(e,n),qt=u):ai(e,n),Mi(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(X=n,h=n.child;h!==null;){for(d=X=h;X!==null;){switch(f=X,p=f.child,f.tag){case 0:case 11:case 14:case 15:du(4,f,f.return);break;case 1:rl(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){lt(i,t,y)}}break;case 5:rl(f,f.return);break;case 22:if(f.memoizedState!==null){s_(d);continue}}p!==null?(p.return=f,X=p):s_(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OE("display",o))}catch(y){lt(n,n.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){lt(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ai(e,n),Mi(n),i&4&&i_(n);break;case 21:break;default:ai(e,n),Mi(n)}}function Mi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(cS(t)){var i=t;break e}t=t.return}throw Error(z(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(wu(r,""),i.flags&=-33);var s=n_(n);sv(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=n_(n);rv(n,a,o);break;default:throw Error(z(161))}}catch(l){lt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function yk(n,e,t){X=n,dS(n)}function dS(n,e,t){for(var i=(n.mode&1)!==0;X!==null;){var r=X,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||qd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||qt;a=qd;var u=qt;if(qd=o,(qt=l)&&!u)for(X=r;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?o_(r):l!==null?(l.return=o,X=l):o_(r);for(;s!==null;)X=s,dS(s),s=s.sibling;X=r,qd=a,qt=u}r_(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,X=s):r_(n)}}function r_(n){for(;X!==null;){var e=X;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||tg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qt)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ci(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Uw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Uw(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Su(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}qt||e.flags&512&&iv(e)}catch(f){lt(e,e.return,f)}}if(e===n){X=null;break}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}}function s_(n){for(;X!==null;){var e=X;if(e===n){X=null;break}var t=e.sibling;if(t!==null){t.return=e.return,X=t;break}X=e.return}}function o_(n){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{tg(4,e)}catch(l){lt(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){lt(e,r,l)}}var s=e.return;try{iv(e)}catch(l){lt(e,s,l)}break;case 5:var o=e.return;try{iv(e)}catch(l){lt(e,o,l)}}}catch(l){lt(e,e.return,l)}if(e===n){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var wk=Math.ceil,hp=Zr.ReactCurrentDispatcher,p0=Zr.ReactCurrentOwner,ri=Zr.ReactCurrentBatchConfig,xe=0,Lt=null,mt=null,Bt=0,Nn=0,sl=Qs(0),Ct=0,Iu=null,_a=0,ng=0,g0=0,fu=null,mn=null,m0=0,wc=1/0,cr=null,dp=!1,ov=null,Us=null,Qd=!1,Ns=null,fp=0,pu=0,av=null,mf=-1,vf=0;function an(){return xe&6?ht():mf!==-1?mf:mf=ht()}function $s(n){return n.mode&1?xe&2&&Bt!==0?Bt&-Bt:nk.transition!==null?(vf===0&&(vf=qE()),vf):(n=Me,n!==0||(n=window.event,n=n===void 0?16:iA(n.type)),n):1}function Ti(n,e,t,i){if(50<pu)throw pu=0,av=null,Error(z(185));yd(n,t,i),(!(xe&2)||n!==Lt)&&(n===Lt&&(!(xe&2)&&(ng|=t),Ct===4&&ds(n,Bt)),An(n,i),t===1&&xe===0&&!(e.mode&1)&&(wc=ht()+500,Jp&&Js()))}function An(n,e){var t=n.callbackNode;nC(n,e);var i=qf(n,n===Lt?Bt:0);if(i===0)t!==null&&gw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&gw(t),e===1)n.tag===0?tk(a_.bind(null,n)):AA(a_.bind(null,n)),QC(function(){!(xe&6)&&Js()}),t=null;else{switch(QE(i)){case 1:t=Uy;break;case 4:t=KE;break;case 16:t=Yf;break;case 536870912:t=YE;break;default:t=Yf}t=_S(t,fS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function fS(n,e){if(mf=-1,vf=0,xe&6)throw Error(z(327));var t=n.callbackNode;if(fl()&&n.callbackNode!==t)return null;var i=qf(n,n===Lt?Bt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=pp(n,i);else{e=i;var r=xe;xe|=2;var s=gS();(Lt!==n||Bt!==e)&&(cr=null,wc=ht()+500,ga(n,e));do try{Ak();break}catch(a){pS(n,a)}while(!0);t0(),hp.current=s,xe=r,mt!==null?e=0:(Lt=null,Bt=0,e=Ct)}if(e!==0){if(e===2&&(r=Im(n),r!==0&&(i=r,e=lv(n,r))),e===1)throw t=Iu,ga(n,0),ds(n,i),An(n,ht()),t;if(e===6)ds(n,i);else{if(r=n.current.alternate,!(i&30)&&!_k(r)&&(e=pp(n,i),e===2&&(s=Im(n),s!==0&&(i=s,e=lv(n,s))),e===1))throw t=Iu,ga(n,0),ds(n,i),An(n,ht()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(z(345));case 2:ao(n,mn,cr);break;case 3:if(ds(n,i),(i&130023424)===i&&(e=m0+500-ht(),10<e)){if(qf(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){an(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Um(ao.bind(null,n,mn,cr),e);break}ao(n,mn,cr);break;case 4:if(ds(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-ki(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wk(i/1960))-i,10<i){n.timeoutHandle=Um(ao.bind(null,n,mn,cr),i);break}ao(n,mn,cr);break;case 5:ao(n,mn,cr);break;default:throw Error(z(329))}}}return An(n,ht()),n.callbackNode===t?fS.bind(null,n):null}function lv(n,e){var t=fu;return n.current.memoizedState.isDehydrated&&(ga(n,e).flags|=256),n=pp(n,e),n!==2&&(e=mn,mn=t,e!==null&&cv(e)),n}function cv(n){mn===null?mn=n:mn.push.apply(mn,n)}function _k(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Ri(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(n,e){for(e&=~g0,e&=~ng,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ki(e),i=1<<t;n[t]=-1,e&=~i}}function a_(n){if(xe&6)throw Error(z(327));fl();var e=qf(n,0);if(!(e&1))return An(n,ht()),null;var t=pp(n,e);if(n.tag!==0&&t===2){var i=Im(n);i!==0&&(e=i,t=lv(n,i))}if(t===1)throw t=Iu,ga(n,0),ds(n,e),An(n,ht()),t;if(t===6)throw Error(z(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ao(n,mn,cr),An(n,ht()),null}function v0(n,e){var t=xe;xe|=1;try{return n(e)}finally{xe=t,xe===0&&(wc=ht()+500,Jp&&Js())}}function Ea(n){Ns!==null&&Ns.tag===0&&!(xe&6)&&fl();var e=xe;xe|=1;var t=ri.transition,i=Me;try{if(ri.transition=null,Me=1,n)return n()}finally{Me=i,ri.transition=t,xe=e,!(xe&6)&&Js()}}function y0(){Nn=sl.current,Ke(sl)}function ga(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,qC(t)),mt!==null)for(t=mt.return;t!==null;){var i=t;switch(Jy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&tp();break;case 3:vc(),Ke(_n),Ke(Zt),a0();break;case 5:o0(i);break;case 4:vc();break;case 13:Ke(nt);break;case 19:Ke(nt);break;case 10:n0(i.type._context);break;case 22:case 23:y0()}t=t.return}if(Lt=n,mt=n=Vs(n.current,null),Bt=Nn=e,Ct=0,Iu=null,g0=ng=_a=0,mn=fu=null,mo!==null){for(e=0;e<mo.length;e++)if(t=mo[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}mo=null}return n}function pS(n,e){do{var t=mt;try{if(t0(),ff.current=up,cp){for(var i=it.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}cp=!1}if(wa=0,Pt=bt=it=null,hu=!1,Lu=0,p0.current=null,t===null||t.return===null){Ct=1,Iu=e,mt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Kw(o);if(p!==null){p.flags&=-257,Yw(p,o,a,s,e),p.mode&1&&Xw(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){Xw(s,u,e),w0();break e}l=Error(z(426))}}else if(qe&&a.mode&1){var S=Kw(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Yw(S,o,a,s,e),Zy(yc(l,a));break e}}s=l=yc(l,a),Ct!==4&&(Ct=2),fu===null?fu=[s]:fu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=QA(s,l,e);Bw(s,m);break e;case 1:a=l;var v=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Us===null||!Us.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=JA(s,a,e);Bw(s,x);break e}}s=s.return}while(s!==null)}vS(t)}catch(k){e=k,mt===t&&t!==null&&(mt=t=t.return);continue}break}while(!0)}function gS(){var n=hp.current;return hp.current=up,n===null?up:n}function w0(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Lt===null||!(_a&268435455)&&!(ng&268435455)||ds(Lt,Bt)}function pp(n,e){var t=xe;xe|=2;var i=gS();(Lt!==n||Bt!==e)&&(cr=null,ga(n,e));do try{Ek();break}catch(r){pS(n,r)}while(!0);if(t0(),xe=t,hp.current=i,mt!==null)throw Error(z(261));return Lt=null,Bt=0,Ct}function Ek(){for(;mt!==null;)mS(mt)}function Ak(){for(;mt!==null&&!Xx();)mS(mt)}function mS(n){var e=wS(n.alternate,n,Nn);n.memoizedProps=n.pendingProps,e===null?vS(n):mt=e,p0.current=null}function vS(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=gk(t,e),t!==null){t.flags&=32767,mt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,mt=null;return}}else if(t=pk(t,e,Nn),t!==null){mt=t;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=n}while(e!==null);Ct===0&&(Ct=5)}function ao(n,e,t){var i=Me,r=ri.transition;try{ri.transition=null,Me=1,Sk(n,e,t,i)}finally{ri.transition=r,Me=i}return null}function Sk(n,e,t,i){do fl();while(Ns!==null);if(xe&6)throw Error(z(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(z(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(iC(n,s),n===Lt&&(mt=Lt=null,Bt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qd||(Qd=!0,_S(Yf,function(){return fl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ri.transition,ri.transition=null;var o=Me;Me=1;var a=xe;xe|=4,p0.current=null,vk(n,t),hS(t,n),$C(Hm),Qf=!!zm,Hm=zm=null,n.current=t,yk(t),Kx(),xe=a,Me=o,ri.transition=s}else n.current=t;if(Qd&&(Qd=!1,Ns=n,fp=r),s=n.pendingLanes,s===0&&(Us=null),Qx(t.stateNode),An(n,ht()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(dp)throw dp=!1,n=ov,ov=null,n;return fp&1&&n.tag!==0&&fl(),s=n.pendingLanes,s&1?n===av?pu++:(pu=0,av=n):pu=0,Js(),null}function fl(){if(Ns!==null){var n=QE(fp),e=ri.transition,t=Me;try{if(ri.transition=null,Me=16>n?16:n,Ns===null)var i=!1;else{if(n=Ns,Ns=null,fp=0,xe&6)throw Error(z(331));var r=xe;for(xe|=4,X=n.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:du(8,h,s)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var f=h.sibling,p=h.return;if(lS(h),h===u){X=null;break}if(f!==null){f.return=p,X=f;break}X=p}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:du(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,X=m;break e}X=s.return}}var v=n.current;for(X=v;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tg(9,a)}}catch(k){lt(a,a.return,k)}if(a===o){X=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,X=x;break e}X=a.return}}if(xe=r,Js(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(Xp,n)}catch{}i=!0}return i}finally{Me=t,ri.transition=e}}return!1}function l_(n,e,t){e=yc(t,e),e=QA(n,e,1),n=Bs(n,e,1),e=an(),n!==null&&(yd(n,1,e),An(n,e))}function lt(n,e,t){if(n.tag===3)l_(n,n,t);else for(;e!==null;){if(e.tag===3){l_(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Us===null||!Us.has(i))){n=yc(t,n),n=JA(e,n,1),e=Bs(e,n,1),n=an(),e!==null&&(yd(e,1,n),An(e,n));break}}e=e.return}}function bk(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=an(),n.pingedLanes|=n.suspendedLanes&t,Lt===n&&(Bt&t)===t&&(Ct===4||Ct===3&&(Bt&130023424)===Bt&&500>ht()-m0?ga(n,0):g0|=t),An(n,e)}function yS(n,e){e===0&&(n.mode&1?(e=Bd,Bd<<=1,!(Bd&130023424)&&(Bd=4194304)):e=1);var t=an();n=Yr(n,e),n!==null&&(yd(n,e,t),An(n,t))}function xk(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),yS(n,t)}function Ck(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(z(314))}i!==null&&i.delete(e),yS(n,t)}var wS;wS=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||_n.current)vn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return vn=!1,fk(n,e,t);vn=!!(n.flags&131072)}else vn=!1,qe&&e.flags&1048576&&SA(e,rp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;gf(n,e),n=e.pendingProps;var r=pc(e,Zt.current);dl(e,t),r=c0(null,e,i,n,r,t);var s=u0();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(i)?(s=!0,np(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r0(e),r.updater=eg,e.stateNode=r,r._reactInternals=e,Ym(e,i,n,t),e=Jm(null,e,i,!0,s,t)):(e.tag=0,qe&&s&&Qy(e),sn(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(gf(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Tk(i),n=ci(i,n),r){case 0:e=Qm(null,e,i,n,t);break e;case 1:e=Jw(null,e,i,n,t);break e;case 11:e=qw(null,e,i,n,t);break e;case 14:e=Qw(null,e,i,ci(i.type,n),t);break e}throw Error(z(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),Qm(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),Jw(n,e,i,r,t);case 3:e:{if(nS(e),n===null)throw Error(z(387));i=e.pendingProps,s=e.memoizedState,r=s.element,RA(n,e),ap(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=yc(Error(z(423)),e),e=Zw(n,e,i,t,r);break e}else if(i!==r){r=yc(Error(z(424)),e),e=Zw(n,e,i,t,r);break e}else for(zn=Hs(e.stateNode.containerInfo.firstChild),Hn=e,qe=!0,Ci=null,t=kA(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(gc(),i===r){e=qr(n,e,t);break e}sn(n,e,i,t)}e=e.child}return e;case 5:return PA(e),n===null&&Gm(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,Bm(i,r)?o=null:s!==null&&Bm(i,s)&&(e.flags|=32),tS(n,e),sn(n,e,o,t),e.child;case 6:return n===null&&Gm(e),null;case 13:return iS(n,e,t);case 4:return s0(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=mc(e,null,i,t):sn(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),qw(n,e,i,r,t);case 7:return sn(n,e,e.pendingProps,t),e.child;case 8:return sn(n,e,e.pendingProps.children,t),e.child;case 12:return sn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ge(sp,i._currentValue),i._currentValue=o,s!==null)if(Ri(s.value,o)){if(s.children===r.children&&!_n.current){e=qr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Br(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Xm(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Xm(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,dl(e,t),r=si(r),i=i(r),e.flags|=1,sn(n,e,i,t),e.child;case 14:return i=e.type,r=ci(i,e.pendingProps),r=ci(i.type,r),Qw(n,e,i,r,t);case 15:return ZA(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ci(i,r),gf(n,e),e.tag=1,En(i)?(n=!0,np(e)):n=!1,dl(e,t),qA(e,i,r),Ym(e,i,r,t),Jm(null,e,i,!0,n,t);case 19:return rS(n,e,t);case 22:return eS(n,e,t)}throw Error(z(156,e.tag))};function _S(n,e){return XE(n,e)}function kk(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(n,e,t,i){return new kk(n,e,t,i)}function _0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Tk(n){if(typeof n=="function")return _0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===zy)return 11;if(n===Hy)return 14}return 2}function Vs(n,e){var t=n.alternate;return t===null?(t=ii(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function yf(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")_0(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ya:return ma(t.children,r,s,e);case jy:o=8,r|=8;break;case wm:return n=ii(12,t,e,r|2),n.elementType=wm,n.lanes=s,n;case _m:return n=ii(13,t,e,r),n.elementType=_m,n.lanes=s,n;case Em:return n=ii(19,t,e,r),n.elementType=Em,n.lanes=s,n;case PE:return ig(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case TE:o=10;break e;case RE:o=9;break e;case zy:o=11;break e;case Hy:o=14;break e;case cs:o=16,i=null;break e}throw Error(z(130,n==null?n:typeof n,""))}return e=ii(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ma(n,e,t,i){return n=ii(7,n,i,e),n.lanes=t,n}function ig(n,e,t,i){return n=ii(22,n,i,e),n.elementType=PE,n.lanes=t,n.stateNode={isHidden:!1},n}function om(n,e,t){return n=ii(6,n,null,e),n.lanes=t,n}function am(n,e,t){return e=ii(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Rk(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bg(0),this.expirationTimes=Bg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function E0(n,e,t,i,r,s,o,a,l){return n=new Rk(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ii(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},r0(s),n}function Pk(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function ES(n){if(!n)return Gs;n=n._reactInternals;e:{if(La(n)!==n||n.tag!==1)throw Error(z(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(n.tag===1){var t=n.type;if(En(t))return EA(n,t,e)}return e}function AS(n,e,t,i,r,s,o,a,l){return n=E0(t,i,!0,n,r,s,o,a,l),n.context=ES(null),t=n.current,i=an(),r=$s(t),s=Br(i,r),s.callback=e??null,Bs(t,s,r),n.current.lanes=r,yd(n,r,i),An(n,i),n}function rg(n,e,t,i){var r=e.current,s=an(),o=$s(r);return t=ES(t),e.context===null?e.context=t:e.pendingContext=t,e=Br(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Bs(r,e,o),n!==null&&(Ti(n,r,o,s),df(n,r,o)),o}function gp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function c_(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function A0(n,e){c_(n,e),(n=n.alternate)&&c_(n,e)}function Lk(){return null}var SS=typeof reportError=="function"?reportError:function(n){console.error(n)};function S0(n){this._internalRoot=n}sg.prototype.render=S0.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(z(409));rg(n,e,null,null)};sg.prototype.unmount=S0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ea(function(){rg(null,n,null,null)}),e[Kr]=null}};function sg(n){this._internalRoot=n}sg.prototype.unstable_scheduleHydration=function(n){if(n){var e=eA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hs.length&&e!==0&&e<hs[t].priority;t++);hs.splice(t,0,n),t===0&&nA(n)}};function b0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function og(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function u_(){}function Mk(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=gp(o);s.call(u)}}var o=AS(e,i,n,0,null,!1,!1,"",u_);return n._reactRootContainer=o,n[Kr]=o.current,Cu(n.nodeType===8?n.parentNode:n),Ea(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=gp(l);a.call(u)}}var l=E0(n,0,!1,null,null,!1,!1,"",u_);return n._reactRootContainer=l,n[Kr]=l.current,Cu(n.nodeType===8?n.parentNode:n),Ea(function(){rg(e,l,t,i)}),l}function ag(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=gp(o);a.call(l)}}rg(e,o,n,r)}else o=Mk(t,e,n,r,i);return gp(o)}JE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Uc(e.pendingLanes);t!==0&&($y(e,t|1),An(e,ht()),!(xe&6)&&(wc=ht()+500,Js()))}break;case 13:Ea(function(){var i=Yr(n,1);if(i!==null){var r=an();Ti(i,n,1,r)}}),A0(n,1)}};Vy=function(n){if(n.tag===13){var e=Yr(n,134217728);if(e!==null){var t=an();Ti(e,n,134217728,t)}A0(n,134217728)}};ZE=function(n){if(n.tag===13){var e=$s(n),t=Yr(n,e);if(t!==null){var i=an();Ti(t,n,e,i)}A0(n,e)}};eA=function(){return Me};tA=function(n,e){var t=Me;try{return Me=n,e()}finally{Me=t}};Lm=function(n,e,t){switch(e){case"input":if(bm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Qp(i);if(!r)throw Error(z(90));ME(i),bm(i,r)}}}break;case"textarea":IE(n,t);break;case"select":e=t.value,e!=null&&ll(n,!!t.multiple,e,!1)}};BE=v0;UE=Ea;var Dk={usingClientEntryPoint:!1,Events:[_d,Za,Qp,zE,HE,v0]},Dc={findFiberByHostInstance:go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ik={bundleType:Dc.bundleType,version:Dc.version,rendererPackageName:Dc.rendererPackageName,rendererConfig:Dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WE(n),n===null?null:n.stateNode},findFiberByHostInstance:Dc.findFiberByHostInstance||Lk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{Xp=Jd.inject(Ik),Ji=Jd}catch{}}Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dk;Un.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b0(e))throw Error(z(200));return Pk(n,e,null,t)};Un.createRoot=function(n,e){if(!b0(n))throw Error(z(299));var t=!1,i="",r=SS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=E0(n,1,!1,null,null,t,!1,i,r),n[Kr]=e.current,Cu(n.nodeType===8?n.parentNode:n),new S0(e)};Un.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(z(188)):(n=Object.keys(n).join(","),Error(z(268,n)));return n=WE(e),n=n===null?null:n.stateNode,n};Un.flushSync=function(n){return Ea(n)};Un.hydrate=function(n,e,t){if(!og(e))throw Error(z(200));return ag(null,n,e,!0,t)};Un.hydrateRoot=function(n,e,t){if(!b0(n))throw Error(z(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=SS;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=AS(e,null,n,1,t??null,r,!1,s,o),n[Kr]=e.current,Cu(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new sg(e)};Un.render=function(n,e,t){if(!og(e))throw Error(z(200));return ag(null,n,e,!1,t)};Un.unmountComponentAtNode=function(n){if(!og(n))throw Error(z(40));return n._reactRootContainer?(Ea(function(){ag(null,null,n,!1,function(){n._reactRootContainer=null,n[Kr]=null})}),!0):!1};Un.unstable_batchedUpdates=v0;Un.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!og(t))throw Error(z(200));if(n==null||n._reactInternals===void 0)throw Error(z(38));return ag(n,e,t,!1,i)};Un.version="18.3.1-next-f1338f8080-20240426";function bS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bS)}catch(n){console.error(n)}}bS(),bE.exports=Un;var x0=bE.exports;const Fk=Py(x0),Nk=hE({__proto__:null,default:Fk},[x0]);var h_=x0;vm.createRoot=h_.createRoot,vm.hydrateRoot=h_.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tt(){return tt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tt.apply(this,arguments)}var gt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(gt||(gt={}));const d_="popstate";function Ok(n){n===void 0&&(n={});function e(r,s){let{pathname:o="/",search:a="",hash:l=""}=es(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Fu("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=r.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Sa(s))}function i(r,s){Aa(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return zk(e,t,i,n)}function pe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Aa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jk(){return Math.random().toString(36).substr(2,8)}function f_(n,e){return{usr:n.state,key:n.key,idx:e}}function Fu(n,e,t,i){return t===void 0&&(t=null),tt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?es(e):e,{state:t,key:e&&e.key||i||jk()})}function Sa(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function es(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function zk(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=gt.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(tt({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=gt.Pop;let S=h(),m=S==null?null:S-u;u=S,l&&l({action:a,location:y.location,delta:m})}function f(S,m){a=gt.Push;let v=Fu(y.location,S,m);t&&t(v,S),u=h()+1;let A=f_(v,u),x=y.createHref(v);try{o.pushState(A,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(x)}s&&l&&l({action:a,location:y.location,delta:1})}function p(S,m){a=gt.Replace;let v=Fu(y.location,S,m);t&&t(v,S),u=h();let A=f_(v,u),x=y.createHref(v);o.replaceState(A,"",x),s&&l&&l({action:a,location:y.location,delta:0})}function g(S){let m=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof S=="string"?S:Sa(S);return v=v.replace(/ $/,"%20"),pe(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let y={get action(){return a},get location(){return n(r,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(d_,d),l=S,()=>{r.removeEventListener(d_,d),l=null}},createHref(S){return e(r,S)},createURL:g,encodeLocation(S){let m=g(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(S){return o.go(S)}};return y}var Ne;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ne||(Ne={}));const Hk=new Set(["lazy","caseSensitive","path","id","index","children"]);function Bk(n){return n.index===!0}function Nu(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let o=[...t,String(s)],a=typeof r.id=="string"?r.id:o.join("-");if(pe(r.index!==!0||!r.children,"Cannot specify children on an index route"),pe(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Bk(r)){let l=tt({},r,e(r),{id:a});return i[a]=l,l}else{let l=tt({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=Nu(r.children,e,o,i)),l}})}function ho(n,e,t){return t===void 0&&(t="/"),wf(n,e,t,!1)}function wf(n,e,t,i){let r=typeof e=="string"?es(e):e,s=bc(r.pathname||"/",t);if(s==null)return null;let o=xS(n);$k(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=eT(s);a=Jk(o[l],u,i)}return a}function Uk(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function xS(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(pe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Ur([i,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(pe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xS(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:qk(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of CS(s.path))r(s,o,l)}),e}function CS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=CS(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function $k(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Qk(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Vk=/^:[\w-]+$/,Wk=3,Gk=2,Xk=1,Kk=10,Yk=-2,p_=n=>n==="*";function qk(n,e){let t=n.split("/"),i=t.length;return t.some(p_)&&(i+=Yk),e&&(i+=Gk),t.filter(r=>!p_(r)).reduce((r,s)=>r+(Vk.test(s)?Wk:s===""?Xk:Kk),i)}function Qk(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function Jk(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=g_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d&&u&&t&&!i[i.length-1].route.index&&(d=g_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Ur([s,d.pathname]),pathnameBase:iT(Ur([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ur([s,d.pathnameBase]))}return o}function g_(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Zk(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[d];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function Zk(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Aa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function eT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Aa(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function bc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function tT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?es(n):n;return{pathname:t?t.startsWith("/")?t:nT(t,e):e,search:rT(i),hash:sT(r)}}function nT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function lm(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function C0(n,e){let t=kS(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function k0(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=es(n):(r=tt({},n),pe(!r.pathname||!r.pathname.includes("?"),lm("?","pathname","search",r)),pe(!r.pathname||!r.pathname.includes("#"),lm("#","pathname","hash",r)),pe(!r.search||!r.search.includes("#"),lm("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=tT(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Ur=n=>n.join("/").replace(/\/\/+/g,"/"),iT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class mp{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function lg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const TS=["post","put","patch","delete"],oT=new Set(TS),aT=["get",...TS],lT=new Set(aT),cT=new Set([301,302,303,307,308]),uT=new Set([307,308]),cm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ic={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},T0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dT=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),RS="remix-router-transitions";function fT(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;pe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let C=n.detectErrorBoundary;r=T=>({hasErrorBoundary:C(T)})}else r=dT;let s={},o=Nu(n.routes,r,void 0,s),a,l=n.basename||"/",u=n.unstable_dataStrategy||yT,h=n.unstable_patchRoutesOnNavigation,d=tt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),f=null,p=new Set,g=1e3,y=new Set,S=null,m=null,v=null,A=n.hydrationData!=null,x=ho(o,n.history.location,l),k=null;if(x==null&&!h){let C=rn(404,{pathname:n.history.location.pathname}),{matches:T,route:M}=x_(o);x=T,k={[M.id]:C}}x&&!n.hydrationData&&Ld(x,o,n.history.location.pathname).active&&(x=null);let R;if(x)if(x.some(C=>C.route.lazy))R=!1;else if(!x.some(C=>C.route.loader))R=!0;else if(d.v7_partialHydration){let C=n.hydrationData?n.hydrationData.loaderData:null,T=n.hydrationData?n.hydrationData.errors:null,M=j=>j.route.loader?typeof j.route.loader=="function"&&j.route.loader.hydrate===!0?!1:C&&C[j.route.id]!==void 0||T&&T[j.route.id]!==void 0:!0;if(T){let j=x.findIndex(G=>T[G.route.id]!==void 0);R=x.slice(0,j+1).every(M)}else R=x.every(M)}else R=n.hydrationData!=null;else if(R=!1,x=[],d.v7_partialHydration){let C=Ld(null,o,n.history.location.pathname);C.active&&C.matches&&(x=C.matches)}let L,b={historyAction:n.history.action,location:n.history.location,matches:x,initialized:R,navigation:cm,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||k,fetchers:new Map,blockers:new Map},I=gt.Pop,F=!1,O,J=!1,Y=new Map,W=null,se=!1,ae=!1,U=[],N=new Set,B=new Map,Z=0,we=-1,ne=new Map,de=new Set,ze=new Map,Qe=new Map,Se=new Set,fe=new Map,st=new Map,Vn=new Map,Ve=!1;function eo(){if(f=n.history.listen(C=>{let{action:T,location:M,delta:j}=C;if(Ve){Ve=!1;return}Aa(st.size===0||j!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=Q0({currentLocation:b.location,nextLocation:M,historyAction:T});if(G&&j!=null){Ve=!0,n.history.go(j*-1),Rd(G,{state:"blocked",location:M,proceed(){Rd(G,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),n.history.go(j)},reset(){let q=new Map(b.blockers);q.set(G,Ic),_e({blockers:q})}});return}return ir(T,M)}),t){LT(e,Y);let C=()=>MT(e,Y);e.addEventListener("pagehide",C),W=()=>e.removeEventListener("pagehide",C)}return b.initialized||ir(gt.Pop,b.location,{initialHydration:!0}),L}function to(){f&&f(),W&&W(),p.clear(),O&&O.abort(),b.fetchers.forEach((C,T)=>Td(T)),b.blockers.forEach((C,T)=>q0(T))}function De(C){return p.add(C),()=>p.delete(C)}function _e(C,T){T===void 0&&(T={}),b=tt({},b,C);let M=[],j=[];d.v7_fetcherPersist&&b.fetchers.forEach((G,q)=>{G.state==="idle"&&(Se.has(q)?j.push(q):M.push(q))}),[...p].forEach(G=>G(b,{deletedFetchers:j,unstable_viewTransitionOpts:T.viewTransitionOpts,unstable_flushSync:T.flushSync===!0})),d.v7_fetcherPersist&&(M.forEach(G=>b.fetchers.delete(G)),j.forEach(G=>Td(G)))}function Je(C,T,M){var j,G;let{flushSync:q}=M===void 0?{}:M,ie=b.actionData!=null&&b.navigation.formMethod!=null&&xi(b.navigation.formMethod)&&b.navigation.state==="loading"&&((j=C.state)==null?void 0:j._isRedirect)!==!0,H;T.actionData?Object.keys(T.actionData).length>0?H=T.actionData:H=null:ie?H=b.actionData:H=null;let ce=T.loaderData?S_(b.loaderData,T.loaderData,T.matches||[],T.errors):b.loaderData,te=b.blockers;te.size>0&&(te=new Map(te),te.forEach((Re,He)=>te.set(He,Ic)));let ue=F===!0||b.navigation.formMethod!=null&&xi(b.navigation.formMethod)&&((G=C.state)==null?void 0:G._isRedirect)!==!0;a&&(o=a,a=void 0),se||I===gt.Pop||(I===gt.Push?n.history.push(C,C.state):I===gt.Replace&&n.history.replace(C,C.state));let Ie;if(I===gt.Pop){let Re=Y.get(b.location.pathname);Re&&Re.has(C.pathname)?Ie={currentLocation:b.location,nextLocation:C}:Y.has(C.pathname)&&(Ie={currentLocation:C,nextLocation:b.location})}else if(J){let Re=Y.get(b.location.pathname);Re?Re.add(C.pathname):(Re=new Set([C.pathname]),Y.set(b.location.pathname,Re)),Ie={currentLocation:b.location,nextLocation:C}}_e(tt({},T,{actionData:H,loaderData:ce,historyAction:I,location:C,initialized:!0,navigation:cm,revalidation:"idle",restoreScrollPosition:Z0(C,T.matches||b.matches),preventScrollReset:ue,blockers:te}),{viewTransitionOpts:Ie,flushSync:q===!0}),I=gt.Pop,F=!1,J=!1,se=!1,ae=!1,U=[]}async function ct(C,T){if(typeof C=="number"){n.history.go(C);return}let M=uv(b.location,b.matches,l,d.v7_prependBasename,C,d.v7_relativeSplatPath,T==null?void 0:T.fromRouteId,T==null?void 0:T.relative),{path:j,submission:G,error:q}=m_(d.v7_normalizeFormMethod,!1,M,T),ie=b.location,H=Fu(b.location,j,T&&T.state);H=tt({},H,n.history.encodeLocation(H));let ce=T&&T.replace!=null?T.replace:void 0,te=gt.Push;ce===!0?te=gt.Replace:ce===!1||G!=null&&xi(G.formMethod)&&G.formAction===b.location.pathname+b.location.search&&(te=gt.Replace);let ue=T&&"preventScrollReset"in T?T.preventScrollReset===!0:void 0,Ie=(T&&T.unstable_flushSync)===!0,Re=Q0({currentLocation:ie,nextLocation:H,historyAction:te});if(Re){Rd(Re,{state:"blocked",location:H,proceed(){Rd(Re,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),ct(C,T)},reset(){let He=new Map(b.blockers);He.set(Re,Ic),_e({blockers:He})}});return}return await ir(te,H,{submission:G,pendingError:q,preventScrollReset:ue,replace:T&&T.replace,enableViewTransition:T&&T.unstable_viewTransition,flushSync:Ie})}function Pi(){if(ts(),_e({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){ir(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}ir(I||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation})}}async function ir(C,T,M){O&&O.abort(),O=null,I=C,se=(M&&M.startUninterruptedRevalidation)===!0,ix(b.location,b.matches),F=(M&&M.preventScrollReset)===!0,J=(M&&M.enableViewTransition)===!0;let j=a||o,G=M&&M.overrideNavigation,q=ho(j,T,l),ie=(M&&M.flushSync)===!0,H=Ld(q,j,T.pathname);if(H.active&&H.matches&&(q=H.matches),!q){let{error:Te,notFoundMatches:Mt,route:ft}=Dg(T.pathname);Je(T,{matches:Mt,loaderData:{},errors:{[ft.id]:Te}},{flushSync:ie});return}if(b.initialized&&!ae&&bT(b.location,T)&&!(M&&M.submission&&xi(M.submission.formMethod))){Je(T,{matches:q},{flushSync:ie});return}O=new AbortController;let ce=Ba(n.history,T,O.signal,M&&M.submission),te;if(M&&M.pendingError)te=[ol(q).route.id,{type:Ne.error,error:M.pendingError}];else if(M&&M.submission&&xi(M.submission.formMethod)){let Te=await kg(ce,T,M.submission,q,H.active,{replace:M.replace,flushSync:ie});if(Te.shortCircuited)return;if(Te.pendingActionResult){let[Mt,ft]=Te.pendingActionResult;if(On(ft)&&lg(ft.error)&&ft.error.status===404){O=null,Je(T,{matches:Te.matches,loaderData:{},errors:{[Mt]:ft.error}});return}}q=Te.matches||q,te=Te.pendingActionResult,G=um(T,M.submission),ie=!1,H.active=!1,ce=Ba(n.history,ce.url,ce.signal)}let{shortCircuited:ue,matches:Ie,loaderData:Re,errors:He}=await Tg(ce,T,q,H.active,G,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,ie,te);ue||(O=null,Je(T,tt({matches:Ie||q},b_(te),{loaderData:Re,errors:He})))}async function kg(C,T,M,j,G,q){q===void 0&&(q={}),ts();let ie=RT(T,M);if(_e({navigation:ie},{flushSync:q.flushSync===!0}),G){let te=await Md(j,T.pathname,C.signal);if(te.type==="aborted")return{shortCircuited:!0};if(te.type==="error"){let{boundaryId:ue,error:Ie}=Pd(T.pathname,te);return{matches:te.partialMatches,pendingActionResult:[ue,{type:Ne.error,error:Ie}]}}else if(te.matches)j=te.matches;else{let{notFoundMatches:ue,error:Ie,route:Re}=Dg(T.pathname);return{matches:ue,pendingActionResult:[Re.id,{type:Ne.error,error:Ie}]}}}let H,ce=Vc(j,T);if(!ce.route.action&&!ce.route.lazy)H={type:Ne.error,error:rn(405,{method:C.method,pathname:T.pathname,routeId:ce.route.id})};else if(H=(await Wn("action",C,[ce],j))[0],C.signal.aborted)return{shortCircuited:!0};if(wo(H)){let te;return q&&q.replace!=null?te=q.replace:te=__(H.response.headers.get("Location"),new URL(C.url),l)===b.location.pathname+b.location.search,await io(C,H,{submission:M,replace:te}),{shortCircuited:!0}}if(yo(H))throw rn(400,{type:"defer-action"});if(On(H)){let te=ol(j,ce.route.id);return(q&&q.replace)!==!0&&(I=gt.Push),{matches:j,pendingActionResult:[te.route.id,H]}}return{matches:j,pendingActionResult:[ce.route.id,H]}}async function Tg(C,T,M,j,G,q,ie,H,ce,te,ue){let Ie=G||um(T,q),Re=q||ie||R_(Ie),He=!se&&(!d.v7_partialHydration||!ce);if(j){if(He){let ot=no(ue);_e(tt({navigation:Ie},ot!==void 0?{actionData:ot}:{}),{flushSync:te})}let he=await Md(M,T.pathname,C.signal);if(he.type==="aborted")return{shortCircuited:!0};if(he.type==="error"){let{boundaryId:ot,error:bn}=Pd(T.pathname,he);return{matches:he.partialMatches,loaderData:{},errors:{[ot]:bn}}}else if(he.matches)M=he.matches;else{let{error:ot,notFoundMatches:bn,route:Ye}=Dg(T.pathname);return{matches:bn,loaderData:{},errors:{[Ye.id]:ot}}}}let Te=a||o,[Mt,ft]=v_(n.history,b,M,Re,T,d.v7_partialHydration&&ce===!0,d.v7_skipActionErrorRevalidation,ae,U,N,Se,ze,de,Te,l,ue);if(Ig(he=>!(M&&M.some(ot=>ot.route.id===he))||Mt&&Mt.some(ot=>ot.route.id===he)),we=++Z,Mt.length===0&&ft.length===0){let he=K0();return Je(T,tt({matches:M,loaderData:{},errors:ue&&On(ue[1])?{[ue[0]]:ue[1].error}:null},b_(ue),he?{fetchers:new Map(b.fetchers)}:{}),{flushSync:te}),{shortCircuited:!0}}if(He){let he={};if(!j){he.navigation=Ie;let ot=no(ue);ot!==void 0&&(he.actionData=ot)}ft.length>0&&(he.fetchers=Rg(ft)),_e(he,{flushSync:te})}ft.forEach(he=>{B.has(he.key)&&ns(he.key),he.controller&&B.set(he.key,he.controller)});let xc=()=>ft.forEach(he=>ns(he.key));O&&O.signal.addEventListener("abort",xc);let{loaderResults:is,fetcherResults:Oa}=await ro(b.matches,M,Mt,ft,C);if(C.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",xc),ft.forEach(he=>B.delete(he.key));let ja=C_([...is,...Oa]);if(ja){if(ja.idx>=Mt.length){let he=ft[ja.idx-Mt.length].key;de.add(he)}return await io(C,ja.result,{replace:H}),{shortCircuited:!0}}let{loaderData:za,errors:Li}=A_(b,M,Mt,is,ue,ft,Oa,fe);fe.forEach((he,ot)=>{he.subscribe(bn=>{(bn||he.done)&&fe.delete(ot)})}),d.v7_partialHydration&&ce&&b.errors&&Object.entries(b.errors).filter(he=>{let[ot]=he;return!Mt.some(bn=>bn.route.id===ot)}).forEach(he=>{let[ot,bn]=he;Li=Object.assign(Li||{},{[ot]:bn})});let Dd=K0(),Id=Y0(we),Fd=Dd||Id||ft.length>0;return tt({matches:M,loaderData:za,errors:Li},Fd?{fetchers:new Map(b.fetchers)}:{})}function no(C){if(C&&!On(C[1]))return{[C[0]]:C[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Rg(C){return C.forEach(T=>{let M=b.fetchers.get(T.key),j=Fc(void 0,M?M.data:void 0);b.fetchers.set(T.key,j)}),new Map(b.fetchers)}function Pg(C,T,M,j){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");B.has(C)&&ns(C);let G=(j&&j.unstable_flushSync)===!0,q=a||o,ie=uv(b.location,b.matches,l,d.v7_prependBasename,M,d.v7_relativeSplatPath,T,j==null?void 0:j.relative),H=ho(q,ie,l),ce=Ld(H,q,ie);if(ce.active&&ce.matches&&(H=ce.matches),!H){rr(C,T,rn(404,{pathname:ie}),{flushSync:G});return}let{path:te,submission:ue,error:Ie}=m_(d.v7_normalizeFormMethod,!0,ie,j);if(Ie){rr(C,T,Ie,{flushSync:G});return}let Re=Vc(H,te);if(F=(j&&j.preventScrollReset)===!0,ue&&xi(ue.formMethod)){Lg(C,T,te,Re,H,ce.active,G,ue);return}ze.set(C,{routeId:T,path:te}),Mg(C,T,te,Re,H,ce.active,G,ue)}async function Lg(C,T,M,j,G,q,ie,H){ts(),ze.delete(C);function ce(Ye){if(!Ye.route.action&&!Ye.route.lazy){let sr=rn(405,{method:H.formMethod,pathname:M,routeId:T});return rr(C,T,sr,{flushSync:ie}),!0}return!1}if(!q&&ce(j))return;let te=b.fetchers.get(C);Gn(C,PT(H,te),{flushSync:ie});let ue=new AbortController,Ie=Ba(n.history,M,ue.signal,H);if(q){let Ye=await Md(G,M,Ie.signal);if(Ye.type==="aborted")return;if(Ye.type==="error"){let{error:sr}=Pd(M,Ye);rr(C,T,sr,{flushSync:ie});return}else if(Ye.matches){if(G=Ye.matches,j=Vc(G,M),ce(j))return}else{rr(C,T,rn(404,{pathname:M}),{flushSync:ie});return}}B.set(C,ue);let Re=Z,Te=(await Wn("action",Ie,[j],G))[0];if(Ie.signal.aborted){B.get(C)===ue&&B.delete(C);return}if(d.v7_fetcherPersist&&Se.has(C)){if(wo(Te)||On(Te)){Gn(C,ss(void 0));return}}else{if(wo(Te))if(B.delete(C),we>Re){Gn(C,ss(void 0));return}else return de.add(C),Gn(C,Fc(H)),io(Ie,Te,{fetcherSubmission:H});if(On(Te)){rr(C,T,Te.error);return}}if(yo(Te))throw rn(400,{type:"defer-action"});let Mt=b.navigation.location||b.location,ft=Ba(n.history,Mt,ue.signal),xc=a||o,is=b.navigation.state!=="idle"?ho(xc,b.navigation.location,l):b.matches;pe(is,"Didn't find any matches after fetcher action");let Oa=++Z;ne.set(C,Oa);let ja=Fc(H,Te.data);b.fetchers.set(C,ja);let[za,Li]=v_(n.history,b,is,H,Mt,!1,d.v7_skipActionErrorRevalidation,ae,U,N,Se,ze,de,xc,l,[j.route.id,Te]);Li.filter(Ye=>Ye.key!==C).forEach(Ye=>{let sr=Ye.key,tw=b.fetchers.get(sr),ox=Fc(void 0,tw?tw.data:void 0);b.fetchers.set(sr,ox),B.has(sr)&&ns(sr),Ye.controller&&B.set(sr,Ye.controller)}),_e({fetchers:new Map(b.fetchers)});let Dd=()=>Li.forEach(Ye=>ns(Ye.key));ue.signal.addEventListener("abort",Dd);let{loaderResults:Id,fetcherResults:Fd}=await ro(b.matches,is,za,Li,ft);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",Dd),ne.delete(C),B.delete(C),Li.forEach(Ye=>B.delete(Ye.key));let he=C_([...Id,...Fd]);if(he){if(he.idx>=za.length){let Ye=Li[he.idx-za.length].key;de.add(Ye)}return io(ft,he.result)}let{loaderData:ot,errors:bn}=A_(b,b.matches,za,Id,void 0,Li,Fd,fe);if(b.fetchers.has(C)){let Ye=ss(Te.data);b.fetchers.set(C,Ye)}Y0(Oa),b.navigation.state==="loading"&&Oa>we?(pe(I,"Expected pending action"),O&&O.abort(),Je(b.navigation.location,{matches:is,loaderData:ot,errors:bn,fetchers:new Map(b.fetchers)})):(_e({errors:bn,loaderData:S_(b.loaderData,ot,is,bn),fetchers:new Map(b.fetchers)}),ae=!1)}async function Mg(C,T,M,j,G,q,ie,H){let ce=b.fetchers.get(C);Gn(C,Fc(H,ce?ce.data:void 0),{flushSync:ie});let te=new AbortController,ue=Ba(n.history,M,te.signal);if(q){let Te=await Md(G,M,ue.signal);if(Te.type==="aborted")return;if(Te.type==="error"){let{error:Mt}=Pd(M,Te);rr(C,T,Mt,{flushSync:ie});return}else if(Te.matches)G=Te.matches,j=Vc(G,M);else{rr(C,T,rn(404,{pathname:M}),{flushSync:ie});return}}B.set(C,te);let Ie=Z,He=(await Wn("loader",ue,[j],G))[0];if(yo(He)&&(He=await IS(He,ue.signal,!0)||He),B.get(C)===te&&B.delete(C),!ue.signal.aborted){if(Se.has(C)){Gn(C,ss(void 0));return}if(wo(He))if(we>Ie){Gn(C,ss(void 0));return}else{de.add(C),await io(ue,He);return}if(On(He)){rr(C,T,He.error);return}pe(!yo(He),"Unhandled fetcher deferred data"),Gn(C,ss(He.data))}}async function io(C,T,M){let{submission:j,fetcherSubmission:G,replace:q}=M===void 0?{}:M;T.response.headers.has("X-Remix-Revalidate")&&(ae=!0);let ie=T.response.headers.get("Location");pe(ie,"Expected a Location header on the redirect Response"),ie=__(ie,new URL(C.url),l);let H=Fu(b.location,ie,{_isRedirect:!0});if(t){let He=!1;if(T.response.headers.has("X-Remix-Reload-Document"))He=!0;else if(T0.test(ie)){const Te=n.history.createURL(ie);He=Te.origin!==e.location.origin||bc(Te.pathname,l)==null}if(He){q?e.location.replace(ie):e.location.assign(ie);return}}O=null;let ce=q===!0||T.response.headers.has("X-Remix-Replace")?gt.Replace:gt.Push,{formMethod:te,formAction:ue,formEncType:Ie}=b.navigation;!j&&!G&&te&&ue&&Ie&&(j=R_(b.navigation));let Re=j||G;if(uT.has(T.response.status)&&Re&&xi(Re.formMethod))await ir(ce,H,{submission:tt({},Re,{formAction:ie}),preventScrollReset:F});else{let He=um(H,j);await ir(ce,H,{overrideNavigation:He,fetcherSubmission:G,preventScrollReset:F})}}async function Wn(C,T,M,j){try{let G=await wT(u,C,T,M,j,s,r);return await Promise.all(G.map((q,ie)=>{if(CT(q)){let H=q.result;return{type:Ne.redirect,response:AT(H,T,M[ie].route.id,j,l,d.v7_relativeSplatPath)}}return ET(q)}))}catch(G){return M.map(()=>({type:Ne.error,error:G}))}}async function ro(C,T,M,j,G){let[q,...ie]=await Promise.all([M.length?Wn("loader",G,M,T):[],...j.map(H=>{if(H.matches&&H.match&&H.controller){let ce=Ba(n.history,H.path,H.controller.signal);return Wn("loader",ce,[H.match],H.matches).then(te=>te[0])}else return Promise.resolve({type:Ne.error,error:rn(404,{pathname:H.path})})})]);return await Promise.all([T_(C,M,q,q.map(()=>G.signal),!1,b.loaderData),T_(C,j.map(H=>H.match),ie,j.map(H=>H.controller?H.controller.signal:null),!0)]),{loaderResults:q,fetcherResults:ie}}function ts(){ae=!0,U.push(...Ig()),ze.forEach((C,T)=>{B.has(T)&&(N.add(T),ns(T))})}function Gn(C,T,M){M===void 0&&(M={}),b.fetchers.set(C,T),_e({fetchers:new Map(b.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function rr(C,T,M,j){j===void 0&&(j={});let G=ol(b.matches,T);Td(C),_e({errors:{[G.route.id]:M},fetchers:new Map(b.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function G0(C){return d.v7_fetcherPersist&&(Qe.set(C,(Qe.get(C)||0)+1),Se.has(C)&&Se.delete(C)),b.fetchers.get(C)||hT}function Td(C){let T=b.fetchers.get(C);B.has(C)&&!(T&&T.state==="loading"&&ne.has(C))&&ns(C),ze.delete(C),ne.delete(C),de.delete(C),Se.delete(C),N.delete(C),b.fetchers.delete(C)}function ex(C){if(d.v7_fetcherPersist){let T=(Qe.get(C)||0)-1;T<=0?(Qe.delete(C),Se.add(C)):Qe.set(C,T)}else Td(C);_e({fetchers:new Map(b.fetchers)})}function ns(C){let T=B.get(C);pe(T,"Expected fetch controller: "+C),T.abort(),B.delete(C)}function X0(C){for(let T of C){let M=G0(T),j=ss(M.data);b.fetchers.set(T,j)}}function K0(){let C=[],T=!1;for(let M of de){let j=b.fetchers.get(M);pe(j,"Expected fetcher: "+M),j.state==="loading"&&(de.delete(M),C.push(M),T=!0)}return X0(C),T}function Y0(C){let T=[];for(let[M,j]of ne)if(j<C){let G=b.fetchers.get(M);pe(G,"Expected fetcher: "+M),G.state==="loading"&&(ns(M),ne.delete(M),T.push(M))}return X0(T),T.length>0}function tx(C,T){let M=b.blockers.get(C)||Ic;return st.get(C)!==T&&st.set(C,T),M}function q0(C){b.blockers.delete(C),st.delete(C)}function Rd(C,T){let M=b.blockers.get(C)||Ic;pe(M.state==="unblocked"&&T.state==="blocked"||M.state==="blocked"&&T.state==="blocked"||M.state==="blocked"&&T.state==="proceeding"||M.state==="blocked"&&T.state==="unblocked"||M.state==="proceeding"&&T.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+T.state);let j=new Map(b.blockers);j.set(C,T),_e({blockers:j})}function Q0(C){let{currentLocation:T,nextLocation:M,historyAction:j}=C;if(st.size===0)return;st.size>1&&Aa(!1,"A router only supports one blocker at a time");let G=Array.from(st.entries()),[q,ie]=G[G.length-1],H=b.blockers.get(q);if(!(H&&H.state==="proceeding")&&ie({currentLocation:T,nextLocation:M,historyAction:j}))return q}function Dg(C){let T=rn(404,{pathname:C}),M=a||o,{matches:j,route:G}=x_(M);return Ig(),{notFoundMatches:j,route:G,error:T}}function Pd(C,T){return{boundaryId:ol(T.partialMatches).route.id,error:rn(400,{type:"route-discovery",pathname:C,message:T.error!=null&&"message"in T.error?T.error:String(T.error)})}}function Ig(C){let T=[];return fe.forEach((M,j)=>{(!C||C(j))&&(M.cancel(),T.push(j),fe.delete(j))}),T}function nx(C,T,M){if(S=C,v=T,m=M||null,!A&&b.navigation===cm){A=!0;let j=Z0(b.location,b.matches);j!=null&&_e({restoreScrollPosition:j})}return()=>{S=null,v=null,m=null}}function J0(C,T){return m&&m(C,T.map(j=>Uk(j,b.loaderData)))||C.key}function ix(C,T){if(S&&v){let M=J0(C,T);S[M]=v()}}function Z0(C,T){if(S){let M=J0(C,T),j=S[M];if(typeof j=="number")return j}return null}function Ld(C,T,M){if(h){if(y.has(M))return{active:!1,matches:C};if(C){if(Object.keys(C[0].params).length>0)return{active:!0,matches:wf(T,M,l,!0)}}else return{active:!0,matches:wf(T,M,l,!0)||[]}}return{active:!1,matches:null}}async function Md(C,T,M){let j=C;for(;;){let G=a==null,q=a||o;try{await vT(h,T,j,q,s,r,Vn,M)}catch(ce){return{type:"error",error:ce,partialMatches:j}}finally{G&&(o=[...o])}if(M.aborted)return{type:"aborted"};let ie=ho(q,T,l);if(ie)return ew(T,y),{type:"success",matches:ie};let H=wf(q,T,l,!0);if(!H||j.length===H.length&&j.every((ce,te)=>ce.route.id===H[te].route.id))return ew(T,y),{type:"success",matches:null};j=H}}function ew(C,T){if(T.size>=g){let M=T.values().next().value;T.delete(M)}T.add(C)}function rx(C){s={},a=Nu(C,r,void 0,s)}function sx(C,T){let M=a==null;LS(C,T,a||o,s,r),M&&(o=[...o],_e({}))}return L={get basename(){return l},get future(){return d},get state(){return b},get routes(){return o},get window(){return e},initialize:eo,subscribe:De,enableScrollRestoration:nx,navigate:ct,fetch:Pg,revalidate:Pi,createHref:C=>n.history.createHref(C),encodeLocation:C=>n.history.encodeLocation(C),getFetcher:G0,deleteFetcher:ex,dispose:to,getBlocker:tx,deleteBlocker:q0,patchRoutes:sx,_internalFetchControllers:B,_internalActiveDeferreds:fe,_internalSetRoutes:rx},L}function pT(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function uv(n,e,t,i,r,s,o,a){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let h=k0(r||".",C0(l,s),bc(n.pathname,t)||n.pathname,a==="path");return r==null&&(h.search=n.search,h.hash=n.hash),(r==null||r===""||r===".")&&u&&u.route.index&&!R0(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),i&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ur([t,h.pathname])),Sa(h)}function m_(n,e,t,i){if(!i||!pT(i))return{path:t};if(i.formMethod&&!TT(i.formMethod))return{path:t,error:rn(405,{method:i.formMethod})};let r=()=>({path:t,error:rn(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=MS(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!xi(o))return r();let f=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((p,g)=>{let[y,S]=g;return""+p+y+"="+S+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:f}}}else if(i.formEncType==="application/json"){if(!xi(o))return r();try{let f=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:f,text:void 0}}}catch{return r()}}}pe(typeof FormData=="function","FormData is not available in this environment");let l,u;if(i.formData)l=hv(i.formData),u=i.formData;else if(i.body instanceof FormData)l=hv(i.body),u=i.body;else if(i.body instanceof URLSearchParams)l=i.body,u=E_(l);else if(i.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(i.body),u=E_(l)}catch{return r()}let h={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(xi(h.formMethod))return{path:t,submission:h};let d=es(t);return e&&d.search&&R0(d.search)&&l.append("index",""),d.search="?"+l,{path:Sa(d),submission:h}}function gT(n,e){let t=n;if(e){let i=n.findIndex(r=>r.route.id===e);i>=0&&(t=n.slice(0,i))}return t}function v_(n,e,t,i,r,s,o,a,l,u,h,d,f,p,g,y){let S=y?On(y[1])?y[1].error:y[1].data:void 0,m=n.createURL(e.location),v=n.createURL(r),A=y&&On(y[1])?y[0]:void 0,x=A?gT(t,A):t,k=y?y[1].statusCode:void 0,R=o&&k&&k>=400,L=x.filter((I,F)=>{let{route:O}=I;if(O.lazy)return!0;if(O.loader==null)return!1;if(s)return typeof O.loader!="function"||O.loader.hydrate?!0:e.loaderData[O.id]===void 0&&(!e.errors||e.errors[O.id]===void 0);if(mT(e.loaderData,e.matches[F],I)||l.some(W=>W===I.route.id))return!0;let J=e.matches[F],Y=I;return y_(I,tt({currentUrl:m,currentParams:J.params,nextUrl:v,nextParams:Y.params},i,{actionResult:S,actionStatus:k,defaultShouldRevalidate:R?!1:a||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||PS(J,Y)}))}),b=[];return d.forEach((I,F)=>{if(s||!t.some(se=>se.route.id===I.routeId)||h.has(F))return;let O=ho(p,I.path,g);if(!O){b.push({key:F,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let J=e.fetchers.get(F),Y=Vc(O,I.path),W=!1;f.has(F)?W=!1:u.has(F)?(u.delete(F),W=!0):J&&J.state!=="idle"&&J.data===void 0?W=a:W=y_(Y,tt({currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:t[t.length-1].params},i,{actionResult:S,actionStatus:k,defaultShouldRevalidate:R?!1:a})),W&&b.push({key:F,routeId:I.routeId,path:I.path,matches:O,match:Y,controller:new AbortController})}),[L,b]}function mT(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function PS(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function y_(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}async function vT(n,e,t,i,r,s,o,a){let l=[e,...t.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=n({path:e,matches:t,patch:(h,d)=>{a.aborted||LS(h,d,i,r,s)}}),o.set(l,u)),u&&xT(u)&&await u}finally{o.delete(l)}}function LS(n,e,t,i,r){if(n){var s;let o=i[n];pe(o,"No route found to patch children into: routeId = "+n);let a=Nu(e,r,[n,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],i);o.children?o.children.push(...a):o.children=a}else{let o=Nu(e,r,["patch",String(t.length||"0")],i);t.push(...o)}}async function w_(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];pe(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";Aa(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Hk.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,tt({},e(r),{lazy:void 0}))}function yT(n){return Promise.all(n.matches.map(e=>e.resolve()))}async function wT(n,e,t,i,r,s,o,a){let l=i.reduce((d,f)=>d.add(f.route.id),new Set),u=new Set,h=await n({matches:r.map(d=>{let f=l.has(d.route.id);return tt({},d,{shouldLoad:f,resolve:g=>(u.add(d.route.id),f?_T(e,t,d,s,o,g,a):Promise.resolve({type:Ne.data,result:void 0}))})}),request:t,params:r[0].params,context:a});return r.forEach(d=>pe(u.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((d,f)=>l.has(r[f].route.id))}async function _T(n,e,t,i,r,s,o){let a,l,u=h=>{let d,f=new Promise((y,S)=>d=S);l=()=>d(),e.signal.addEventListener("abort",l);let p=y=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):h({request:e,params:t.params,context:o},...y!==void 0?[y]:[]),g;return s?g=s(y=>p(y)):g=(async()=>{try{return{type:"data",result:await p()}}catch(y){return{type:"error",result:y}}})(),Promise.race([g,f])};try{let h=t.route[n];if(t.route.lazy)if(h){let d,[f]=await Promise.all([u(h).catch(p=>{d=p}),w_(t.route,r,i)]);if(d!==void 0)throw d;a=f}else if(await w_(t.route,r,i),h=t.route[n],h)a=await u(h);else if(n==="action"){let d=new URL(e.url),f=d.pathname+d.search;throw rn(405,{method:e.method,pathname:f,routeId:t.route.id})}else return{type:Ne.data,result:void 0};else if(h)a=await u(h);else{let d=new URL(e.url),f=d.pathname+d.search;throw rn(404,{pathname:f})}pe(a.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Ne.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function ET(n){let{result:e,type:t}=n;if(DS(e)){let u;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(h){return{type:Ne.error,error:h}}return t===Ne.error?{type:Ne.error,error:new mp(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:Ne.data,data:u,statusCode:e.status,headers:e.headers}}if(t===Ne.error){if(k_(e)){var i;if(e.data instanceof Error){var r;return{type:Ne.error,error:e.data,statusCode:(r=e.init)==null?void 0:r.status}}e=new mp(((i=e.init)==null?void 0:i.status)||500,void 0,e.data)}return{type:Ne.error,error:e,statusCode:lg(e)?e.status:void 0}}if(kT(e)){var s,o;return{type:Ne.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(k_(e)){var a,l;return{type:Ne.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Ne.data,data:e}}function AT(n,e,t,i,r,s){let o=n.headers.get("Location");if(pe(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!T0.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=uv(new URL(e.url),a,r,!0,o,s),n.headers.set("Location",o)}return n}function __(n,e,t){if(T0.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=bc(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function Ba(n,e,t,i){let r=n.createURL(MS(e)).toString(),s={signal:t};if(i&&xi(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=hv(i.formData):s.body=i.formData}return new Request(r,s)}function hv(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function E_(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function ST(n,e,t,i,r,s){let o={},a=null,l,u=!1,h={},d=i&&On(i[1])?i[1].error:void 0;return t.forEach((f,p)=>{let g=e[p].route.id;if(pe(!wo(f),"Cannot handle redirect results in processLoaderData"),On(f)){let y=f.error;d!==void 0&&(y=d,d=void 0),a=a||{};{let S=ol(n,g);a[S.route.id]==null&&(a[S.route.id]=y)}o[g]=void 0,u||(u=!0,l=lg(f.error)?f.error.status:500),f.headers&&(h[g]=f.headers)}else yo(f)?(r.set(g,f.deferredData),o[g]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!u&&(l=f.statusCode),f.headers&&(h[g]=f.headers)):(o[g]=f.data,f.statusCode&&f.statusCode!==200&&!u&&(l=f.statusCode),f.headers&&(h[g]=f.headers))}),d!==void 0&&i&&(a={[i[0]]:d},o[i[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function A_(n,e,t,i,r,s,o,a){let{loaderData:l,errors:u}=ST(e,t,i,r,a);for(let h=0;h<s.length;h++){let{key:d,match:f,controller:p}=s[h];pe(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let g=o[h];if(!(p&&p.signal.aborted))if(On(g)){let y=ol(n.matches,f==null?void 0:f.route.id);u&&u[y.route.id]||(u=tt({},u,{[y.route.id]:g.error})),n.fetchers.delete(d)}else if(wo(g))pe(!1,"Unhandled fetcher revalidation redirect");else if(yo(g))pe(!1,"Unhandled fetcher deferred data");else{let y=ss(g.data);n.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function S_(n,e,t,i){let r=tt({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):n[o]!==void 0&&s.route.loader&&(r[o]=n[o]),i&&i.hasOwnProperty(o))break}return r}function b_(n){return n?On(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ol(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function x_(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rn(n,e){let{pathname:t,routeId:i,method:r,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+t+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+o):r&&t&&i?l="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+t+'"'):n===404?(a="Not Found",l='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",r&&t&&i?l="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new mp(n||500,a,new Error(l),!0)}function C_(n){for(let e=n.length-1;e>=0;e--){let t=n[e];if(wo(t))return{result:t,idx:e}}}function MS(n){let e=typeof n=="string"?es(n):n;return Sa(tt({},e,{hash:""}))}function bT(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function xT(n){return typeof n=="object"&&n!=null&&"then"in n}function CT(n){return DS(n.result)&&cT.has(n.result.status)}function yo(n){return n.type===Ne.deferred}function On(n){return n.type===Ne.error}function wo(n){return(n&&n.type)===Ne.redirect}function k_(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function kT(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function DS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function TT(n){return lT.has(n.toLowerCase())}function xi(n){return oT.has(n.toLowerCase())}async function T_(n,e,t,i,r,s){for(let o=0;o<t.length;o++){let a=t[o],l=e[o];if(!l)continue;let u=n.find(d=>d.route.id===l.route.id),h=u!=null&&!PS(u,l)&&(s&&s[l.route.id])!==void 0;if(yo(a)&&(r||h)){let d=i[o];pe(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await IS(a,d,r).then(f=>{f&&(t[o]=f||t[o])})}}}async function IS(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Ne.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Ne.error,error:r}}return{type:Ne.data,data:n.deferredData.data}}}function R0(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Vc(n,e){let t=typeof e=="string"?es(e).search:e.search;if(n[n.length-1].route.index&&R0(t||""))return n[n.length-1];let i=kS(n);return i[i.length-1]}function R_(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:o}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function um(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function RT(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Fc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PT(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ss(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function LT(n,e){try{let t=n.sessionStorage.getItem(RS);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function MT(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(RS,JSON.stringify(t))}catch(i){Aa(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vp(){return vp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vp.apply(this,arguments)}const cg=D.createContext(null),FS=D.createContext(null),Ma=D.createContext(null),P0=D.createContext(null),Da=D.createContext({outlet:null,matches:[],isDataRoute:!1}),NS=D.createContext(null);function DT(n,e){let{relative:t}=e===void 0?{}:e;Ad()||pe(!1);let{basename:i,navigator:r}=D.useContext(Ma),{hash:s,pathname:o,search:a}=jS(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Ur([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Ad(){return D.useContext(P0)!=null}function ug(){return Ad()||pe(!1),D.useContext(P0).location}function OS(n){D.useContext(Ma).static||D.useLayoutEffect(n)}function IT(){let{isDataRoute:n}=D.useContext(Da);return n?GT():FT()}function FT(){Ad()||pe(!1);let n=D.useContext(cg),{basename:e,future:t,navigator:i}=D.useContext(Ma),{matches:r}=D.useContext(Da),{pathname:s}=ug(),o=JSON.stringify(C0(r,t.v7_relativeSplatPath)),a=D.useRef(!1);return OS(()=>{a.current=!0}),D.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=k0(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ur([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,n])}function jS(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=D.useContext(Ma),{matches:r}=D.useContext(Da),{pathname:s}=ug(),o=JSON.stringify(C0(r,i.v7_relativeSplatPath));return D.useMemo(()=>k0(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function NT(n,e,t,i){Ad()||pe(!1);let{navigator:r}=D.useContext(Ma),{matches:s}=D.useContext(Da),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ug(),h;h=u;let d=h.pathname||"/",f=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=ho(n,{pathname:f});return BT(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ur([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ur([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,i)}function OT(){let n=WT(),e=lg(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:r},t):null,null)}const jT=D.createElement(OT,null);class zT extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(Da.Provider,{value:this.props.routeContext},D.createElement(NS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HT(n){let{routeContext:e,match:t,children:i}=n,r=D.useContext(cg);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(Da.Provider,{value:e},i)}function BT(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||pe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:p}=t,g=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let p,g=!1,y=null,S=null;t&&(p=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||jT,l&&(u<0&&f===0?(XT("route-fallback"),g=!0,S=null):u===f&&(g=!0,S=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),v=()=>{let A;return p?A=y:g?A=S:d.route.Component?A=D.createElement(d.route.Component,null):d.route.element?A=d.route.element:A=h,D.createElement(HT,{match:d,routeContext:{outlet:h,matches:m,isDataRoute:t!=null},children:A})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?D.createElement(zT,{location:t.location,revalidation:t.revalidation,component:y,error:p,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var zS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(zS||{}),yp=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(yp||{});function UT(n){let e=D.useContext(cg);return e||pe(!1),e}function $T(n){let e=D.useContext(FS);return e||pe(!1),e}function VT(n){let e=D.useContext(Da);return e||pe(!1),e}function HS(n){let e=VT(),t=e.matches[e.matches.length-1];return t.route.id||pe(!1),t.route.id}function WT(){var n;let e=D.useContext(NS),t=$T(yp.UseRouteError),i=HS(yp.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function GT(){let{router:n}=UT(zS.UseNavigateStable),e=HS(yp.UseNavigateStable),t=D.useRef(!1);return OS(()=>{t.current=!0}),D.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,vp({fromRouteId:e},s)))},[n,e])}const P_={};function XT(n,e,t){P_[n]||(P_[n]=!0)}function KT(n){let{basename:e="/",children:t=null,location:i,navigationType:r=gt.Pop,navigator:s,static:o=!1,future:a}=n;Ad()&&pe(!1);let l=e.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:l,navigator:s,static:o,future:vp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=es(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:g="default"}=i,y=D.useMemo(()=>{let S=bc(h,l);return S==null?null:{location:{pathname:S,search:d,hash:f,state:p,key:g},navigationType:r}},[l,h,d,f,p,g,r]);return y==null?null:D.createElement(Ma.Provider,{value:u},D.createElement(P0.Provider,{children:t,value:y}))}new Promise(()=>{});function YT(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:D.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ou.apply(this,arguments)}function qT(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function QT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function JT(n,e){return n.button===0&&(!e||e==="_self")&&!QT(n)}const ZT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],eR="6";try{window.__reactRouterVersion=eR}catch{}function tR(n,e){return fT({basename:void 0,future:Ou({},void 0,{v7_prependBasename:!0}),history:Ok({window:void 0}),hydrationData:nR(),routes:n,mapRouteProperties:YT,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function nR(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ou({},e,{errors:iR(e.errors)})),e}function iR(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new mp(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const rR=D.createContext({isTransitioning:!1}),sR=D.createContext(new Map),oR="startTransition",L_=bx[oR],aR="flushSync",M_=Nk[aR];function lR(n){L_?L_(n):n()}function Nc(n){M_?M_(n):n()}class cR{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}}function uR(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=D.useState(t.state),[o,a]=D.useState(),[l,u]=D.useState({isTransitioning:!1}),[h,d]=D.useState(),[f,p]=D.useState(),[g,y]=D.useState(),S=D.useRef(new Map),{v7_startTransition:m}=i||{},v=D.useCallback(b=>{m?lR(b):b()},[m]),A=D.useCallback((b,I)=>{let{deletedFetchers:F,unstable_flushSync:O,unstable_viewTransitionOpts:J}=I;F.forEach(W=>S.current.delete(W)),b.fetchers.forEach((W,se)=>{W.data!==void 0&&S.current.set(se,W.data)});let Y=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!J||Y){O?Nc(()=>s(b)):v(()=>s(b));return}if(O){Nc(()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:J.currentLocation,nextLocation:J.nextLocation})});let W=t.window.document.startViewTransition(()=>{Nc(()=>s(b))});W.finished.finally(()=>{Nc(()=>{d(void 0),p(void 0),a(void 0),u({isTransitioning:!1})})}),Nc(()=>p(W));return}f?(h&&h.resolve(),f.skipTransition(),y({state:b,currentLocation:J.currentLocation,nextLocation:J.nextLocation})):(a(b),u({isTransitioning:!0,flushSync:!1,currentLocation:J.currentLocation,nextLocation:J.nextLocation}))},[t.window,f,h,S,v]);D.useLayoutEffect(()=>t.subscribe(A),[t,A]),D.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new cR)},[l]),D.useEffect(()=>{if(h&&o&&t.window){let b=o,I=h.promise,F=t.window.document.startViewTransition(async()=>{v(()=>s(b)),await I});F.finished.finally(()=>{d(void 0),p(void 0),a(void 0),u({isTransitioning:!1})}),p(F)}},[v,o,h,t.window]),D.useEffect(()=>{h&&o&&r.location.key===o.location.key&&h.resolve()},[h,f,r.location,o]),D.useEffect(()=>{!l.isTransitioning&&g&&(a(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),D.useEffect(()=>{},[]);let x=D.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:b=>t.navigate(b),push:(b,I,F)=>t.navigate(b,{state:I,preventScrollReset:F==null?void 0:F.preventScrollReset}),replace:(b,I,F)=>t.navigate(b,{replace:!0,state:I,preventScrollReset:F==null?void 0:F.preventScrollReset})}),[t]),k=t.basename||"/",R=D.useMemo(()=>({router:t,navigator:x,static:!1,basename:k}),[t,x,k]),L=D.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return D.createElement(D.Fragment,null,D.createElement(cg.Provider,{value:R},D.createElement(FS.Provider,{value:r},D.createElement(sR.Provider,{value:S.current},D.createElement(rR.Provider,{value:l},D.createElement(KT,{basename:k,location:r.location,navigationType:r.historyAction,navigator:x,future:L},r.initialized||t.future.v7_partialHydration?D.createElement(hR,{routes:t.routes,future:t.future,state:r}):e))))),null)}const hR=D.memo(dR);function dR(n){let{routes:e,future:t,state:i}=n;return NT(e,void 0,i,t)}const fR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zd=D.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=qT(e,ZT),{basename:p}=D.useContext(Ma),g,y=!1;if(typeof u=="string"&&pR.test(u)&&(g=u,fR))try{let A=new URL(window.location.href),x=u.startsWith("//")?new URL(A.protocol+u):new URL(u),k=bc(x.pathname,p);x.origin===A.origin&&k!=null?u=k+x.search+x.hash:y=!0}catch{}let S=DT(u,{relative:r}),m=gR(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,unstable_viewTransition:d});function v(A){i&&i(A),A.defaultPrevented||m(A)}return D.createElement("a",Ou({},f,{href:g||S,onClick:y||s?i:v,ref:t,target:l}))});var D_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(D_||(D_={}));var I_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(I_||(I_={}));function gR(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=IT(),u=ug(),h=jS(n,{relative:o});return D.useCallback(d=>{if(JT(d,t)){d.preventDefault();let f=i!==void 0?i:Sa(u)===Sa(h);l(n,{replace:f,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,h,i,r,t,n,s,o,a])}function hg(n){return P.jsxs(P.Fragment,{children:[P.jsx("h1",{children:"binh's letters"}),P.jsx("nav",{children:P.jsxs("ol",{children:[P.jsx("li",{children:P.jsx(Zd,{to:"/",children:"home"})}),P.jsx("li",{children:P.jsx(Zd,{to:"/experience",children:"experience"})}),P.jsx("li",{children:P.jsx(Zd,{to:"/projects",children:"projects"})}),P.jsx("li",{children:P.jsx(Zd,{to:"/about",children:"about me"})})]})})]})}function dg(n){return P.jsx("footer",{children:P.jsxs("p",{children:["Copyright  ",new Date().getFullYear(),P.jsx("a",{href:"https://www.youtube.com/@binh",children:"Binh Le"})]})})}function mR(){return P.jsxs("div",{className:"main-container",children:[P.jsx(hg,{}),P.jsx("img",{src:"assets/nycsubway.jpg"}),P.jsx("p",{children:"hi, i'm binh le."}),P.jsx("p",{children:"thanks for being here."}),P.jsx("p",{children:"i had a lot of trouble deciding on how my portfolio site should be but after a discussion with my web dev professor, and being really inspired from herman's blog i now think less is more."}),P.jsx("p",{children:"i made this site to free myself from the a4 limits of traditional resumes."}),P.jsx("p",{children:"oh. and im 20 years old. a cs major @ drexel"}),P.jsx(dg,{})]})}const vR=()=>P.jsxs("div",{className:"main-container",children:[P.jsx(hg,{}),P.jsxs("ul",{children:[P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"2024 - present"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://soar-lab.github.io/",target:"_blank",rel:"noopener noreferrer",children:"research assistant @ soar lab"})}),P.jsx("p",{className:"description",children:"co-authored a paper on security risks of llm-generated code. analyzed 1,000+ devgpt conversations, creating visualizations to highlight llm inaccuracies. developed scripts to fetch and clean github security data using python and pandas."}),P.jsx("span",{className:"technologies",children:"python, pandas, matplotlib, seaborn, jupyter notebook, numpy, github api"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"jul - sep 2024"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://google.com/",target:"_blank",rel:"noopener noreferrer",children:"fellow @ google"})}),P.jsx("p",{className:"description",children:"participate in pair programming sessions with google engineer for 10 weeks, and receive mentorship to prepare for technical and behavioral interviews."})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"apr - sep 2024"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://dataing.io/",target:"_blank",rel:"noopener noreferrer",children:"software engineer co-op @ dataing"})}),P.jsx("p",{className:"description",children:"led efforts in automating user data retrievals from social media APIs, enhancing authentication processes and overall system efficiency. oversaw the integration of third-party services into an ios app and played a key role in qa to ensure seamless data extraction and feature reliability."}),P.jsx("span",{className:"technologies",children:"typescript, firestore, typesaurus, react, swift, api, aws, terraform, kubernetes, docker"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"apr - jul 2024"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://codeinplace.stanford.edu/",target:"_blank",rel:"noopener noreferrer",children:"section leader @ stanford"})}),P.jsx("p",{className:"description",children:"taught cs106a introduction to programming course for stanford"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"jan - feb 2024"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://www.meta.com/",target:"_blank",rel:"noopener noreferrer",children:"fellow @ meta"})}),P.jsx("p",{className:"description",children:"participated in meta's winter cohort of abcs fellowship to learn about ds&a problem solving and meta's interview process"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"apr - jun 2022"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://vnpt-technology.vn/en",target:"_blank",rel:"noopener noreferrer",children:"software engineer intern @ vnpt"})}),P.jsx("p",{className:"description",children:"conducted research to support error reduction in product development alongside fellow interns. developed a python script to streamline data cleaning, significantly enhancing work efficiency. gained insights into the product development process through factory tours."})]})]})]}),P.jsx("div",{className:"resume",children:P.jsx("a",{href:"src/assets/BinhLeResume.pdf",target:"_blank",children:"view full resume"})}),P.jsx(dg,{})]}),yR=()=>P.jsxs("div",{className:"main-container",children:[P.jsx(hg,{}),P.jsxs("ul",{children:[P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"2013 - present"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://www.youtube.com/@binh",target:"_blank",rel:"noopener noreferrer",children:"content creator"})}),P.jsx("p",{className:"description",children:"amassed 1.3+ million followers by integrating cs education into engaging content for vietnamese teens. directed marketing strategies reaching 300+ million views with brands like tiktok, vng, acer, and vtc games."}),P.jsx("span",{className:"technologies",children:"youtube, tiktok, instagram, facebook, linkedin, marketing, content creation"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"apr 2024"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://github.com/mikth3372/DragonHacks",target:"_blank",rel:"noopener noreferrer",children:"serenity - dragonhacks 10"})}),P.jsx("p",{className:"description",children:"led a team of 3 to build an interview platform using humeapi for live emotional insights, winning best tech domain at dragonhacks 2024. designed the backend with session validation and integrated openai."}),P.jsx("span",{className:"technologies",children:"python, flask, humeapi, openai, react, tailwind, html, css, numpy, matplotlib"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"apr 2024"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://github.com/kxllydo/codefest24-25",target:"_blank",rel:"noopener noreferrer",children:"adopteam - philly codefest 2024"})}),P.jsx("p",{className:"description",children:"spearheaded ml model integration using multilayer perceptrons, achieving 80% success in parent-child pairings to make adoption more accessible and refine the process. used 1000 samples with various attributes for kids and adults, targeting compatibility."}),P.jsx("span",{className:"technologies",children:"python, keras, tensorflow, pandas, scikit-learn"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"dec 2023"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:"student survey & test system - drexel university"}),P.jsx("p",{className:"description",children:"leveraged 4+ design patterns in a java program to enable seamless future feature integration and optimized serialization for 50% faster runtime."}),P.jsx("span",{className:"technologies",children:"java, design patterns, serialization"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"aug 2023"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://github.com/BinhL3/MultiplayerSnake",target:"_blank",rel:"noopener noreferrer",children:"2d multiplayer snake"})}),P.jsx("p",{className:"description",children:"developed a 2d multiplayer snake game like slither.io using rest apis, phaser, and socket.io. led a team of 3 and implemented ci/cd with github actions."}),P.jsx("span",{className:"technologies",children:"javascript, react, socket.io, phaser, rest apis"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"aug 2023"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:"mini unix shell - drexel university"}),P.jsx("p",{className:"description",children:"engineered a c-based shell with system command execution, io redirection, and efficient process piping. added features like background task execution and directory navigation on tux servers."}),P.jsx("span",{className:"technologies",children:"c, tux servers, system programming"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"jan - jun 2023"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:P.jsx("a",{href:"https://github.com/BinhL3/Mangrove---Webagenda",target:"_blank",rel:"noopener noreferrer",children:"mangrove agenda"})}),P.jsx("p",{className:"description",children:"led a team-based agile full-stack project, mangrove agenda, at drexel to streamline student scheduling. designed the backend with python, flask, javascript for session validation, and sqlalchemy for database management. integrated openai and fullcalendar apis for a seamless user experience."}),P.jsx("span",{className:"technologies",children:"python, flask, javascript, sqlalchemy, openai, fullcalendar"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"apr - jun 2022"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:"pacman replication - vin university"}),P.jsx("p",{className:"description",children:"collaborated with 3 peers to develop a pacman replication game in java and javafx. reduced bugs by 70% with optimized collision detection to update the game state."}),P.jsx("span",{className:"technologies",children:"java, javafx, object-oriented programming, design patterns"})]})]}),P.jsxs("li",{children:[P.jsx("span",{className:"date",children:"2021 - 2022"}),P.jsxs("div",{className:"content",children:[P.jsx("span",{className:"role",children:"autonomous car - cecs day"}),P.jsx("p",{className:"description",children:"engineered a pre-trained model into an autonomous car, boosting track detection accuracy by 20% using opencv. secured top 2 best recycling solution at vinuni hackathon by implementing ar for cultural heritage preservation."}),P.jsx("span",{className:"technologies",children:"python, opencv, arduino, makerbot microcontroller, figma, esp32-cam module"})]})]})]}),P.jsx(dg,{})]}),wR=()=>P.jsxs("div",{className:"main-container",children:[P.jsx(hg,{}),P.jsx("img",{src:"assets/icon.jpg"}),P.jsx("p",{children:"hi, i'm binh le. 20. vietnamese."}),P.jsx("p",{children:"i called this page binh letters cause of the word play i thought was funny"}),P.jsx("p",{children:"i like to think of myself as a very passionate person. i mean it might just be me in my early twenties wanting to change the world and impact it in a positive light. but you'll find my talking about how cool people are for innovating and how smart people can be from looking at their legacy."}),P.jsx("p",{children:"i don't think i'm that smart. but man do i try to work hard and learn as many things as possible. it might be this attitude that helped me graduate at the top of my school, get into every vietnamese college (can't say the same for the u.s. ones), and gain substantial success in social media."}),P.jsx("p",{children:"i really want to succeed in this tech world now. even given the prevalence of ai. even given the kids who coded since they was 6. i hope that showing up and persisting each day through all the struggles will pay off."}),P.jsxs("p",{children:[P.jsx("strong",{children:"p.s. "}),"this picture here is fan art someone made of my minecraft character"]}),P.jsx(dg,{})]}),_R="modulepreload",ER=function(n){return"/"+n},F_={},ef=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(t.map(a=>{if(a=ER(a),a in F_)return;F_[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":_R,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var gu={};gu.d=(n,e)=>{for(var t in e)gu.o(e,t)&&!gu.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};gu.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var re=globalThis.pdfjsLib={};gu.d(re,{AbortException:()=>Fa,AnnotationEditorLayer:()=>Ey,AnnotationEditorParamsType:()=>oe,AnnotationEditorType:()=>Ae,AnnotationEditorUIManager:()=>xa,AnnotationLayer:()=>wL,AnnotationMode:()=>fs,CMapCompressionType:()=>fv,ColorPicker:()=>xp,DOMSVGFactory:()=>D0,DrawLayer:()=>xy,FeatureTest:()=>yn,GlobalWorkerOptions:()=>$r,ImageKind:()=>_f,InvalidPDFException:()=>US,MissingPDFException:()=>Ia,OPS:()=>ui,Outliner:()=>ny,PDFDataRangeTransport:()=>Ob,PDFDateString:()=>YS,PDFWorker:()=>gl,PasswordResponses:()=>xR,PermissionFlag:()=>bR,PixelsPerInch:()=>Xs,RenderingCancelledException:()=>I0,TextLayer:()=>Sp,UnexpectedResponseException:()=>mg,Util:()=>Q,VerbosityLevel:()=>fg,XfaLayer:()=>zb,build:()=>ZP,createValidAbsoluteUrl:()=>RR,fetchData:()=>Eg,getDocument:()=>VP,getFilenameFromUrl:()=>zR,getPdfFilenameFromUrl:()=>HR,getXfaPageViewport:()=>BR,isDataScheme:()=>F0,isPdfFile:()=>N0,noContextMenu:()=>Sn,normalizeUnicode:()=>FR,renderTextLayer:()=>FP,setLayerDimensions:()=>ba,shadow:()=>be,updateTextLayer:()=>NP,version:()=>JP});const Jt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),BS=[1,0,0,1,0,0],dv=[.001,0,0,.001,0,0],AR=1e7,hm=1.35,Jn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},fs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},SR="pdfjs_internal_editor_",Ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},bR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},_f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},yt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Oc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},fg={ERRORS:0,WARNINGS:1,INFOS:5},fv={NONE:0,BINARY:1},ui={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},xR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let pg=fg.WARNINGS;function CR(n){Number.isInteger(n)&&(pg=n)}function kR(){return pg}function gg(n){pg>=fg.INFOS&&console.log(`Info: ${n}`)}function ge(n){pg>=fg.WARNINGS&&console.log(`Warning: ${n}`)}function Oe(n){throw new Error(n)}function xt(n,e){n||Oe(e)}function TR(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function RR(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=IR(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(TR(i))return i}catch{}return null}function be(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Zs=function(){function e(t,i){this.constructor===e&&Oe("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class pv extends Zs{constructor(e,t){super(e,"PasswordException"),this.code=t}}class gv extends Zs{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class US extends Zs{constructor(e){super(e,"InvalidPDFException")}}class Ia extends Zs{constructor(e){super(e,"MissingPDFException")}}class mg extends Zs{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class PR extends Zs{constructor(e){super(e,"FormatError")}}class Fa extends Zs{constructor(e){super(e,"AbortException")}}function $S(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Oe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=n.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function vg(n){typeof n!="string"&&Oe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function LR(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function L0(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function MR(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function DR(){try{return new Function(""),!0}catch{return!1}}class yn{static get isLittleEndian(){return be(this,"isLittleEndian",MR())}static get isEvalSupported(){return be(this,"isEvalSupported",DR())}static get isOffscreenCanvasSupported(){return be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?be(this,"platform",{isMac:navigator.platform.includes("Mac")}):be(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return be(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const dm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Wr,Ef,mv;class Q{static makeHexColor(e,t,i){return`#${dm[e]}${dm[t]}${dm[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,s]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-s*r))/2,u=a+l||1,h=a-l||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[i,s,r,o]}static bezierBoundingBox(e,t,i,r,s,o,a,l,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],_(this,Wr,mv).call(this,e,i,s,a,t,r,o,l,3*(-e+3*(i-s)+a),6*(e-2*i+s),3*(i-e),u),_(this,Wr,mv).call(this,e,i,s,a,t,r,o,l,3*(-t+3*(r-o)+l),6*(t-2*r+o),3*(r-t),u),u}}Wr=new WeakSet,Ef=function(e,t,i,r,s,o,a,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,g=d*(d*(d*e+3*u*t)+3*f*i)+p*r,y=d*(d*(d*s+3*u*o)+3*f*a)+p*l;h[0]=Math.min(h[0],g),h[1]=Math.min(h[1],y),h[2]=Math.max(h[2],g),h[3]=Math.max(h[3],y)},mv=function(e,t,i,r,s,o,a,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&_(this,Wr,Ef).call(this,e,t,i,r,s,o,a,l,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const g=Math.sqrt(p),y=2*u;_(this,Wr,Ef).call(this,e,t,i,r,s,o,a,l,(-h+g)/y,f),_(this,Wr,Ef).call(this,e,t,i,r,s,o,a,l,(-h-g)/y,f)},E(Q,Wr);function IR(n){return decodeURIComponent(escape(n))}let fm=null,N_=null;function FR(n){return fm||(fm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,N_=new Map([["","t"]])),n.replaceAll(fm,(e,t,i)=>t?t.normalize("NFKC"):N_.get(i))}function NR(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return $S(n)}const VS="pdfjs_internal_id_",or={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class yg{constructor(){this.constructor===yg&&Oe("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}var zu;const U0=class U0{constructor({enableHWA:e=!1}={}){E(this,zu,!1);this.constructor===U0&&Oe("Cannot initialize BaseCanvasFactory."),w(this,zu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,zu)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Oe("Abstract method `_createCanvas` called.")}};zu=new WeakMap;let wp=U0;class wg{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===wg&&Oe("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?fv.BINARY:fv.NONE;return this._fetchData(t,i).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){Oe("Abstract method `_fetchData` called.")}}class _g{constructor({baseUrl:e=null}){this.constructor===_g&&Oe("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){Oe("Abstract method `_fetchData` called.")}}class M0{constructor(){this.constructor===M0&&Oe("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Oe("Abstract method `_createSVG` called.")}}const lr="http://www.w3.org/2000/svg",fo=class fo{};le(fo,"CSS",96),le(fo,"PDF",72),le(fo,"PDF_TO_CSS_UNITS",fo.CSS/fo.PDF);let Xs=fo;var _o,Fi,gr,fn,kp,Eo,K,Xt,Ua,$a,Af,WS,vv,Va,Wc,Gc,yv,Xc;class OR extends yg{constructor({docId:t,ownerDocument:i=globalThis.document}={}){super();E(this,K);E(this,_o);E(this,Fi);E(this,gr);E(this,fn);E(this,kp);E(this,Eo,0);w(this,gr,t),w(this,fn,i)}addFilter(t){if(!t)return"none";let i=c(this,K,Xt).get(t);if(i)return i;const[r,s,o]=_(this,K,Af).call(this,t),a=t.length===1?r:`${r}${s}${o}`;if(i=c(this,K,Xt).get(a),i)return c(this,K,Xt).set(t,i),i;const l=`g_${c(this,gr)}_transfer_map_${xn(this,Eo)._++}`,u=`url(#${l})`;c(this,K,Xt).set(t,u),c(this,K,Xt).set(a,u);const h=_(this,K,Va).call(this,l);return _(this,K,Gc).call(this,r,s,o,h),u}addHCMFilter(t,i){var g;const r=`${t}-${i}`,s="base";let o=c(this,K,Ua).get(s);if((o==null?void 0:o.key)===r||(o?((g=o.filter)==null||g.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,K,Ua).set(s,o)),!t||!i))return o.url;const a=_(this,K,Xc).call(this,t);t=Q.makeHexColor(...a);const l=_(this,K,Xc).call(this,i);if(i=Q.makeHexColor(...l),c(this,K,$a).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const u=new Array(256);for(let y=0;y<=255;y++){const S=y/255;u[y]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,gr)}_hcm_filter`,f=o.filter=_(this,K,Va).call(this,d);_(this,K,Gc).call(this,h,h,h,f),_(this,K,vv).call(this,f);const p=(y,S)=>{const m=a[y]/255,v=l[y]/255,A=new Array(S+1);for(let x=0;x<=S;x++)A[x]=m+x/S*(v-m);return A.join(",")};return _(this,K,Gc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=`url(#${d})`,o.url}addAlphaFilter(t){let i=c(this,K,Xt).get(t);if(i)return i;const[r]=_(this,K,Af).call(this,[t]),s=`alpha_${r}`;if(i=c(this,K,Xt).get(s),i)return c(this,K,Xt).set(t,i),i;const o=`g_${c(this,gr)}_alpha_map_${xn(this,Eo)._++}`,a=`url(#${o})`;c(this,K,Xt).set(t,a),c(this,K,Xt).set(s,a);const l=_(this,K,Va).call(this,o);return _(this,K,yv).call(this,r,l),a}addLuminosityFilter(t){let i=c(this,K,Xt).get(t||"luminosity");if(i)return i;let r,s;if(t?([r]=_(this,K,Af).call(this,[t]),s=`luminosity_${r}`):s="luminosity",i=c(this,K,Xt).get(s),i)return c(this,K,Xt).set(t,i),i;const o=`g_${c(this,gr)}_luminosity_map_${xn(this,Eo)._++}`,a=`url(#${o})`;c(this,K,Xt).set(t,a),c(this,K,Xt).set(s,a);const l=_(this,K,Va).call(this,o);return _(this,K,WS).call(this,l),t&&_(this,K,yv).call(this,r,l),a}addHighlightHCMFilter(t,i,r,s,o){var v;const a=`${i}-${r}-${s}-${o}`;let l=c(this,K,Ua).get(t);if((l==null?void 0:l.key)===a||(l?((v=l.filter)==null||v.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,K,Ua).set(t,l)),!i||!r))return l.url;const[u,h]=[i,r].map(_(this,K,Xc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,g]=[s,o].map(_(this,K,Xc).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),c(this,K,$a).style.color="";const y=(A,x,k)=>{const R=new Array(256),L=(f-d)/k,b=A/255,I=(x-A)/(255*k);let F=0;for(let O=0;O<=k;O++){const J=Math.round(d+O*L),Y=b+O*I;for(let W=F;W<=J;W++)R[W]=Y;F=J+1}for(let O=F;O<256;O++)R[O]=R[F-1];return R.join(",")},S=`g_${c(this,gr)}_hcm_${t}_filter`,m=l.filter=_(this,K,Va).call(this,S);return _(this,K,vv).call(this,m),_(this,K,Gc).call(this,y(p[0],g[0],5),y(p[1],g[1],5),y(p[2],g[2],5),m),l.url=`url(#${S})`,l.url}destroy(t=!1){t&&c(this,K,Ua).size!==0||(c(this,Fi)&&(c(this,Fi).parentNode.parentNode.remove(),w(this,Fi,null)),c(this,_o)&&(c(this,_o).clear(),w(this,_o,null)),w(this,Eo,0))}}_o=new WeakMap,Fi=new WeakMap,gr=new WeakMap,fn=new WeakMap,kp=new WeakMap,Eo=new WeakMap,K=new WeakSet,Xt=function(){return c(this,_o)||w(this,_o,new Map)},Ua=function(){return c(this,kp)||w(this,kp,new Map)},$a=function(){if(!c(this,Fi)){const t=c(this,fn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=c(this,fn).createElementNS(lr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),w(this,Fi,c(this,fn).createElementNS(lr,"defs")),t.append(r),r.append(c(this,Fi)),c(this,fn).body.append(t)}return c(this,Fi)},Af=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,r,s]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=r[u]/255,l[u]=s[u]/255;return[o.join(","),a.join(","),l.join(",")]},WS=function(t){const i=c(this,fn).createElementNS(lr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},vv=function(t){const i=c(this,fn).createElementNS(lr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Va=function(t){const i=c(this,fn).createElementNS(lr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),c(this,K,$a).append(i),i},Wc=function(t,i,r){const s=c(this,fn).createElementNS(lr,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},Gc=function(t,i,r,s){const o=c(this,fn).createElementNS(lr,"feComponentTransfer");s.append(o),_(this,K,Wc).call(this,o,"feFuncR",t),_(this,K,Wc).call(this,o,"feFuncG",i),_(this,K,Wc).call(this,o,"feFuncB",r)},yv=function(t,i){const r=c(this,fn).createElementNS(lr,"feComponentTransfer");i.append(r),_(this,K,Wc).call(this,r,"feFuncA",t)},Xc=function(t){return c(this,K,$a).style.color=t,O0(getComputedStyle(c(this,K,$a)).getPropertyValue("color"))};class jR extends wp{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function Eg(n,e="text"){if(Kc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class GS extends wg{_fetchData(e,t){return Eg(e,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):vg(i),compressionType:t}))}}class XS extends _g{_fetchData(e){return Eg(e,"arraybuffer").then(t=>new Uint8Array(t))}}class D0 extends M0{_createSVG(e){return document.createElementNS(lr,e)}}class Sd{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=s;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let u,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,g,y,S;u===0?(p=Math.abs(l-e[1])*t+r,g=Math.abs(a-e[0])*t+s,y=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(p=Math.abs(a-e[0])*t+r,g=Math.abs(l-e[1])*t+s,y=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*a-d*t*l,g-h*t*a-f*t*l],this.width=y,this.height=S}get rawDims(){const{viewBox:e}=this;return be(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Sd({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return Q.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Q.applyTransform([e[0],e[1]],this.transform),i=Q.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return Q.applyInverseTransform([e,t],this.transform)}}class I0 extends Zs{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function F0(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function N0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function zR(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function HR(n,e="document.pdf"){if(typeof n!="string")return e;if(F0(n))return ge('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class O_{constructor(){le(this,"started",Object.create(null));le(this,"times",[])}time(e){e in this.started&&ge(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ge(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms
`);return e.join("")}}function Kc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Sn(n){n.preventDefault()}function KS(n){console.log("Deprecated API usage: "+n)}let j_;class YS{static toDateObject(e){if(!e||typeof e!="string")return null;j_||(j_=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=j_.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(i,r,s,o,a,l))}}function BR(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new Sd({viewBox:s,scale:e,rotation:t})}function O0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ge(`Not a valid color format: "${n}"`),[0,0,0])}function UR(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,O0(i))}e.remove()}function et(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform();return[e,t,i,r,s,o]}function ar(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform().invertSelf();return[e,t,i,r,s,o]}function ba(n,e,t=!1,i=!0){if(e instanceof Sd){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=n,a=yn.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${s}px`,h=a?`round(${l}, 1px)`:`calc(${l})`,d=a?`round(${u}, 1px)`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}var Ao,So,Tn,bo,Tp,qS,ln,QS,JS,Sf,ZS,_v;const Rp=class Rp{constructor(e){E(this,ln);E(this,Ao,null);E(this,So,null);E(this,Tn);E(this,bo,null);w(this,Tn,e)}render(){const e=w(this,Ao,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,Tn)._uiManager._signal;e.addEventListener("contextmenu",Sn,{signal:t}),e.addEventListener("pointerdown",_(Rp,Tp,qS),{signal:t});const i=w(this,bo,document.createElement("div"));i.className="buttons",e.append(i);const r=c(this,Tn).toolbarPosition;if(r){const{style:s}=e,o=c(this,Tn)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return _(this,ln,ZS).call(this),e}hide(){var e;c(this,Ao).classList.add("hidden"),(e=c(this,So))==null||e.hideDropdown()}show(){c(this,Ao).classList.remove("hidden")}addAltTextButton(e){_(this,ln,Sf).call(this,e),c(this,bo).prepend(e,c(this,ln,_v))}addColorPicker(e){w(this,So,e);const t=e.renderButton();_(this,ln,Sf).call(this,t),c(this,bo).prepend(t,c(this,ln,_v))}remove(){var e;c(this,Ao).remove(),(e=c(this,So))==null||e.destroy(),w(this,So,null)}};Ao=new WeakMap,So=new WeakMap,Tn=new WeakMap,bo=new WeakMap,Tp=new WeakSet,qS=function(e){e.stopPropagation()},ln=new WeakSet,QS=function(e){c(this,Tn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},JS=function(e){c(this,Tn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Sf=function(e){const t=c(this,Tn)._uiManager._signal;e.addEventListener("focusin",_(this,ln,QS).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",_(this,ln,JS).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Sn,{signal:t})},ZS=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${c(this,Tn).editorType}-button`),_(this,ln,Sf).call(this,e),e.addEventListener("click",t=>{c(this,Tn)._uiManager.delete()},{signal:c(this,Tn)._uiManager._signal}),c(this,bo).append(e)},_v=function(){const e=document.createElement("div");return e.className="divider",e},E(Rp,Tp);let wv=Rp;var Hu,xo,Co,Ks,eb,tb,nb;class $R{constructor(e){E(this,Ks);E(this,Hu,null);E(this,xo,null);E(this,Co);w(this,Co,e)}show(e,t,i){const[r,s]=_(this,Ks,tb).call(this,t,i),{style:o}=c(this,xo)||w(this,xo,_(this,Ks,eb).call(this));e.append(c(this,xo)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,xo).remove()}}Hu=new WeakMap,xo=new WeakMap,Co=new WeakMap,Ks=new WeakSet,eb=function(){const e=w(this,xo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Sn,{signal:c(this,Co)._signal});const t=w(this,Hu,document.createElement("div"));return t.className="buttons",e.append(t),_(this,Ks,nb).call(this),e},tb=function(e,t){let i=0,r=0;for(const s of e){const o=s.y+s.height;if(o<i)continue;const a=s.x+(t?s.width:0);if(o>i){r=a,i=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,i]},nb=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=c(this,Co)._signal;e.addEventListener("contextmenu",Sn,{signal:i}),e.addEventListener("click",()=>{c(this,Co).highlightSelection("floating_button")},{signal:i}),c(this,Hu).append(e)};function _p(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function VR(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Pp;class WR{constructor(){E(this,Pp,0)}get id(){return`${SR}${xn(this,Pp)._++}`}}Pp=new WeakMap;var Bu,Lp,Kn,Uu,Av;const $0=class $0{constructor(){E(this,Uu);E(this,Bu,NR());E(this,Lp,0);E(this,Kn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return be(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:s}=e;return _(this,Uu,Av).call(this,`${t}_${i}_${r}_${s}`,e)}async getFromUrl(e){return _(this,Uu,Av).call(this,e,e)}async getFromId(e){c(this,Kn)||w(this,Kn,new Map);const t=c(this,Kn).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=c(this,Kn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){c(this,Kn)||w(this,Kn,new Map);const t=c(this,Kn).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${c(this,Bu)}_`)}};Bu=new WeakMap,Lp=new WeakMap,Kn=new WeakMap,Uu=new WeakSet,Av=async function(e,t){c(this,Kn)||w(this,Kn,new Map);let i=c(this,Kn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,Bu)}_${xn(this,Lp)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await Eg(t,"blob")):r=i.file=t,r.type==="image/svg+xml"){const s=$0._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(r),await l}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return c(this,Kn).set(e,i),i&&c(this,Kn).set(i.id,i),i};let Ev=$0;var Tt,ps,$u,Rt;class GR{constructor(e=128){E(this,Tt,[]);E(this,ps,!1);E(this,$u);E(this,Rt,-1);w(this,$u,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),c(this,ps))return;const l={cmd:e,undo:t,post:i,type:s};if(c(this,Rt)===-1){c(this,Tt).length>0&&(c(this,Tt).length=0),w(this,Rt,0),c(this,Tt).push(l);return}if(o&&c(this,Tt)[c(this,Rt)].type===s){a&&(l.undo=c(this,Tt)[c(this,Rt)].undo),c(this,Tt)[c(this,Rt)]=l;return}const u=c(this,Rt)+1;u===c(this,$u)?c(this,Tt).splice(0,1):(w(this,Rt,u),u<c(this,Tt).length&&c(this,Tt).splice(u)),c(this,Tt).push(l)}undo(){if(c(this,Rt)===-1)return;w(this,ps,!0);const{undo:e,post:t}=c(this,Tt)[c(this,Rt)];e(),t==null||t(),w(this,ps,!1),w(this,Rt,c(this,Rt)-1)}redo(){if(c(this,Rt)<c(this,Tt).length-1){w(this,Rt,c(this,Rt)+1),w(this,ps,!0);const{cmd:e,post:t}=c(this,Tt)[c(this,Rt)];e(),t==null||t(),w(this,ps,!1)}}hasSomethingToUndo(){return c(this,Rt)!==-1}hasSomethingToRedo(){return c(this,Rt)<c(this,Tt).length-1}destroy(){w(this,Tt,null)}}Tt=new WeakMap,ps=new WeakMap,$u=new WeakMap,Rt=new WeakMap;var Mp,ib;class bd{constructor(e){E(this,Mp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=yn.platform;for(const[i,r,s={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(_(this,Mp,ib).call(this,t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(r.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}Mp=new WeakSet,ib=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Dp=class Dp{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return UR(e),be(this,"_colors",e)}convert(e){const t=O0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,o)=>s===t[o]))return Dp._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?Q.makeHexColor(...t):e}};le(Dp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Sv=Dp;var yl,Rn,wt,It,wl,mr,_l,hi,El,ko,Ni,di,To,Vu,Wu,Oi,Al,gs,ji,Ip,ms,Gu,Ro,Xu,Sl,Ft,Pe,vr,Po,Ku,Yu,qu,Qu,Ju,Zu,eh,th,nh,ih,rh,sh,oh,vs,zi,yr,ah,$,bf,rb,sb,xf,ob,ab,lb,bv,cb,xv,Cv,ub,en,os,hb,db,kv,fb,Yc,Tv;const al=class al{constructor(e,t,i,r,s,o,a,l,u){E(this,$);E(this,yl,new AbortController);E(this,Rn,null);E(this,wt,new Map);E(this,It,new Map);E(this,wl,null);E(this,mr,null);E(this,_l,null);E(this,hi,new GR);E(this,El,0);E(this,ko,new Set);E(this,Ni,null);E(this,di,null);E(this,To,new Set);E(this,Vu,!1);E(this,Wu,null);E(this,Oi,null);E(this,Al,null);E(this,gs,!1);E(this,ji,null);E(this,Ip,new WR);E(this,ms,!1);E(this,Gu,!1);E(this,Ro,null);E(this,Xu,null);E(this,Sl,null);E(this,Ft,Ae.NONE);E(this,Pe,new Set);E(this,vr,null);E(this,Po,null);E(this,Ku,null);E(this,Yu,this.blur.bind(this));E(this,qu,this.focus.bind(this));E(this,Qu,this.copy.bind(this));E(this,Ju,this.cut.bind(this));E(this,Zu,this.paste.bind(this));E(this,eh,this.keydown.bind(this));E(this,th,this.keyup.bind(this));E(this,nh,this.onEditingAction.bind(this));E(this,ih,this.onPageChanging.bind(this));E(this,rh,this.onScaleChanging.bind(this));E(this,sh,this.onRotationChanging.bind(this));E(this,oh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,vs,[0,0]);E(this,zi,null);E(this,yr,null);E(this,ah,null);this._signal=c(this,yl).signal,w(this,yr,e),w(this,ah,t),w(this,wl,i),this._eventBus=r,this._eventBus._on("editingaction",c(this,nh)),this._eventBus._on("pagechanging",c(this,ih)),this._eventBus._on("scalechanging",c(this,rh)),this._eventBus._on("rotationchanging",c(this,sh)),_(this,$,ob).call(this),_(this,$,ub).call(this),_(this,$,bv).call(this),w(this,mr,s.annotationStorage),w(this,Wu,s.filterFactory),w(this,Po,o),w(this,Al,a||null),w(this,Vu,l),w(this,Sl,u||null),this.viewParameters={realScale:Xs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=al.prototype,t=o=>c(o,yr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return be(this,"_keyboardManager",new bd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,yr).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,yr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i;(e=c(this,yl))==null||e.abort(),w(this,yl,null),this._signal=null,this._eventBus._off("editingaction",c(this,nh)),this._eventBus._off("pagechanging",c(this,ih)),this._eventBus._off("scalechanging",c(this,rh)),this._eventBus._off("rotationchanging",c(this,sh));for(const r of c(this,It).values())r.destroy();c(this,It).clear(),c(this,wt).clear(),c(this,To).clear(),w(this,Rn,null),c(this,Pe).clear(),c(this,hi).destroy(),(t=c(this,wl))==null||t.destroy(),(i=c(this,ji))==null||i.hide(),w(this,ji,null),c(this,Oi)&&(clearTimeout(c(this,Oi)),w(this,Oi,null)),c(this,zi)&&(clearTimeout(c(this,zi)),w(this,zi,null))}async mlGuess(e){var t;return((t=c(this,Sl))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!c(this,Sl)}get hcmFilter(){return be(this,"hcmFilter",c(this,Po)?c(this,Wu).addHCMFilter(c(this,Po).foreground,c(this,Po).background):"none")}get direction(){return be(this,"direction",getComputedStyle(c(this,yr)).direction)}get highlightColors(){return be(this,"highlightColors",c(this,Al)?new Map(c(this,Al).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return be(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){w(this,Xu,e)}editAltText(e){var t;(t=c(this,wl))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){w(this,El,e-1)}focusMainContainer(){c(this,yr).focus()}findParent(e,t){for(const i of c(this,It).values()){const{x:r,y:s,width:o,height:a}=i.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=s&&t<=s+a)return i}return null}disableUserSelect(e=!1){c(this,ah).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,To).add(e)}removeShouldRescale(e){c(this,To).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Xs.PDF_TO_CSS_UNITS;for(const t of c(this,To))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}=t,a=t.toString(),u=_(this,$,bf).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(h){t.empty(),c(this,Ft)===Ae.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Ae.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const d of c(this,It).values())if(d.hasTextLayer(u)){d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&c(this,mr)&&!c(this,mr).has(e.id)&&c(this,mr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,gs)&&(w(this,gs,!1),_(this,$,xf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Pe))if(t.div.contains(e)){w(this,Ro,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Ro))return;const[e,t]=c(this,Ro);w(this,Ro,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){_(this,$,bv).call(this),_(this,$,xv).call(this)}removeEditListeners(){_(this,$,cb).call(this),_(this,$,Cv).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of c(this,di))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of c(this,di))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=c(this,Rn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,Pe)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of c(this,di))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){ge(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const l of i){const u=r.deserialize(l);if(!u)return;s.push(u)}const o=()=>{for(const l of s)_(this,$,kv).call(this,l);_(this,$,Tv).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){ge(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Ft)!==Ae.NONE&&!this.isEditorHandlingKeyboard&&al._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,gs)&&(w(this,gs,!1),_(this,$,xf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(_(this,$,ab).call(this),_(this,$,xv).call(this),_(this,$,en).call(this,{isEditing:c(this,Ft)!==Ae.NONE,isEmpty:_(this,$,Yc).call(this),hasSomethingToUndo:c(this,hi).hasSomethingToUndo(),hasSomethingToRedo:c(this,hi).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,$,lb).call(this),_(this,$,Cv).call(this),_(this,$,en).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,di)){w(this,di,e);for(const t of c(this,di))_(this,$,os).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Ip).id}get currentLayer(){return c(this,It).get(c(this,El))}getLayer(e){return c(this,It).get(e)}get currentPageIndex(){return c(this,El)}addLayer(e){c(this,It).set(e.pageIndex,e),c(this,ms)?e.enable():e.disable()}removeLayer(e){c(this,It).delete(e.pageIndex)}updateMode(e,t=null,i=!1){if(c(this,Ft)!==e){if(w(this,Ft,e),e===Ae.NONE){this.setEditingState(!1),_(this,$,db).call(this);return}this.setEditingState(!0),_(this,$,hb).call(this),this.unselectAll();for(const r of c(this,It).values())r.updateMode(e);if(!t&&i){this.addNewEditorFromKeyboard();return}if(t){for(const r of c(this,wt).values())if(r.annotationElementId===t){this.setSelected(r),r.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,Ft)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(c(this,di)){switch(e){case oe.CREATE:this.currentLayer.addNewEditor();return;case oe.HIGHLIGHT_DEFAULT_COLOR:(i=c(this,Xu))==null||i.updateColor(t);break;case oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Ku)||w(this,Ku,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of c(this,Pe))r.updateParams(e,t);for(const r of c(this,di))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const o of c(this,wt).values())o.editorType===e&&o.show(t);(((s=c(this,Ku))==null?void 0:s.get(oe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&_(this,$,os).call(this,[[oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Gu)!==e){w(this,Gu,e);for(const t of c(this,It).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of c(this,wt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return c(this,wt).get(e)}addEditor(e){c(this,wt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,Oi)&&clearTimeout(c(this,Oi)),w(this,Oi,setTimeout(()=>{this.focusMainContainer(),w(this,Oi,null)},0))),c(this,wt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,ko).has(e.annotationElementId))&&((t=c(this,mr))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,ko).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,ko).has(e)}removeDeletedAnnotationElement(e){c(this,ko).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Rn)!==e&&(w(this,Rn,e),e&&_(this,$,os).call(this,e.propertiesToUpdate))}updateUI(e){c(this,$,fb)===e&&_(this,$,os).call(this,e.propertiesToUpdate)}toggleSelected(e){if(c(this,Pe).has(e)){c(this,Pe).delete(e),e.unselect(),_(this,$,en).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Pe).add(e),e.select(),_(this,$,os).call(this,e.propertiesToUpdate),_(this,$,en).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of c(this,Pe))t!==e&&t.unselect();c(this,Pe).clear(),c(this,Pe).add(e),e.select(),_(this,$,os).call(this,e.propertiesToUpdate),_(this,$,en).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Pe).has(e)}get firstSelectedEditor(){return c(this,Pe).values().next().value}unselect(e){e.unselect(),c(this,Pe).delete(e),_(this,$,en).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Pe).size!==0}get isEnterHandled(){return c(this,Pe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,hi).undo(),_(this,$,en).call(this,{hasSomethingToUndo:c(this,hi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,$,Yc).call(this)})}redo(){c(this,hi).redo(),_(this,$,en).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,hi).hasSomethingToRedo(),isEmpty:_(this,$,Yc).call(this)})}addCommands(e){c(this,hi).add(e),_(this,$,en).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,$,Yc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...c(this,Pe)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)_(this,$,kv).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Rn))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Rn)||this.hasSelection}selectAll(){for(const e of c(this,Pe))e.commit();_(this,$,Tv).call(this,c(this,wt).values())}unselectAll(){if(!(c(this,Rn)&&(c(this,Rn).commitOrRemove(),c(this,Ft)!==Ae.NONE))&&this.hasSelection){for(const e of c(this,Pe))e.unselect();c(this,Pe).clear(),_(this,$,en).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,vs)[0]+=e,c(this,vs)[1]+=t;const[r,s]=c(this,vs),o=[...c(this,Pe)],a=1e3;c(this,zi)&&clearTimeout(c(this,zi)),w(this,zi,setTimeout(()=>{w(this,zi,null),c(this,vs)[0]=c(this,vs)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,wt).has(l.id)&&l.translateInPage(r,s)},undo:()=>{for(const l of o)c(this,wt).has(l.id)&&l.translateInPage(-r,-s)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,Ni,new Map);for(const e of c(this,Pe))c(this,Ni).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Ni))return!1;this.disableUserSelect(!1);const e=c(this,Ni);w(this,Ni,null);let t=!1;for(const[{x:r,y:s,pageIndex:o},a]of e)a.newX=r,a.newY=s,a.newPageIndex=o,t||(t=r!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const i=(r,s,o,a)=>{if(c(this,wt).has(r.id)){const l=c(this,It).get(a);l?r._setParentAndPosition(l,s,o):(r.pageIndex=a,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:a}]of e)i(r,s,o,a)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:a}]of e)i(r,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Ni))for(const i of c(this,Ni).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Pe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Rn)===e}getActive(){return c(this,Rn)}getMode(){return c(this,Ft)}get imageManager(){return be(this,"imageManager",new Ev)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-r)/o,y:1-(u+d-i)/s,width:f/o,height:d/s});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-i)/s,y:1-(h+f-r)/o,width:d/s,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-r)/o,y:(u-i)/s,width:f/o,height:d/s});break;default:a=(u,h,d,f)=>({x:(u-i)/s,y:(h-r)/o,width:d/s,height:f/o});break}const l=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:g,height:y}of d.getClientRects())g===0||y===0||l.push(a(f,p,g,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,_l)||w(this,_l,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,_l))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,_l))==null?void 0:r.get(e.data.id);if(!t)return;const i=c(this,mr).getRawValue(t);i&&(c(this,Ft)===Ae.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};yl=new WeakMap,Rn=new WeakMap,wt=new WeakMap,It=new WeakMap,wl=new WeakMap,mr=new WeakMap,_l=new WeakMap,hi=new WeakMap,El=new WeakMap,ko=new WeakMap,Ni=new WeakMap,di=new WeakMap,To=new WeakMap,Vu=new WeakMap,Wu=new WeakMap,Oi=new WeakMap,Al=new WeakMap,gs=new WeakMap,ji=new WeakMap,Ip=new WeakMap,ms=new WeakMap,Gu=new WeakMap,Ro=new WeakMap,Xu=new WeakMap,Sl=new WeakMap,Ft=new WeakMap,Pe=new WeakMap,vr=new WeakMap,Po=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,qu=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,eh=new WeakMap,th=new WeakMap,nh=new WeakMap,ih=new WeakMap,rh=new WeakMap,sh=new WeakMap,oh=new WeakMap,vs=new WeakMap,zi=new WeakMap,yr=new WeakMap,ah=new WeakMap,$=new WeakSet,bf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},rb=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=_(this,$,bf).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(c(this,ji)||w(this,ji,new $R(this)),c(this,ji).show(i,r,this.direction==="ltr"))},sb=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){c(this,vr)&&((s=c(this,ji))==null||s.hide(),w(this,vr,null),_(this,$,en).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,vr))return;if(!_(this,$,bf).call(this,e).closest(".textLayer")){c(this,vr)&&((o=c(this,ji))==null||o.hide(),w(this,vr,null),_(this,$,en).call(this,{hasSelectedText:!1}));return}if((a=c(this,ji))==null||a.hide(),w(this,vr,t),_(this,$,en).call(this,{hasSelectedText:!0}),!(c(this,Ft)!==Ae.HIGHLIGHT&&c(this,Ft)!==Ae.NONE)&&(c(this,Ft)===Ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,gs,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=this._signal,u=h=>{h.type==="pointerup"&&h.button!==0||(window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),h.type==="pointerup"&&_(this,$,xf).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:l}),window.addEventListener("blur",u,{signal:l})}},xf=function(e=""){c(this,Ft)===Ae.HIGHLIGHT?this.highlightSelection(e):c(this,Vu)&&_(this,$,rb).call(this)},ob=function(){document.addEventListener("selectionchange",_(this,$,sb).bind(this),{signal:this._signal})},ab=function(){const e=this._signal;window.addEventListener("focus",c(this,qu),{signal:e}),window.addEventListener("blur",c(this,Yu),{signal:e})},lb=function(){window.removeEventListener("focus",c(this,qu)),window.removeEventListener("blur",c(this,Yu))},bv=function(){const e=this._signal;window.addEventListener("keydown",c(this,eh),{signal:e}),window.addEventListener("keyup",c(this,th),{signal:e})},cb=function(){window.removeEventListener("keydown",c(this,eh)),window.removeEventListener("keyup",c(this,th))},xv=function(){const e=this._signal;document.addEventListener("copy",c(this,Qu),{signal:e}),document.addEventListener("cut",c(this,Ju),{signal:e}),document.addEventListener("paste",c(this,Zu),{signal:e})},Cv=function(){document.removeEventListener("copy",c(this,Qu)),document.removeEventListener("cut",c(this,Ju)),document.removeEventListener("paste",c(this,Zu))},ub=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},en=function(e){Object.entries(e).some(([i,r])=>c(this,oh)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,oh),e)}),c(this,Ft)===Ae.HIGHLIGHT&&e.hasSelectedEditor===!1&&_(this,$,os).call(this,[[oe.HIGHLIGHT_FREE,!0]]))},os=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},hb=function(){if(!c(this,ms)){w(this,ms,!0);for(const e of c(this,It).values())e.enable();for(const e of c(this,wt).values())e.enable()}},db=function(){if(this.unselectAll(),c(this,ms)){w(this,ms,!1);for(const e of c(this,It).values())e.disable();for(const e of c(this,wt).values())e.disable()}},kv=function(e){const t=c(this,It).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},fb=function(){let e=null;for(e of c(this,Pe));return e},Yc=function(){if(c(this,wt).size===0)return!0;if(c(this,wt).size===1)for(const e of c(this,wt).values())return e.isEmpty();return!1},Tv=function(e){for(const t of c(this,Pe))t.unselect();c(this,Pe).clear();for(const t of e)t.isEmpty()||(c(this,Pe).add(t),t.select());_(this,$,en).call(this,{hasSelectedEditor:this.hasSelection})},le(al,"TRANSLATE_SMALL",1),le(al,"TRANSLATE_BIG",10);let xa=al;var wr,_r,fi,Er,Pn,bl,pi,lh,Rv;const ur=class ur{constructor(e){E(this,lh);E(this,wr,"");E(this,_r,!1);E(this,fi,null);E(this,Er,null);E(this,Pn,null);E(this,bl,!1);E(this,pi,null);w(this,pi,e)}static initialize(e){ur._l10nPromise||(ur._l10nPromise=e)}async render(){const e=w(this,fi,document.createElement("button"));e.className="altText";const t=await ur._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const i=c(this,pi)._uiManager._signal;e.addEventListener("contextmenu",Sn,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),c(this,pi)._uiManager.editAltText(c(this,pi))};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(w(this,bl,!0),r(s))},{signal:i}),await _(this,lh,Rv).call(this),e}finish(){c(this,fi)&&(c(this,fi).focus({focusVisible:c(this,bl)}),w(this,bl,!1))}isEmpty(){return!c(this,wr)&&!c(this,_r)}get data(){return{altText:c(this,wr),decorative:c(this,_r)}}set data({altText:e,decorative:t}){c(this,wr)===e&&c(this,_r)===t||(w(this,wr,e),w(this,_r,t),_(this,lh,Rv).call(this))}toggle(e=!1){c(this,fi)&&(!e&&c(this,Pn)&&(clearTimeout(c(this,Pn)),w(this,Pn,null)),c(this,fi).disabled=!e)}destroy(){var e;(e=c(this,fi))==null||e.remove(),w(this,fi,null),w(this,Er,null)}};wr=new WeakMap,_r=new WeakMap,fi=new WeakMap,Er=new WeakMap,Pn=new WeakMap,bl=new WeakMap,pi=new WeakMap,lh=new WeakSet,Rv=async function(){var r;const e=c(this,fi);if(!e)return;if(!c(this,wr)&&!c(this,_r)){e.classList.remove("done"),(r=c(this,Er))==null||r.remove();return}e.classList.add("done"),ur._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(s=>{e.setAttribute("aria-label",s)});let t=c(this,Er);if(!t){w(this,Er,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const s=t.id=`alt-text-tooltip-${c(this,pi).id}`;e.setAttribute("aria-describedby",s);const o=100,a=c(this,pi)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(c(this,Pn)),w(this,Pn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{w(this,Pn,setTimeout(()=>{w(this,Pn,null),c(this,Er).classList.add("show"),c(this,pi)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),e.addEventListener("mouseleave",()=>{var l;c(this,Pn)&&(clearTimeout(c(this,Pn)),w(this,Pn,null)),(l=c(this,Er))==null||l.classList.remove("show")},{signal:a})}t.innerText=c(this,_r)?await ur._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):c(this,wr),t.parentNode||e.append(t);const i=c(this,pi).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},le(ur,"_l10nPromise",null);let Ep=ur;var Lo,gi,Kt,xl,Mo,Nt,Do,Cl,kl,Yt,ch,Io,ys,uh,Fo,Ar,Hi,Tl,Rl,Yn,hh,Fp,me,Pv,dh,Lv,Mv,pb,gb,Dv,Iv,Fv,mb,vb,yb,wb,Nv,qc;const Be=class Be{constructor(e){E(this,me);E(this,Lo,null);E(this,gi,null);E(this,Kt,null);E(this,xl,!1);E(this,Mo,!1);E(this,Nt,null);E(this,Do,null);E(this,Cl,this.focusin.bind(this));E(this,kl,this.focusout.bind(this));E(this,Yt,null);E(this,ch,"");E(this,Io,!1);E(this,ys,null);E(this,uh,!1);E(this,Fo,!1);E(this,Ar,!1);E(this,Hi,null);E(this,Tl,0);E(this,Rl,0);E(this,Yn,null);le(this,"_initialOptions",Object.create(null));le(this,"_isVisible",!0);le(this,"_uiManager",null);le(this,"_focusEventsAllowed",!0);le(this,"_l10nPromise",null);E(this,hh,!1);E(this,Fp,Be._zIndex++);this.constructor===Be&&Oe("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Be.prototype._resizeWithKeyboard,t=xa.TRANSLATE_SMALL,i=xa.TRANSLATE_BIG;return be(this,"_resizerKeyboardManager",new bd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Be.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return be(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new XR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,i){if(Be._l10nPromise||(Be._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(s=>[s,e.get(s.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),i!=null&&i.strings)for(const s of i.strings)Be._l10nPromise.set(s,e.get(s));if(Be._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Be._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Oe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,hh)}set _isDraggable(e){var t;w(this,hh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Fp)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):_(this,me,qc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Io)?w(this,Io,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/o,this.fixAndSetPosition()}translate(e,t){_(this,me,Pv).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,ys)||w(this,ys,[this.x,this.y]),_(this,me,Pv).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,ys)||w(this,ys,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,l]=this.getBaseTranslation();s+=a,o+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,ys)&&(c(this,ys)[0]!==this.x||c(this,ys)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Be,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:s,width:o,height:a}=this;if(o*=t,a*=i,r*=t,s*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),s=Math.max(0,Math.min(i-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(i,Math.max(o,s));break;case 180:r=Math.min(t,Math.max(o,r)),s=Math.min(i,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(i-o,s));break}this.x=r/=t,this.y=s/=i;const[l,u]=this.getBaseTranslation();r+=l,s+=u;const{style:h}=this.div;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return _(i=Be,dh,Lv).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return _(i=Be,dh,Lv).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,r=t*e,s=i*e;return yn.isCSSRoundSupported?[Math.round(r),Math.round(s)]:[r,s]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,c(this,Mo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!c(this,Mo)&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!c(this,Mo)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=c(this,Kt))==null||e.finish()}async addEditToolbar(){return c(this,Yt)||c(this,Fo)?c(this,Yt):(w(this,Yt,new wv(this)),this.div.append(c(this,Yt).render()),c(this,Kt)&&c(this,Yt).addAltTextButton(await c(this,Kt).render()),c(this,Yt))}removeEditToolbar(){var e;c(this,Yt)&&(c(this,Yt).remove(),w(this,Yt,null),(e=c(this,Kt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Kt)||(Ep.initialize(Be._l10nPromise),w(this,Kt,new Ep(this)),c(this,Lo)&&(c(this,Kt).data=c(this,Lo),w(this,Lo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,Kt))==null?void 0:e.data}set altTextData(e){c(this,Kt)&&(c(this,Kt).data=e)}hasAltText(){var e;return!((e=c(this,Kt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,xl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",c(this,Cl),{signal:e}),this.div.addEventListener("focusout",c(this,kl),{signal:e});const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),_p(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(w(this,Io,!0),this._isDraggable){_(this,me,mb).call(this,e);return}_(this,me,Fv).call(this,e)}moveInDOM(){c(this,Hi)&&clearTimeout(c(this,Hi)),w(this,Hi,setTimeout(()=>{var e;w(this,Hi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/r,h=t/r,d=this.x*s,f=this.y*o,p=this.width*s,g=this.height*o;switch(i){case 0:return[d+u+a,o-f-h-g+l,d+u+p+a,o-f-h+l];case 90:return[d+h+a,o-f+u+l,d+h+g+a,o-f+u+p+l];case 180:return[d-u-p+a,o-f+h+l,d-u+a,o-f+h+g+l];case 270:return[d-h-g+a,o-f-u-p+l,d-h+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,o]=e,a=s-i,l=o-r;switch(this.rotation){case 0:return[i,t-o,a,l];case 90:return[i,t-r,l,a];case 180:return[s,t-r,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){w(this,Fo,!0)}disableEditMode(){w(this,Fo,!1)}isInEditMode(){return c(this,Fo)}shouldGetKeyboardEvents(){return c(this,Ar)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,i;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",c(this,Cl),{signal:e}),(i=this.div)==null||i.addEventListener("focusout",c(this,kl),{signal:e})}rotate(e){}serialize(e=!1,t=null){Oe("An editor must be serializable")}static deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,w(r,Lo,e.accessibilityData);const[s,o]=r.pageDimensions,[a,l,u,h]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=l/o,r.width=u/s,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",c(this,Cl)),this.div.removeEventListener("focusout",c(this,kl)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Hi)&&(clearTimeout(c(this,Hi)),w(this,Hi,null)),_(this,me,qc).call(this),this.removeEditToolbar(),c(this,Yn)){for(const e of c(this,Yn).values())clearTimeout(e);w(this,Yn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,me,pb).call(this),c(this,Nt).classList.remove("hidden"),_p(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),w(this,Do,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Nt).children;if(!c(this,gi)){w(this,gi,Array.from(t));const o=_(this,me,vb).bind(this),a=_(this,me,yb).bind(this),l=this._uiManager._signal;for(const u of c(this,gi)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",_(this,me,wb).bind(this,h),{signal:l}),Be._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>u.setAttribute("aria-label",d))}}const i=c(this,gi)[0];let r=0;for(const o of t){if(o===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(c(this,gi).length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)c(this,Nt).append(c(this,Nt).firstChild);else if(s>r)for(let a=0;a<s-r;a++)c(this,Nt).firstChild.before(c(this,Nt).lastChild);let o=0;for(const a of t){const u=c(this,gi)[o++].getAttribute("data-resizer-name");Be._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(h=>a.setAttribute("aria-label",h))}}_(this,me,Nv).call(this,0),w(this,Ar,!0),c(this,Nt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Ar)&&_(this,me,Iv).call(this,c(this,ch),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){_(this,me,qc).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!c(this,Yt)){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=c(this,Yt))==null||r.show())});return}(t=c(this,Yt))==null||t.show()}unselect(){var e,t,i,r;(e=c(this,Nt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=c(this,Yt))==null||r.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,uh)}set isEditing(e){w(this,uh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){w(this,Mo,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,Yn)||w(this,Yn,new Map);const{action:i}=e;let r=c(this,Yn).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,Yn).delete(i),c(this,Yn).size===0&&w(this,Yn,null)},Be._telemetryTimeout),c(this,Yn).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),w(this,xl,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,xl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Lo=new WeakMap,gi=new WeakMap,Kt=new WeakMap,xl=new WeakMap,Mo=new WeakMap,Nt=new WeakMap,Do=new WeakMap,Cl=new WeakMap,kl=new WeakMap,Yt=new WeakMap,ch=new WeakMap,Io=new WeakMap,ys=new WeakMap,uh=new WeakMap,Fo=new WeakMap,Ar=new WeakMap,Hi=new WeakMap,Tl=new WeakMap,Rl=new WeakMap,Yn=new WeakMap,hh=new WeakMap,Fp=new WeakMap,me=new WeakSet,Pv=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},dh=new WeakSet,Lv=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Mv=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},pb=function(){if(c(this,Nt))return;w(this,Nt,document.createElement("div")),c(this,Nt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");c(this,Nt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",_(this,me,gb).bind(this,i),{signal:t}),r.addEventListener("contextmenu",Sn,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Nt))},gb=function(e,t){var y;t.preventDefault();const{isMac:i}=yn.platform;if(t.button!==0||t.ctrlKey&&i)return;(y=c(this,Kt))==null||y.toggle(!1);const r=_(this,me,Iv).bind(this,e),s=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,a),window.addEventListener("contextmenu",Sn,{signal:o});const l=this.x,u=this.y,h=this.width,d=this.height,f=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var S;this.parent.togglePointerEvents(!0),(S=c(this,Kt))==null||S.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",r,a),window.removeEventListener("contextmenu",Sn),this.parent.div.style.cursor=f,this.div.style.cursor=p,_(this,me,Dv).call(this,l,u,h,d)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})},Dv=function(e,t,i,r){const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===i&&l===r||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=o;const[u,h]=this.parentDimensions;this.setDims(u*a,h*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*i,h*r),this.fixAndSetPosition()},mustExec:!0})},Iv=function(e,t){const[i,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,u=Be.MIN_SIZE/i,h=Be.MIN_SIZE/r,d=U=>Math.round(U*1e4)/1e4,f=_(this,me,Mv).call(this,this.rotation),p=(U,N)=>[f[0]*U+f[2]*N,f[1]*U+f[3]*N],g=_(this,me,Mv).call(this,360-this.rotation),y=(U,N)=>[g[0]*U+g[2]*N,g[1]*U+g[3]*N];let S,m,v=!1,A=!1;switch(e){case"topLeft":v=!0,S=(U,N)=>[0,0],m=(U,N)=>[U,N];break;case"topMiddle":S=(U,N)=>[U/2,0],m=(U,N)=>[U/2,N];break;case"topRight":v=!0,S=(U,N)=>[U,0],m=(U,N)=>[0,N];break;case"middleRight":A=!0,S=(U,N)=>[U,N/2],m=(U,N)=>[0,N/2];break;case"bottomRight":v=!0,S=(U,N)=>[U,N],m=(U,N)=>[0,0];break;case"bottomMiddle":S=(U,N)=>[U/2,N],m=(U,N)=>[U/2,0];break;case"bottomLeft":v=!0,S=(U,N)=>[0,N],m=(U,N)=>[U,0];break;case"middleLeft":A=!0,S=(U,N)=>[0,N/2],m=(U,N)=>[U,N/2];break}const x=S(a,l),k=m(a,l);let R=p(...k);const L=d(s+R[0]),b=d(o+R[1]);let I=1,F=1,[O,J]=this.screenToPageTranslation(t.movementX,t.movementY);if([O,J]=y(O/i,J/r),v){const U=Math.hypot(a,l);I=F=Math.max(Math.min(Math.hypot(k[0]-x[0]-O,k[1]-x[1]-J)/U,1/a,1/l),u/a,h/l)}else A?I=Math.max(u,Math.min(1,Math.abs(k[0]-x[0]-O)))/a:F=Math.max(h,Math.min(1,Math.abs(k[1]-x[1]-J)))/l;const Y=d(a*I),W=d(l*F);R=p(...m(Y,W));const se=L-R[0],ae=b-R[1];this.width=Y,this.height=W,this.x=se,this.y=ae,this.setDims(i*Y,r*W),this.fixAndSetPosition()},Fv=function(e){const{isMac:t}=yn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},mb=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,r;const s=this._uiManager._signal;t&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:s},w(this,Tl,e.clientX),w(this,Rl,e.clientY),r=a=>{const{clientX:l,clientY:u}=a,[h,d]=this.screenToPageTranslation(l-c(this,Tl),u-c(this,Rl));w(this,Tl,l),w(this,Rl,u),this._uiManager.dragSelectedEditors(h,d)},window.addEventListener("pointermove",r,i));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",r,i)),w(this,Io,!1),this._uiManager.endDragSession()||_(this,me,Fv).call(this,e)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})},vb=function(e){Be._resizerKeyboardManager.exec(this,e)},yb=function(e){var t;c(this,Ar)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Nt)&&_(this,me,qc).call(this)},wb=function(e){w(this,ch,c(this,Ar)?e:"")},Nv=function(e){if(c(this,gi))for(const t of c(this,gi))t.tabIndex=e},qc=function(){if(w(this,Ar,!1),_(this,me,Nv).call(this,-1),c(this,Do)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=c(this,Do);_(this,me,Dv).call(this,e,t,i,r),w(this,Do,null)}},E(Be,dh),le(Be,"_borderLineWidth",-1),le(Be,"_colorManager",new Sv),le(Be,"_zIndex",1),le(Be,"_telemetryTimeout",1e3);let Le=Be;class XR extends Le{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const z_=3285377520,Xn=4294901760,Di=65535;class _b{constructor(e){this.h1=e?e&4294967295:z_,this.h2=e?e&4294967295:z_}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let y=0,S=e.length;y<S;y++){const m=e.charCodeAt(y);m<=255?t[i++]=m:(t[i++]=m>>>8,t[i++]=m&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Di,g=f&Di;for(let y=0;y<r;y++)y&1?(a=o[y],a=a*d&Xn|a*p&Di,a=a<<15|a>>>17,a=a*f&Xn|a*g&Di,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[y],l=l*d&Xn|l*p&Di,l=l<<15|l>>>17,l=l*f&Xn|l*g&Di,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,s){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*d&Xn|a*p&Di,a=a<<15|a>>>17,a=a*f&Xn|a*g&Di,r&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Xn|e*36045&Di,t=t*4283543511&Xn|((t<<16|e>>>16)*2950163797&Xn)>>>16,e^=t>>>1,e=e*444984403&Xn|e*60499&Di,t=t*3301882366&Xn|((t<<16|e>>>16)*3120437893&Xn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ov=Object.freeze({map:null,hash:"",transfer:void 0});var No,Ot,Np,Eb;class j0{constructor(){E(this,Np);E(this,No,!1);E(this,Ot,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=c(this,Ot).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return c(this,Ot).get(e)}remove(e){if(c(this,Ot).delete(e),c(this,Ot).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,Ot).values())if(t instanceof Le)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=c(this,Ot).get(e);let r=!1;if(i!==void 0)for(const[s,o]of Object.entries(t))i[s]!==o&&(r=!0,i[s]=o);else r=!0,c(this,Ot).set(e,t);r&&_(this,Np,Eb).call(this),t instanceof Le&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,Ot).has(e)}getAll(){return c(this,Ot).size>0?L0(c(this,Ot)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return c(this,Ot).size}resetModified(){c(this,No)&&(w(this,No,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ab(this)}get serializable(){if(c(this,Ot).size===0)return Ov;const e=new Map,t=new _b,i=[],r=Object.create(null);let s=!1;for(const[o,a]of c(this,Ot)){const l=a instanceof Le?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Ov}get editorStats(){let e=null;const t=new Map;for(const i of c(this,Ot).values()){if(!(i instanceof Le))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,l]of Object.entries(r)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}}No=new WeakMap,Ot=new WeakMap,Np=new WeakSet,Eb=function(){c(this,No)||(w(this,No,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fh;class Ab extends j0{constructor(t){super();E(this,fh);const{map:i,hash:r,transfer:s}=t.serializable,o=structuredClone(i,s?{transfer:s}:null);w(this,fh,{map:o,hash:r,transfer:s})}get print(){Oe("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,fh)}}fh=new WeakMap;var Pl;class KR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Pl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Pl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,Pl).has(e.loadedName))){if(xt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:s}=e,o=new FontFace(i,r,s);this.addNativeFontFace(o);try{await o.load(),c(this,Pl).add(i),t==null||t(e)}catch{ge(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Oe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ge(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return be(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Jt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),be(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(xt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return be(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(x,k){return x.charCodeAt(k)<<24|x.charCodeAt(k+1)<<16|x.charCodeAt(k+2)<<8|x.charCodeAt(k+3)&255}function r(x,k,R,L){const b=x.substring(0,k),I=x.substring(k+R);return b+L+I}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function h(x,k){if(++u>30){ge("Load test font never loaded."),k();return}if(l.font="30px "+x,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(h.bind(null,x,k))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,d.length,d);const g=16,y=1482184792;let S=i(f,g);for(s=0,o=d.length-3;s<o;s+=4)S=S-y+i(d,s)|0;s<d.length&&(S=S-y+i(d+"XXX",s)|0),f=r(f,g,4,LR(S));const m=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(v);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const x of[e.loadedName,d]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=x,A.append(k)}this._document.body.append(A),h(d,()=>{A.remove(),t.complete()})}}Pl=new WeakMap;class YR{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=$S(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(r=this._inspectFont)==null||r.call(this,this,t),i}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(s){ge(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(s,o){};const r=[];for(let s=0,o=i.length;s<o;)switch(i[s++]){case or.BEZIER_CURVE_TO:{const[a,l,u,h,d,f]=i.slice(s,s+6);r.push(p=>p.bezierCurveTo(a,l,u,h,d,f)),s+=6}break;case or.MOVE_TO:{const[a,l]=i.slice(s,s+2);r.push(u=>u.moveTo(a,l)),s+=2}break;case or.LINE_TO:{const[a,l]=i.slice(s,s+2);r.push(u=>u.lineTo(a,l)),s+=2}break;case or.QUADRATIC_CURVE_TO:{const[a,l,u,h]=i.slice(s,s+4);r.push(d=>d.quadraticCurveTo(a,l,u,h)),s+=4}break;case or.RESTORE:r.push(a=>a.restore());break;case or.SAVE:r.push(a=>a.save());break;case or.SCALE:xt(r.length===2,"Scale command is only valid at the third position.");break;case or.TRANSFORM:{const[a,l,u,h,d,f]=i.slice(s,s+6);r.push(p=>p.transform(a,l,u,h,d,f)),s+=6}break;case or.TRANSLATE:{const[a,l]=i.slice(s,s+2);r.push(u=>u.translate(a,l)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let l=2,u=r.length;l<u;l++)r[l](o)}}}if(Jt){var jv=Promise.withResolvers(),mu=null;(async()=>{const e=await ef(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await ef(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await ef(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await ef(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,o;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:s,path2d:o}))})().then(e=>{mu=e,jv.resolve()},e=>{ge(`loadPackages: ${e}`),mu=new Map,jv.resolve()})}class nr{static get promise(){return jv.promise}static get(e){return mu==null?void 0:mu.get(e)}}const Sb=function(n){return nr.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class qR extends yg{}class QR extends wp{_createCanvas(e,t){return nr.get("canvas").createCanvas(e,t)}}class JR extends wg{_fetchData(e,t){return Sb(e).then(i=>({cMapData:i,compressionType:t}))}}class ZR extends _g{_fetchData(e){return Sb(e)}}const on={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function zv(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class xd{constructor(){this.constructor===xd&&Oe("Cannot initialize BaseShadingPattern.")}getPattern(){Oe("Abstract method `getPattern` called.")}}class eP extends xd{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if(r===on.STROKE||r===on.FILL){const o=t.current.getClippedPathBoundingBox(r,et(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,l,!0),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=Q.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),zv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else zv(e,this._bbox),s=this._createGradient(e);return s}}function pm(n,e,t,i,r,s,o,a){const l=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;l[t+1]>l[i+1]&&(f=t,t=i,i=f,f=s,s=o,o=f),l[i+1]>l[r+1]&&(f=i,i=r,r=f,f=o,o=a,a=f),l[t+1]>l[i+1]&&(f=t,t=i,i=f,f=s,s=o,o=f);const p=(l[t]+e.offsetX)*e.scaleX,g=(l[t+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,S=(l[i+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY;if(g>=v)return;const A=u[s],x=u[s+1],k=u[s+2],R=u[o],L=u[o+1],b=u[o+2],I=u[a],F=u[a+1],O=u[a+2],J=Math.round(g),Y=Math.round(v);let W,se,ae,U,N,B,Z,we;for(let ne=J;ne<=Y;ne++){if(ne<S){const fe=ne<g?0:(g-ne)/(g-S);W=p-(p-y)*fe,se=A-(A-R)*fe,ae=x-(x-L)*fe,U=k-(k-b)*fe}else{let fe;ne>v?fe=1:S===v?fe=0:fe=(S-ne)/(S-v),W=y-(y-m)*fe,se=R-(R-I)*fe,ae=L-(L-F)*fe,U=b-(b-O)*fe}let de;ne<g?de=0:ne>v?de=1:de=(g-ne)/(g-v),N=p-(p-m)*de,B=A-(A-I)*de,Z=x-(x-F)*de,we=k-(k-O)*de;const ze=Math.round(Math.min(W,N)),Qe=Math.round(Math.max(W,N));let Se=d*ne+ze*4;for(let fe=ze;fe<=Qe;fe++)de=(W-fe)/(W-N),de<0?de=0:de>1&&(de=1),h[Se++]=se-(se-B)*de|0,h[Se++]=ae-(ae-Z)*de|0,h[Se++]=U-(U-we)*de|0,h[Se++]=255}}function tP(n,e,t){const i=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,u=a-1;for(s=0;s<l;s++){let h=s*a;for(let d=0;d<u;d++,h++)pm(n,t,i[h],i[h+1],i[h+a],r[h],r[h+1],r[h+a]),pm(n,t,i[h+a+1],i[h+1],i[h+a],r[h+a+1],r[h+1],r[h+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)pm(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class nP extends xd{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,g=h/f,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/g},S=d+2*2,m=f+2*2,v=i.getCanvas("mesh",S,m,!1),A=v.context,x=A.createImageData(d,f);if(t){const R=x.data;for(let L=0,b=R.length;L<b;L+=4)R[L]=t[0],R[L+1]=t[1],R[L+2]=t[2],R[L+3]=255}for(const R of this._figures)tP(x,R,y);return A.putImageData(x,2,2),{canvas:v.canvas,offsetX:a-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}getPattern(e,t,i,r){zv(e,this._bbox);let s;if(r===on.SHADING)s=Q.singularValueDecompose2dScale(et(e));else if(s=Q.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=Q.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,r===on.SHADING?null:this._background,t.cachedCanvases);return r!==on.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class iP extends xd{getPattern(){return"hotpink"}}function rP(n){switch(n[0]){case"RadialAxial":return new eP(n);case"Mesh":return new nP(n);case"Dummy":return new iP}throw new Error(`Unknown IR type: ${n[0]}`)}const H_={COLORED:1,UNCOLORED:2},Op=class Op{constructor(e,t,i,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,r=this.xstep,s=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,u=this.canvasGraphicsFactory;gg("TilingType: "+a);const h=i[0],d=i[1],f=i[2],p=i[3],g=Q.singularValueDecompose2dScale(this.matrix),y=Q.singularValueDecompose2dScale(this.baseTransform),S=[g[0]*y[0],g[1]*y[1]],m=this.getSizeAndScale(r,this.ctx.canvas.width,S[0]),v=this.getSizeAndScale(s,this.ctx.canvas.height,S[1]),A=e.cachedCanvases.getCanvas("pattern",m.size,v.size,!0),x=A.context,k=u.createCanvasGraphics(x);k.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(k,o,l);let R=h,L=d,b=f,I=p;return h<0&&(R=0,b+=Math.abs(h)),d<0&&(L=0,I+=Math.abs(d)),x.translate(-(m.scale*R),-(v.scale*L)),k.transform(m.scale,0,0,v.scale,0,0),x.save(),this.clipBbox(k,R,L,b,I),k.baseTransform=et(k.ctx),k.executeOperatorList(t),k.endDrawing(),{canvas:A.canvas,scaleX:m.scale,scaleY:v.scale,offsetX:R,offsetY:L}}getSizeAndScale(e,t,i){e=Math.abs(e);const r=Math.max(Op.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,r,s){const o=r-t,a=s-i;e.ctx.rect(t,i,o,a),e.current.updateRectMinMax(et(e.ctx),[t,i,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,s=e.current;switch(t){case H_.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case H_.UNCOLORED:const a=Q.makeHexColor(i[0],i[1],i[2]);r.fillStyle=a,r.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new PR(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let s=i;r!==on.SHADING&&(s=Q.transform(s,t.baseTransform),this.matrix&&(s=Q.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};le(Op,"MAX_PATTERN_SIZE",3e3);let Hv=Op;function sP({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=yn.isLittleEndian?4278190080:255,[l,u]=o?[s,a]:[a,s],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let g=0;g<r;g++){for(const S=e+h;e<S;e++){const m=e<f?n[e]:255;t[p++]=m&128?u:l,t[p++]=m&64?u:l,t[p++]=m&32?u:l,t[p++]=m&16?u:l,t[p++]=m&8?u:l,t[p++]=m&4?u:l,t[p++]=m&2?u:l,t[p++]=m&1?u:l}if(d===0)continue;const y=e<f?n[e++]:255;for(let S=0;S<d;S++)t[p++]=y&1<<7-S?u:l}return{srcPos:e,destPos:p}}const B_=16,U_=100,oP=15,$_=10,V_=1e3,gn=16;function aP(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,o,a,l){e.transform(i,r,s,o,a,l),this.__originalTransform(i,r,s,o,a,l)},n.setTransform=function(i,r,s,o,a,l){e.setTransform(i,r,s,o,a,l),this.__originalSetTransform(i,r,s,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,o,a){e.bezierCurveTo(t,i,r,s,o,a),this.__originalBezierCurveTo(t,i,r,s,o,a)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class lP{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function tf(n,e,t,i,r,s,o,a,l,u){const[h,d,f,p,g,y]=et(n);if(d===0&&f===0){const v=o*h+g,A=Math.round(v),x=a*p+y,k=Math.round(x),R=(o+l)*h+g,L=Math.abs(Math.round(R)-A)||1,b=(a+u)*p+y,I=Math.abs(Math.round(b)-k)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),A,k),n.drawImage(e,t,i,r,s,0,0,L,I),n.setTransform(h,d,f,p,g,y),[L,I]}if(h===0&&p===0){const v=a*f+g,A=Math.round(v),x=o*d+y,k=Math.round(x),R=(a+u)*f+g,L=Math.abs(Math.round(R)-A)||1,b=(o+l)*d+y,I=Math.abs(Math.round(b)-k)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,A,k),n.drawImage(e,t,i,r,s,0,0,I,L),n.setTransform(h,d,f,p,g,y),[I,L]}n.drawImage(e,t,i,r,s,o,a,l,u);const S=Math.hypot(h,d),m=Math.hypot(f,p);return[S*l,m*u]}function cP(n){const{width:e,height:t}=n;if(e>V_||t>V_)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),a,l,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const m of n.data){let v=128;for(;v>0;)d[f++]=m&v?0:255,v>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(o[l]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[l]=2,++p),a=1;a<t;a++){f=a*h,u=a*s,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let m=(d[f]?4:0)+(d[f-h]?8:0);for(l=1;l<e;l++)m=(m>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),r[m]&&(o[u+l]=r[m],++p),f++;if(d[f-h]!==d[f]&&(o[u+l]=d[f]?2:4,++p),p>i)return null}for(f=h*(t-1),u=a*s,d[f]!==0&&(o[u]=8,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(o[u+l]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+l]=4,++p),p>i)return null;const g=new Int32Array([0,s,-1,0,-s,0,0,0,1]),y=new Path2D;for(a=0;p&&a<=t;a++){let m=a*s;const v=m+e;for(;m<v&&!o[m];)m++;if(m===v)continue;y.moveTo(m%s,a);const A=m;let x=o[m];do{const k=g[x];do m+=k;while(!o[m]);const R=o[m];R!==5&&R!==10?(x=R,o[m]=0):(x=R&51*x>>4,o[m]&=x>>2|x<<2),y.lineTo(m%s,m/s|0),o[m]||--p}while(A!==m);--a}return d=null,o=null,function(m){m.save(),m.scale(1/e,-1/t),m.translate(0,-t),m.fill(y),m.beginPath(),m.restore()}}class W_{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=BS,this.textMatrixScale=1,this.fontMatrix=dv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Gt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=Q.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=Q.applyTransform(t,e),r=Q.applyTransform(t.slice(2),e),s=Q.applyTransform([t[0],t[3]],e),o=Q.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,t){Q.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,o,a,l,u,h){const d=Q.bezierBoundingBox(t,i,r,s,o,a,l,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=on.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===on.STROKE){t||Oe("Stroke bounding box must include transform.");const r=Q.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=o,i[2]+=s,i[3]+=o}return i}updateClipFromPath(){const e=Q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=on.FILL,t=null){return Q.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function G_(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%gn,s=(t-r)/gn,o=r===0?s:s+1,a=n.createImageData(i,gn);let l=0,u;const h=e.data,d=a.data;let f,p,g,y;if(e.kind===_f.GRAYSCALE_1BPP){const S=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),v=m.length,A=i+7>>3,x=4294967295,k=yn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<s?gn:r,u=0,p=0;p<g;p++){const R=S-l;let L=0;const b=R>A?i:R*8-7,I=b&-8;let F=0,O=0;for(;L<I;L+=8)O=h[l++],m[u++]=O&128?x:k,m[u++]=O&64?x:k,m[u++]=O&32?x:k,m[u++]=O&16?x:k,m[u++]=O&8?x:k,m[u++]=O&4?x:k,m[u++]=O&2?x:k,m[u++]=O&1?x:k;for(;L<b;L++)F===0&&(O=h[l++],F=128),m[u++]=O&F?x:k,F>>=1}for(;u<v;)m[u++]=0;n.putImageData(a,0,f*gn)}}else if(e.kind===_f.RGBA_32BPP){for(p=0,y=i*gn*4,f=0;f<s;f++)d.set(h.subarray(l,l+y)),l+=y,n.putImageData(a,0,p),p+=gn;f<o&&(y=i*r*4,d.set(h.subarray(l,l+y)),n.putImageData(a,0,p))}else if(e.kind===_f.RGB_24BPP)for(g=gn,y=i*g,f=0;f<o;f++){for(f>=s&&(g=r,y=i*g),u=0,p=y;p--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;n.putImageData(a,0,f*gn)}else throw new Error(`bad image kind: ${e.kind}`)}function X_(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%gn,s=(t-r)/gn,o=r===0?s:s+1,a=n.createImageData(i,gn);let l=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<s?gn:r;({srcPos:l}=sP({src:u,srcPos:l,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(a,0,d*gn)}}function jc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function nf(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Jt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function K_(n,e){if(e)return!0;const t=Q.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Xs.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const uP=["butt","round","square"],hP=["miter","round","bevel"],dP={},Y_={};var Ys,Bv,Uv;const V0=class V0{constructor(e,t,i,r,s,{optionalContentConfig:o,markedContentStack:a=null},l,u){E(this,Ys);this.ctx=e,this.current=new W_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new lP(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...et(this.compositeCtx))}this.ctx.save(),nf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=et(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const l=s.length;if(l===a)return a;const u=l-a>$_&&typeof i=="function",h=u?Date.now()+oP:0;let d=0;const f=this.commonObjs,p=this.objs;let g;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if(g=o[a],g!==ui.dependency)this[g].apply(this,s[a]);else for(const y of s[a]){const S=y.startsWith("g_")?f:p;if(!S.has(y))return S.get(y,i),a}if(a++,a===l)return a;if(u&&++d>$_){if(Date.now()>h)return i(),a;d=0}}}endDrawing(){_(this,Ys,Bv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_(this,Ys,Uv).call(this)}_scaleImage(e,t){const i=e.width,r=e.height;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,l=r,u="prescale1",h,d;for(;s>2&&a>1||o>2&&l>1;){let f=a,p=l;s>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,l,0,0,f,p),e=h.canvas,a=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=et(t);let l,u,h,d;if((e.bitmap||e.data)&&e.count>1){const b=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(b),l||(l=new Map,this._cachedBitmapsMap.set(b,l));const I=l.get(u);if(I&&!o){const F=Math.round(Math.min(a[0],a[2])+a[4]),O=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:I,offsetX:F,offsetY:O}}h=I}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),X_(d.context,e));let f=Q.transform(a,[1/i,0,0,-1/r,0,0]);f=Q.transform(f,[1,0,0,1,0,-r]);const[p,g,y,S]=Q.getAxialAlignedBoundingBox([0,0,i,r],f),m=Math.round(y-p)||1,v=Math.round(S-g)||1,A=this.cachedCanvases.getCanvas("fillCanvas",m,v),x=A.context,k=p,R=g;x.translate(-k,-R),x.transform(...f),h||(h=this._scaleImage(d.canvas,ar(x)),h=h.img,l&&o&&l.set(u,h)),x.imageSmoothingEnabled=K_(et(x),e.interpolate),tf(x,h,0,0,h.width,h.height,0,0,i,r),x.globalCompositeOperation="source-in";const L=Q.transform(ar(x),[1,0,0,1,-k,-R]);return x.fillStyle=o?s.getPattern(t,this,L,on.FILL):s,x.fillRect(0,0,i,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,A.canvas)),{canvas:A.canvas,offsetX:Math.round(k),offsetY:Math.round(R)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=uP[e]}setLineJoin(e){this.ctx.lineJoin=hP[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...et(this.suspendedCtx)),jc(this.suspendedCtx,s),aP(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),jc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const s=r[0],o=r[1],a=r[2]-s,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,i,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,o,a,l,u,h,d){let f=e.canvas,p=l-h,g=u-d;if(o){if(p<0||g<0||p+i>f.width||g+r>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,r),m=S.context;m.drawImage(f,-p,-g),o.some(v=>v!==0)&&(m.globalCompositeOperation="destination-atop",m.fillStyle=Q.makeHexColor(...o),m.fillRect(0,0,i,r),m.globalCompositeOperation="source-over"),f=S.canvas,p=g=0}else if(o.some(S=>S!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(p,g,i,r),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=Q.makeHexColor(...o),e.fillRect(p,g,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(l,u,i,r),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,p,g,i,r,l,u,i,r),t.restore()}save(){this.inSMaskMode?(jc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),jc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,o){this.ctx.transform(e,t,i,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let o=s.x,a=s.y,l,u;const h=et(r),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,g=0,y=e.length;p<y;p++)switch(e[p]|0){case ui.rectangle:o=t[g++],a=t[g++];const S=t[g++],m=t[g++],v=o+S,A=a+m;r.moveTo(o,a),S===0||m===0?r.lineTo(v,A):(r.lineTo(v,a),r.lineTo(v,A),r.lineTo(o,A)),d||s.updateRectMinMax(h,[o,a,v,A]),r.closePath();break;case ui.moveTo:o=t[g++],a=t[g++],r.moveTo(o,a),d||s.updatePathMinMax(h,o,a);break;case ui.lineTo:o=t[g++],a=t[g++],r.lineTo(o,a),d||s.updatePathMinMax(h,o,a);break;case ui.curveTo:l=o,u=a,o=t[g+4],a=t[g+5],r.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],o,a),s.updateCurvePathMinMax(h,l,u,t[g],t[g+1],t[g+2],t[g+3],o,a,f),g+=6;break;case ui.curveTo2:l=o,u=a,r.bezierCurveTo(o,a,t[g],t[g+1],t[g+2],t[g+3]),s.updateCurvePathMinMax(h,l,u,o,a,t[g],t[g+1],t[g+2],t[g+3],f),o=t[g+2],a=t[g+3],g+=4;break;case ui.curveTo3:l=o,u=a,o=t[g+2],a=t[g+3],r.bezierCurveTo(t[g],t[g+1],o,a,o,a),s.updateCurvePathMinMax(h,l,u,t[g],t[g+1],o,a,o,a,f),g+=4;break;case ui.closePath:r.closePath();break}d&&s.updateScalingPathMinMax(h,f),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ar(t),on.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,ar(t),on.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=dP}eoClip(){this.pendingClip=Y_}beginText(){this.current.textMatrix=BS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||dv,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&ge("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let u=t;t<B_?u=B_:t>U_&&(u=U_),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,o){this.current.textMatrix=[e,t,i,r,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const s=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=l&Gt.FILL_STROKE_MASK,d=!!(l&Gt.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let p;(a.disableFontFace||d||f)&&(p=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||f?(s.save(),s.translate(t,i),s.beginPath(),p(s,u),r&&s.setTransform(...r),(h===Gt.FILL||h===Gt.FILL_STROKE)&&s.fill(),(h===Gt.STROKE||h===Gt.FILL_STROKE)&&s.stroke(),s.restore()):((h===Gt.FILL||h===Gt.FILL_STROKE)&&s.fillText(e,t,i),(h===Gt.STROKE||h===Gt.FILL_STROKE)&&s.strokeText(e,t,i)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:et(s),x:t,y:i,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return be(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,y=r*t.fontMatrix[0],S=t.textRenderingMode===Gt.FILL&&!i.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(h,-1):s.scale(h,1);let m;if(t.patternFill){s.save();const R=t.fillColor.getPattern(s,this,ar(s),on.FILL);m=et(s),s.restore(),s.fillStyle=R}let v=t.lineWidth;const A=t.textMatrixScale;if(A===0||v===0){const R=t.textRenderingMode&Gt.FILL_STROKE_MASK;(R===Gt.STROKE||R===Gt.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=A;if(o!==1&&(s.scale(o,o),v/=o),s.lineWidth=v,i.isInvalidPDFjsFont){const R=[];let L=0;for(const b of e)R.push(b.unicode),L+=b.width;s.fillText(R.join(""),0,0),t.x+=L*y*h,s.restore(),this.compose();return}let x=0,k;for(k=0;k<d;++k){const R=e[k];if(typeof R=="number"){x+=p*R*r/1e3;continue}let L=!1;const b=(R.isSpace?l:0)+a,I=R.fontChar,F=R.accent;let O,J,Y=R.width;if(f){const se=R.vmetric||g,ae=-(R.vmetric?se[1]:Y*.5)*y,U=se[2]*y;Y=se?-se[0]:Y,O=ae/o,J=(x+U)/o}else O=x/o,J=0;if(i.remeasure&&Y>0){const se=s.measureText(I).width*1e3/r*o;if(Y<se&&this.isFontSubpixelAAEnabled){const ae=Y/se;L=!0,s.save(),s.scale(ae,1),O/=ae}else Y!==se&&(O+=(Y-se)/2e3*r/o)}if(this.contentVisible&&(R.isInFont||i.missingFile)){if(S&&!F)s.fillText(I,O,J);else if(this.paintChar(I,O,J,m),F){const se=O+r*F.offset.x/o,ae=J-r*F.offset.y/o;this.paintChar(F.fontChar,se,ae,m)}}const W=f?Y*y-b*u:Y*y+b*u;x+=W,L&&s.restore()}f?t.y-=x:t.x+=x*h,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||dv,f=e.length,p=i.textRenderingMode===Gt.INVISIBLE;let g,y,S,m;if(!(p||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,o),g=0;g<f;++g){if(y=e[g],typeof y=="number"){m=a*y*s/1e3,this.ctx.translate(m,0),i.x+=m*h;continue}const v=(y.isSpace?u:0)+l,A=r.charProcOperatorList[y.operatorListId];if(!A){ge(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(A),this.restore()),S=Q.applyTransform([y.width,0],d)[0]*s+v,t.translate(S,0),i.x+=S*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,o){this.ctx.rect(i,r,s-i,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||et(this.ctx),s={createCanvasGraphics:o=>new V0(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Hv(e,i,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const r=Q.makeHexColor(e,t,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,i){const r=Q.makeHexColor(e,t,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=rP(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ar(t),on.SHADING);const r=ar(t);if(r){const{width:s,height:o}=t.canvas,[a,l,u,h]=Q.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,l,u-a,h-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Oe("Should not call beginInlineImage")}beginImageData(){Oe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=et(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(et(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||gg("TODO: Support non-isolated groups."),e.knockout&&ge("Knockout groups not supported.");const i=et(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Q.getAxialAlignedBoundingBox(e.bbox,et(t));const s=[0,0,t.canvas.width,t.canvas.height];r=Q.intersect(r,s)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),u=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,u),f=d.context;f.translate(-o,-a),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),jc(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=et(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=Q.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(_(this,Ys,Bv).call(this),nf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,u]=Q.singularValueDecompose2dScale(et(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),nf(this.ctx)}else nf(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new W_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_(this,Ys,Uv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=cP(e)),r.compiled)){r.compiled(i);return}const s=this._createMaskCanvas(e),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=et(a);a.transform(t,i,r,s,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,d=o.length;h<d;h+=2){const f=Q.transform(l,[t,i,r,s,o[h],o[h+1]]),[p,g]=Q.applyTransform([0,0],f);a.drawImage(u.canvas,p,g)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:l,transform:u}=s,h=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=h.context;d.save();const f=this.getObject(o,s);X_(d,f),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,ar(t),on.FILL):i,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),tf(t,h.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ge("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){ge("Dependent image isn't ready yet");return}const o=s.width,a=s.height,l=[];for(let u=0,h=r.length;u<h;u+=2)l.push({transform:[t,0,0,i,r[u],r[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!Jt){const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none")}r.scale(1/t,-1/i);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;G_(l,e),s=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(s,ar(r));r.imageSmoothingEnabled=K_(et(r),e.interpolate),tf(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,o).context;G_(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),tf(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Y_?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=et(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let o,a;if(i===0&&r===0){const l=Math.abs(t),u=Math.abs(s);if(l===u)if(e===0)o=a=1/l;else{const h=l*e;o=a=h<1?1/h:1}else if(e===0)o=1/l,a=1/u;else{const h=l*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const l=Math.abs(t*s-i*r),u=Math.hypot(t,i),h=Math.hypot(r,s);if(e===0)o=h/l,a=u/l;else{const d=e*l;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(r,s),o.length>0){const a=Math.max(r,s);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ys=new WeakSet,Bv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Uv=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let pl=V0;for(const n in ui)pl.prototype[n]!==void 0&&(pl.prototype[ui[n]]=pl.prototype[n]);var ph,gh;class $r{static get workerPort(){return c(this,ph)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");w(this,ph,e)}static get workerSrc(){return c(this,gh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");w(this,gh,e)}}ph=new WeakMap,gh=new WeakMap,E($r,ph,null),E($r,gh,"");const rf={UNKNOWN:0,DATA:1,ERROR:2},pt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Cn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Oe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Fa(n.message);case"MissingPDFException":return new Ia(n.message);case"PasswordException":return new pv(n.message,n.code);case"UnexpectedResponseException":return new mg(n.message,n.status);case"UnknownErrorException":return new gv(n.message,n.details);default:return new gv(n.message,n.toString())}}var er,bb,xb,Cf;class Qc{constructor(e,t,i){E(this,er);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const s=r.data;if(s.targetName!==this.sourceName)return;if(s.stream){_(this,er,xb).call(this,s);return}if(s.callback){const a=s.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],s.callback===rf.DATA)l.resolve(s.data);else if(s.callback===rf.ERROR)l.reject(Cn(s.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[s.action];if(!o)throw new Error(`Unknown action from worker: ${s.action}`);if(s.callbackId){const a=this.sourceName,l=s.sourceName;new Promise(function(u){u(o(s.data))}).then(function(u){i.postMessage({sourceName:a,targetName:l,callback:rf.DATA,callbackId:s.callbackId,data:u})},function(u){i.postMessage({sourceName:a,targetName:l,callback:rf.ERROR,callbackId:s.callbackId,reason:Cn(u)})});return}if(s.streamId){_(this,er,bb).call(this,s);return}o(s.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:u.desiredSize},r),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,l.postMessage({sourceName:o,targetName:a,stream:pt.PULL,streamId:s,desiredSize:u.desiredSize}),h.promise},cancel:u=>{xt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:pt.CANCEL,streamId:s,reason:Cn(u)}),h.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}er=new WeakSet,bb=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:pt.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:pt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){xt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:pt.ERROR,streamId:t,reason:Cn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(u){u(a(e.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:pt.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:pt.START_COMPLETE,streamId:t,reason:Cn(u)})})},xb=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case pt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Cn(e.reason));break;case pt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Cn(e.reason));break;case pt.PULL:if(!a){s.postMessage({sourceName:i,targetName:r,stream:pt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){var u;l((u=a.onPull)==null?void 0:u.call(a))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:pt.PULL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:pt.PULL_COMPLETE,streamId:t,reason:Cn(l)})});break;case pt.ENQUEUE:if(xt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case pt.CLOSE:if(xt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),_(this,er,Cf).call(this,o,t);break;case pt.ERROR:xt(o,"error should have stream controller"),o.controller.error(Cn(e.reason)),_(this,er,Cf).call(this,o,t);break;case pt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Cn(e.reason)),_(this,er,Cf).call(this,o,t);break;case pt.CANCEL:if(!a)break;new Promise(function(l){var u;l((u=a.onCancel)==null?void 0:u.call(a,Cn(e.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:pt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:pt.CANCEL_COMPLETE,streamId:t,reason:Cn(l)})}),a.sinkCapability.reject(Cn(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Cf=async function(e,t){var i,r,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Oo,mh;class fP{constructor({parsedData:e,rawData:t}){E(this,Oo);E(this,mh);w(this,Oo,e),w(this,mh,t)}getRaw(){return c(this,mh)}get(e){return c(this,Oo).get(e)??null}getAll(){return L0(c(this,Oo))}has(e){return c(this,Oo).has(e)}}Oo=new WeakMap,mh=new WeakMap;const as=Symbol("INTERNAL");var vh,yh,wh,Ll;class pP{constructor(e,{name:t,intent:i,usage:r}){E(this,vh,!1);E(this,yh,!1);E(this,wh,!1);E(this,Ll,!0);w(this,vh,!!(e&Jn.DISPLAY)),w(this,yh,!!(e&Jn.PRINT)),this.name=t,this.intent=i,this.usage=r}get visible(){if(c(this,wh))return c(this,Ll);if(!c(this,Ll))return!1;const{print:e,view:t}=this.usage;return c(this,vh)?(t==null?void 0:t.viewState)!=="OFF":c(this,yh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==as&&Oe("Internal method `_setVisible` called."),w(this,wh,i),w(this,Ll,t)}}vh=new WeakMap,yh=new WeakMap,wh=new WeakMap,Ll=new WeakMap;var ws,Fe,Ml,Dl,_h,$v;class gP{constructor(e,t=Jn.DISPLAY){E(this,_h);E(this,ws,null);E(this,Fe,new Map);E(this,Ml,null);E(this,Dl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,w(this,Dl,e.order);for(const i of e.groups)c(this,Fe).set(i.id,new pP(t,i));if(e.baseState==="OFF")for(const i of c(this,Fe).values())i._setVisible(as,!1);for(const i of e.on)c(this,Fe).get(i)._setVisible(as,!0);for(const i of e.off)c(this,Fe).get(i)._setVisible(as,!1);w(this,Ml,this.getHash())}}isVisible(e){if(c(this,Fe).size===0)return!0;if(!e)return gg("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Fe).has(e.id)?c(this,Fe).get(e.id).visible:(ge(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return _(this,_h,$v).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Fe).has(t))return ge(`Optional content group not found: ${t}`),!0;if(c(this,Fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Fe).has(t))return ge(`Optional content group not found: ${t}`),!0;if(!c(this,Fe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Fe).has(t))return ge(`Optional content group not found: ${t}`),!0;if(!c(this,Fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Fe).has(t))return ge(`Optional content group not found: ${t}`),!0;if(c(this,Fe).get(t).visible)return!1}return!0}return ge(`Unknown optional content policy ${e.policy}.`),!0}return ge(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const i=c(this,Fe).get(e);if(!i){ge(`Optional content group not found: ${e}`);return}i._setVisible(as,!!t,!0),w(this,ws,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=c(this,Fe).get(r);if(s)switch(i){case"ON":s._setVisible(as,!0);break;case"OFF":s._setVisible(as,!1);break;case"Toggle":s._setVisible(as,!s.visible);break}}w(this,ws,null)}get hasInitialVisibility(){return c(this,Ml)===null||this.getHash()===c(this,Ml)}getOrder(){return c(this,Fe).size?c(this,Dl)?c(this,Dl).slice():[...c(this,Fe).keys()]:null}getGroups(){return c(this,Fe).size>0?L0(c(this,Fe)):null}getGroup(e){return c(this,Fe).get(e)||null}getHash(){if(c(this,ws)!==null)return c(this,ws);const e=new _b;for(const[t,i]of c(this,Fe))e.update(`${t}:${i.visible}`);return w(this,ws,e.hexdigest())}}ws=new WeakMap,Fe=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,_h=new WeakSet,$v=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=_(this,_h,$v).call(this,s);else if(c(this,Fe).has(s))o=c(this,Fe).get(s).visible;else return ge(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class mP{constructor(e,{disableRange:t=!1,disableStream:i=!1}){xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});xt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new vP(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new yP(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class vP{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=N0(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class yP{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function wP(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=l(h),h=u(h),s(h)}if(t=o(n),t){const h=u(t);return s(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=a(t);return h=u(h),s(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=vg(d);d=f.decode(p),e=!1}catch{}}return d}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,y,S,m]=f;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[S,m]}const g=[];for(let y=0;y<d.length&&y in d;++y){let[S,m]=d[y];m=a(m),S&&(m=unescape(m),y===0&&(m=l(m))),g.push(m)}return g.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),g=h.slice(d+1).replace(/^[^']*'/,"");return r(f,g)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,S){return String.fromCharCode(parseInt(S,16))}),r(f,g);try{g=atob(g)}catch{}return r(f,g)})}return""}function z0({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function H0(n){const e=n("Content-Disposition");if(e){let t=wP(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(N0(t))return t}return null}function Ag(n,e){return n===404||n===0&&e.startsWith("file:")?new Ia('Missing PDF "'+e+'".'):new mg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function Cb(n){return n===200||n===206}function kb(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Tb(n){const e=new Headers;for(const t in n){const i=n[t];i!==void 0&&e.append(t,i)}return e}function Rb(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ge(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class q_{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _P(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new EP(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class _P{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=Tb(this._stream.httpHeaders);const i=t.url;fetch(i,kb(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!Cb(r.status))throw Ag(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const s=l=>r.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=z0({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=H0(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Rb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class EP{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=Tb(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const s=r.url;fetch(s,kb(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!Cb(o.status))throw Ag(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:Rb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const gm=200,mm=206;function AP(n){const e=n.response;return typeof e!="string"?e:vg(e).buffer}class SP{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const o=this.httpHeaders[s];o!==void 0&&t.setRequestHeader(s,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=mm):r.expectedStatus=gm,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var l,u,h;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(l=i.onError)==null||l.call(i,r.status);return}const s=r.status||gm;if(!(s===gm&&i.expectedStatus===mm)&&s!==i.expectedStatus){(u=i.onError)==null||u.call(i,r.status);return}const a=AP(r);if(s===mm){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(f[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(h=i.onError)==null||h.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class bP{constructor(e){this._source=e,this._manager=new SP(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xP(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new CP(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class xP{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=o=>t.getResponseHeader(o),{allowRangeRequests:r,suggestedLength:s}=z0({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=H0(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ag(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class CP{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Ag(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Pb=/^file:\/\/\/[a-zA-Z]:\//;function kP(n){const e=nr.get("url"),t=e.parse(n);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(n)?e.parse(`file:///${n}`):(t.host||(t.protocol="file:"),t)}class TP{constructor(e){this.source=e,this.url=kP(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new LP(this):new RP(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new MP(this,e,t):new PP(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Lb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Mb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Ap(n,e){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:e}}class RP extends Lb{constructor(e){super(e);const t=i=>{if(i.statusCode===404){const a=new Ia(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(i);const r=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:s,suggestedLength:o}=z0({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=H0(r)};if(this._request=null,this._url.protocol==="http:"){const i=nr.get("http");this._request=i.request(Ap(this._url,e.httpHeaders),t)}else{const i=nr.get("https");this._request=i.request(Ap(this._url,e.httpHeaders),t)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class PP extends Mb{constructor(e,t,i){super(e),this._httpHeaders={};for(const s in e.httpHeaders){const o=e.httpHeaders[s];o!==void 0&&(this._httpHeaders[s]=o)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const r=s=>{if(s.statusCode===404){const o=new Ia(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(s)};if(this._request=null,this._url.protocol==="http:"){const s=nr.get("http");this._request=s.request(Ap(this._url,this._httpHeaders),r)}else{const s=nr.get("https");this._request=s.request(Ap(this._url,this._httpHeaders),r)}this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class LP extends Lb{constructor(e){super(e);let t=decodeURIComponent(this._url.path);Pb.test(this._url.href)&&(t=t.replace(/^\//,""));const i=nr.get("fs");i.promises.lstat(t).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Ia(`Missing PDF "${t}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class MP extends Mb{constructor(e,t,i){super(e);let r=decodeURIComponent(this._url.path);Pb.test(this._url.href)&&(r=r.replace(/^\//,""));const s=nr.get("fs");this._setReadableStream(s.createReadStream(r,{start:t,end:i-1}))}}const DP=1e5,dn=30,IP=.8;var cE,_s,pn,Eh,Ah,jo,Sr,Sh,bh,zo,Il,Fl,Es,Nl,xh,Ol,Ho,Ch,kh,St,Bo,Uo,As,jl,Qr,Db,Ib,Vv,tr,kf,Fb,Nb;let Sp=(St=class{constructor({textContentSource:e,container:t,viewport:i}){E(this,Qr);E(this,_s,Promise.withResolvers());E(this,pn,null);E(this,Eh,!1);E(this,Ah,!!((cE=globalThis.FontInspector)!=null&&cE.enabled));E(this,jo,null);E(this,Sr,null);E(this,Sh,0);E(this,bh,0);E(this,zo,null);E(this,Il,null);E(this,Fl,0);E(this,Es,0);E(this,Nl,Object.create(null));E(this,xh,[]);E(this,Ol,null);E(this,Ho,[]);E(this,Ch,new WeakMap);E(this,kh,null);var l;if(e instanceof ReadableStream)w(this,Ol,e);else if(typeof e=="object")w(this,Ol,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,pn,w(this,Il,t)),w(this,Es,i.scale*(globalThis.devicePixelRatio||1)),w(this,Fl,i.rotation),w(this,Sr,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=i.rawDims;w(this,kh,[1,0,0,-1,-o,a+s]),w(this,bh,r),w(this,Sh,s),_(l=St,tr,Fb).call(l),ba(t,i),c(this,_s).promise.catch(()=>{}).then(()=>{c(St,jl).delete(this),w(this,Sr,null),w(this,Nl,null)})}render(){const e=()=>{c(this,zo).read().then(({value:t,done:i})=>{if(i){c(this,_s).resolve();return}c(this,jo)??w(this,jo,t.lang),Object.assign(c(this,Nl),t.styles),_(this,Qr,Db).call(this,t.items),e()},c(this,_s).reject)};return w(this,zo,c(this,Ol).getReader()),c(St,jl).add(this),e(),c(this,_s).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==c(this,Fl)&&(t==null||t(),w(this,Fl,r),ba(c(this,Il),{rotation:r})),i!==c(this,Es)){t==null||t(),w(this,Es,i);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:_(s=St,tr,kf).call(s,c(this,jo))};for(const a of c(this,Ho))o.properties=c(this,Ch).get(a),o.div=a,_(this,Qr,Vv).call(this,o)}}cancel(){var t;const e=new Fa("TextLayer task cancelled.");(t=c(this,zo))==null||t.cancel(e).catch(()=>{}),w(this,zo,null),c(this,_s).reject(e)}get textDivs(){return c(this,Ho)}get textContentItemsStr(){return c(this,xh)}static cleanup(){if(!(c(this,jl).size>0)){c(this,Bo).clear();for(const{canvas:e}of c(this,Uo).values())e.remove();c(this,Uo).clear()}}},_s=new WeakMap,pn=new WeakMap,Eh=new WeakMap,Ah=new WeakMap,jo=new WeakMap,Sr=new WeakMap,Sh=new WeakMap,bh=new WeakMap,zo=new WeakMap,Il=new WeakMap,Fl=new WeakMap,Es=new WeakMap,Nl=new WeakMap,xh=new WeakMap,Ol=new WeakMap,Ho=new WeakMap,Ch=new WeakMap,kh=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,As=new WeakMap,jl=new WeakMap,Qr=new WeakSet,Db=function(e){var r,s;if(c(this,Eh))return;(s=c(this,Sr)).ctx??(s.ctx=_(r=St,tr,kf).call(r,c(this,jo)));const t=c(this,Ho),i=c(this,xh);for(const o of e){if(t.length>DP){ge("Ignoring additional textDivs for performance reasons."),w(this,Eh,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,pn);w(this,pn,document.createElement("span")),c(this,pn).classList.add("markedContent"),o.id!==null&&c(this,pn).setAttribute("id",`${o.id}`),a.append(c(this,pn))}else o.type==="endMarkedContent"&&w(this,pn,c(this,pn).parentNode);continue}i.push(o.str),_(this,Qr,Ib).call(this,o)}},Ib=function(e){var y;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Ho).push(t);const r=Q.transform(c(this,kh),e.transform);let s=Math.atan2(r[1],r[0]);const o=c(this,Nl)[e.fontName];o.vertical&&(s+=Math.PI/2);const a=c(this,Ah)&&o.fontSubstitution||o.fontFamily,l=Math.hypot(r[2],r[3]),u=l*_(y=St,tr,Nb).call(y,a,c(this,jo));let h,d;s===0?(h=r[4],d=r[5]-u):(h=r[4]+u*Math.sin(s),d=r[5]-u*Math.cos(s));const f="calc(var(--scale-factor)*",p=t.style;c(this,pn)===c(this,Il)?(p.left=`${(100*h/c(this,bh)).toFixed(2)}%`,p.top=`${(100*d/c(this,Sh)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(c(St,As)*l).toFixed(2)}px)`,p.fontFamily=a,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,Ah)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),m=Math.abs(e.transform[3]);S!==m&&Math.max(S,m)/Math.min(S,m)>1.5&&(g=!0)}if(g&&(i.canvasWidth=o.vertical?e.height:e.width),c(this,Ch).set(t,i),c(this,Sr).div=t,c(this,Sr).properties=i,_(this,Qr,Vv).call(this,c(this,Sr)),i.hasText&&c(this,pn).append(t),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,pn).append(S)}},Vv=function(e){const{div:t,properties:i,ctx:r,prevFontSize:s,prevFontFamily:o}=e,{style:a}=t;let l="";if(c(St,As)>1&&(l=`scale(${1/c(St,As)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:d}=i;(s!==d||o!==u)&&(r.font=`${d*c(this,Es)}px ${u}`,e.prevFontSize=d,e.prevFontFamily=u);const{width:f}=r.measureText(t.textContent);f>0&&(l=`scaleX(${h*c(this,Es)/f}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(a.transform=l)},tr=new WeakSet,kf=function(e=null){let t=c(this,Uo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Uo).set(e,t)}return t},Fb=function(){if(c(this,As)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),w(this,As,e.getBoundingClientRect().height),e.remove()},Nb=function(e,t){const i=c(this,Bo).get(e);if(i)return i;const r=_(this,tr,kf).call(this,t),s=r.font;r.canvas.width=r.canvas.height=dn,r.font=`${dn}px ${e}`;const o=r.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const d=a/(a+l);return c(this,Bo).set(e,d),r.canvas.width=r.canvas.height=0,r.font=s,d}r.strokeStyle="red",r.clearRect(0,0,dn,dn),r.strokeText("g",0,0);let u=r.getImageData(0,0,dn,dn).data;l=0;for(let d=u.length-1-3;d>=0;d-=4)if(u[d]>0){l=Math.ceil(d/4/dn);break}r.clearRect(0,0,dn,dn),r.strokeText("A",0,dn),u=r.getImageData(0,0,dn,dn).data,a=0;for(let d=0,f=u.length;d<f;d+=4)if(u[d]>0){a=dn-Math.floor(d/4/dn);break}r.canvas.width=r.canvas.height=0,r.font=s;const h=a?a/(a+l):IP;return c(this,Bo).set(e,h),h},E(St,tr),E(St,Bo,new Map),E(St,Uo,new Map),E(St,As,null),E(St,jl,new Set),St);function FP(){KS("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:e,viewport:t,...i}=arguments[0],r=Object.keys(i);r.length>0&&ge("Ignoring `renderTextLayer` parameters: "+r.join(", "));const s=new Sp({textContentSource:n,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=s;return{promise:s.render(),textDivs:o,textContentItemsStr:a}}function NP(){KS("`updateTextLayer`, please use `TextLayer` instead.")}class ju{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(s){var l;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(ju.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const u of s.children)r(u)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const OP=65536,jP=100,zP=5e3,HP=Jt?QR:jR,BP=Jt?JR:GS,UP=Jt?qR:OR,$P=Jt?ZR:XS;function VP(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Wv,{docId:t}=e,i=n.url?WP(n.url):null,r=n.data?GP(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof Ob?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:OP;let h=n.worker instanceof gl?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!F0(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,y=n.CMapReaderFactory||BP,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,m=n.StandardFontDataFactory||$P,v=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,x=n.isEvalSupported!==!1,k=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Jt,R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:Jt,b=n.fontExtraProperties===!0,I=n.enableXfa===!0,F=n.ownerDocument||globalThis.document,O=n.disableRange===!0,J=n.disableStream===!0,Y=n.disableAutoFetch===!0,W=n.pdfBug===!0,se=n.enableHWA===!0,ae=l?l.length:n.length??NaN,U=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Jt&&!L,N=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===GS&&m===XS&&p&&S&&Kc(p,document.baseURI)&&Kc(S,document.baseURI),B=n.canvasFactory||new HP({ownerDocument:F,enableHWA:se}),Z=n.filterFactory||new UP({docId:t,ownerDocument:F}),we=null;CR(d);const ne={canvasFactory:B,filterFactory:Z};if(N||(ne.cMapReaderFactory=new y({baseUrl:p,isCompressed:g}),ne.standardFontDataFactory=new m({baseUrl:S})),!h){const Qe={verbosity:d,port:$r.workerPort};h=Qe.port?gl.fromPort(Qe):new gl(Qe),e._worker=h}const de={docId:t,apiVersion:"4.4.168",data:r,password:a,disableAutoFetch:Y,rangeChunkSize:u,length:ae,docBaseUrl:f,enableXfa:I,evaluatorOptions:{maxImageSize:A,disableFontFace:L,ignoreErrors:v,isEvalSupported:x,isOffscreenCanvasSupported:k,canvasMaxAreaInBytes:R,fontExtraProperties:b,useSystemFonts:U,cMapUrl:N?p:null,standardFontDataUrl:N?S:null}},ze={disableFontFace:L,fontExtraProperties:b,ownerDocument:F,pdfBug:W,styleElement:we,loadingParams:{disableAutoFetch:Y,enableXfa:I}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Qe=h.messageHandler.sendWithPromise("GetDocRequest",de,r?[r.buffer]:null);let Se;if(l)Se=new mP(l,{disableRange:O,disableStream:J});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");Se=(st=>Jt?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Kc(st.url)?new q_(st):new TP(st):Kc(st.url)?new q_(st):new bP(st))({url:i,length:ae,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:O,disableStream:J})}return Qe.then(fe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const st=new Qc(t,fe,h.port),Vn=new qP(st,e,Se,ze,ne);e._transport=Vn,st.send("Ready",null)})}).catch(e._capability.reject),e}function WP(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Jt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function GP(n){if(Jt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Q_(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var jp;const zp=class zp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${xn(zp,jp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};jp=new WeakMap,E(zp,jp,0);let Wv=zp,Ob=class{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Oe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class XP{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ss,br,ti,Wa,Tf;class KP{constructor(e,t,i,r=!1){E(this,ti);E(this,Ss,null);E(this,br,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new O_:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new jb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new Sd({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=fs.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:h=null}){var A,x;(A=this._stats)==null||A.time("Overall");const d=this._transport.getRenderingIntent(i,r,h),{renderingIntent:f,cacheKey:p}=d;w(this,br,!1),_(this,ti,Tf).call(this),a||(a=this._transport.getOptionalContentConfig(f));let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const y=!!(f&Jn.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(d));const S=k=>{var R;g.renderTasks.delete(m),(this._maybeCleanupAfterRender||y)&&w(this,br,!0),_(this,ti,Wa).call(this,!y),k?(m.capability.reject(k),this._abortOperatorList({intentState:g,reason:k instanceof Error?k:new Error(k)})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(R=globalThis.Stats)!=null&&R.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},m=new Xv({callback:S,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:u});(g.renderTasks||(g.renderTasks=new Set)).add(m);const v=m.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([k,R])=>{var L;if(this.destroyed){S();return}if((L=this._stats)==null||L.time("Rendering"),!(R.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");m.initializeGraphics({transparency:k,optionalContentConfig:R}),m.operatorListChanged()}).catch(S),v}getOperatorList({intent:e="display",annotationMode:t=fs.ENABLE,printAnnotationStorage:i=null}={}){var l;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const s=this._transport.getRenderingIntent(e,t,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>ju.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function s(){o.read().then(function({value:l,done:u}){if(u){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),w(this,br,!1),_(this,ti,Tf).call(this),Promise.all(e)}cleanup(e=!1){w(this,br,!0);const t=_(this,ti,Wa).call(this,!1);return e&&t&&this._stats&&(this._stats=new O_),t}_startRenderPage(e,t){var r,s;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&_(this,ti,Wa).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:r,transfer:s}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r},s).getReader(),l=this._intentStates.get(t);l.streamReader=a;const u=()=>{a.read().then(({value:h,done:d})=>{if(d){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,l),u())},h=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const d of l.renderTasks)d.operatorListChanged();_(this,ti,Wa).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(h);else if(l.opListReadCapability)l.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof I0){let r=jP;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Fa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Ss=new WeakMap,br=new WeakMap,ti=new WeakSet,Wa=function(e=!1){if(_(this,ti,Tf).call(this),!c(this,br)||this.destroyed)return!1;if(e)return w(this,Ss,setTimeout(()=>{w(this,Ss,null),_(this,ti,Wa).call(this,!1)},zP)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,br,!1),!0},Tf=function(){c(this,Ss)&&(clearTimeout(c(this,Ss)),w(this,Ss,null))};var $o,Hp;class YP{constructor(){E(this,$o,new Set);E(this,Hp,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};c(this,Hp).then(()=>{for(const r of c(this,$o))r.call(this,i)})}addEventListener(e,t){c(this,$o).add(t)}removeEventListener(e,t){c(this,$o).delete(t)}terminate(){c(this,$o).clear()}}$o=new WeakMap,Hp=new WeakMap;const pr={isWorkerDisabled:!1,fakeWorkerId:0};Jt&&(pr.isWorkerDisabled=!0,$r.workerSrc||($r.workerSrc="./pdf.worker.mjs")),pr.isSameOrigin=function(n,e){let t;try{if(t=new URL(n),!t.origin||t.origin==="null")return!1}catch{return!1}const i=new URL(e,t);return t.origin===i.origin},pr.createCDNWrapper=function(n){const e=`await import("${n}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Vo,zl,Rf,Hl,Pf;const kn=class kn{constructor({name:e=null,port:t=null,verbosity:i=kR()}={}){E(this,zl);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=c(kn,Vo))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(kn,Vo)||w(kn,Vo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Jt?Promise.all([nr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Qc("main","worker",e),this._messageHandler.on("ready",function(){}),_(this,zl,Rf).call(this)}_initialize(){if(pr.isWorkerDisabled||c(kn,Hl,Pf)){this._setupFakeWorker();return}let{workerSrc:e}=kn;try{pr.isSameOrigin(window.location.href,e)||(e=pr.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Qc("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",a=>{if(s.abort(),this.destroyed||!a){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,_(this,zl,Rf).call(this)}),i.on("ready",a=>{if(s.abort(),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{gg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){pr.isWorkerDisabled||(ge("Setting up fake worker."),pr.isWorkerDisabled=!0),kn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new YP;this._port=t;const i=`fake${pr.fakeWorkerId++}`,r=new Qc(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new Qc(i,i+"_worker",t),_(this,zl,Rf).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=c(kn,Vo))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=c(this,Vo))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new kn(e)}static get workerSrc(){if($r.workerSrc)return $r.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return be(this,"_setupFakeWorkerGlobal",(async()=>c(this,Hl,Pf)?c(this,Hl,Pf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Vo=new WeakMap,zl=new WeakSet,Rf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Hl=new WeakSet,Pf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(kn,Hl),E(kn,Vo);let gl=kn;var xr,Bi,Bl,Ul,Ui,Wo,Jc;class qP{constructor(e,t,i,r,s){E(this,Wo);E(this,xr,new Map);E(this,Bi,new Map);E(this,Bl,new Map);E(this,Ul,new Map);E(this,Ui,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new jb,this.fontLoader=new KR({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return be(this,"annotationStorage",new j0)}getRenderingIntent(e,t=fs.ENABLE,i=null,r=!1){let s=Jn.DISPLAY,o=Ov;switch(e){case"any":s=Jn.ANY;break;case"display":break;case"print":s=Jn.PRINT;break;default:ge(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case fs.DISABLE:s+=Jn.ANNOTATIONS_DISABLE;break;case fs.ENABLE:break;case fs.ENABLE_FORMS:s+=Jn.ANNOTATIONS_FORMS;break;case fs.ENABLE_STORAGE:s+=Jn.ANNOTATIONS_STORAGE,o=(s&Jn.PRINT&&i instanceof Ab?i:this.annotationStorage).serializable;break;default:ge(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(s+=Jn.OPLIST),{renderingIntent:s,cacheKey:`${s}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,Ui))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Bi).values())e.push(r._destroy());c(this,Bi).clear(),c(this,Bl).clear(),c(this,Ul).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,xr).clear(),this.filterFactory.destroy(),Sp.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Fa("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}xt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",i=>{const r=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then(()=>{var o;(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),s.onProgress=a=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:a.loaded,total:a.total})}),r.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(i,r)=>{xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){r.close();return}xt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new XP(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new pv(i.message,i.code);break;case"InvalidPDFException":r=new US(i.message);break;case"MissingPDFException":r=new Ia(i.message);break;case"UnexpectedResponseException":r=new mg(i.message,i.status);break;case"UnknownErrorException":r=new gv(i.message,i.details);break;default:Oe("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(w(this,Ui,Promise.withResolvers()),t.onPassword){const r=s=>{s instanceof Error?c(this,Ui).reject(s):c(this,Ui).resolve({password:s})};try{t.onPassword(r,i.code)}catch(s){c(this,Ui).reject(s)}}else c(this,Ui).reject(new pv(i.message,i.code));return c(this,Ui).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,Bi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in s){const p=s.error;ge(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,d=new YR(s,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=s;xt(f,"The imageRef must be defined.");for(const p of c(this,Bi).values())for(const[,g]of p.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,o])=>{var l;if(this.destroyed)return;const a=c(this,Bi).get(r);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(s){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>AR&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ge("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=c(this,Bl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&c(this,Ul).set(s.refStr,e);const o=new KP(t,s,this,this._params.pdfBug);return c(this,Bi).set(t,o),o});return c(this,Bl).set(t,r),r}getPageIndex(e){return Q_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _(this,Wo,Jc).call(this,"GetFieldObjects")}hasJSActions(){return _(this,Wo,Jc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _(this,Wo,Jc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return _(this,Wo,Jc).call(this,"GetOptionalContentConfig").then(t=>new gP(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,xr).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new fP(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,xr).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Bi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,xr).clear(),this.filterFactory.destroy(!0),Sp.cleanup()}}cachedPageNumber(e){if(!Q_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,Ul).get(t)??null}}xr=new WeakMap,Bi=new WeakMap,Bl=new WeakMap,Ul=new WeakMap,Ui=new WeakMap,Wo=new WeakSet,Jc=function(e,t=null){const i=c(this,xr).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return c(this,xr).set(e,r),r};const sf=Symbol("INITIAL_DATA");var mi,Th,Gv;class jb{constructor(){E(this,Th);E(this,mi,Object.create(null))}get(e,t=null){if(t){const r=_(this,Th,Gv).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=c(this,mi)[e];if(!i||i.data===sf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=c(this,mi)[e];return!!t&&t.data!==sf}resolve(e,t=null){const i=_(this,Th,Gv).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in c(this,mi)){const{data:i}=c(this,mi)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}w(this,mi,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,mi)){const{data:t}=c(this,mi)[e];t!==sf&&(yield[e,t])}}}mi=new WeakMap,Th=new WeakSet,Gv=function(e){var t;return(t=c(this,mi))[e]||(t[e]={...Promise.withResolvers(),data:sf})};var bs;class QP{constructor(e){E(this,bs,null);w(this,bs,e),this.onContinue=null}get promise(){return c(this,bs).capability.promise}cancel(e=0){c(this,bs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,bs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,bs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}bs=new WeakMap;var xs,Go;const po=class po{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){E(this,xs,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new QP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(c(po,Go).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(po,Go).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:o}=this.params;this.gfx=new pl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,xs)&&(window.cancelAnimationFrame(c(this,xs)),w(this,xs,null)),c(po,Go).delete(this._canvas),this.callback(e||new I0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,xs,window.requestAnimationFrame(()=>{w(this,xs,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(po,Go).delete(this._canvas),this.callback())))}};xs=new WeakMap,Go=new WeakMap,E(po,Go,new WeakSet);let Xv=po;const JP="4.4.168",ZP="19fbc8998";function J_(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function zc(n){return Math.max(0,Math.min(255,255*n))}class Z_{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=zc(e),[e,e,e]}static G_HTML([e]){const t=J_(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(zc)}static RGB_HTML(e){return`#${e.map(J_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[zc(1-Math.min(1,e+r)),zc(1-Math.min(1,i+r)),zc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,o=1-i,a=Math.min(r,s,o);return["CMYK",r,s,o,a]}}class zb{static setupStorage(e,t,i,r,s){const o=r.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&s.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const a=s!=="richText",l=e.div;if(l.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),a&&ju.shouldBuildText(r.name)&&u.push(p)}return{textDivs:u}}const h=[[r,-1,o]];for(;h.length>0;){const[p,g,y]=h.at(-1);if(g+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:m}=S;if(m==="#text"){const A=document.createTextNode(S.value);u.push(A),y.append(A);continue}const v=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,m):document.createElement(m);if(y.append(v),S.attributes&&this.setAttributes({html:v,element:S,storage:t,intent:s,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,v]);else if(S.value){const A=document.createTextNode(S.value);a&&ju.shouldBuildText(m)&&u.push(A),v.append(A)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Cd=1e3,eL=9,Ca=new WeakSet;function Vr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class tL{static create(e){switch(e.data.annotationType){case yt.LINK:return new Hb(e);case yt.TEXT:return new nL(e);case yt.WIDGET:switch(e.data.fieldType){case"Tx":return new iL(e);case"Btn":return e.data.radioButton?new $b(e):e.data.checkBox?new sL(e):new oL(e);case"Ch":return new aL(e);case"Sig":return new rL(e)}return new Na(e);case yt.POPUP:return new Yv(e);case yt.FREETEXT:return new Kb(e);case yt.LINE:return new cL(e);case yt.SQUARE:return new uL(e);case yt.CIRCLE:return new hL(e);case yt.POLYLINE:return new Yb(e);case yt.CARET:return new fL(e);case yt.INK:return new qb(e);case yt.POLYGON:return new dL(e);case yt.HIGHLIGHT:return new pL(e);case yt.UNDERLINE:return new gL(e);case yt.SQUIGGLY:return new mL(e);case yt.STRIKEOUT:return new vL(e);case yt.STAMP:return new Qb(e);case yt.FILEATTACHMENT:return new yL(e);default:return new dt(e)}}}var Xo,$l,Vl,Rh,Kv;const W0=class W0{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){E(this,Rh);E(this,Xo,null);E(this,$l,!1);E(this,Vl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get hasPopupData(){return W0._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;c(this,Xo)||w(this,Xo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&_(this,Rh,Kv).call(this,t),(i=c(this,Vl))==null||i.popup.updateEdited(e)}resetEdited(){var e;c(this,Xo)&&(_(this,Rh,Kv).call(this,c(this,Xo).rect),(e=c(this,Vl))==null||e.popup.resetEdited(),w(this,Xo,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Na||(s.tabIndex=Cd);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Yv){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}const{width:a,height:l}=Vr(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(y>0||S>0){const v=`calc(${y}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;o.borderRadius=v}else if(this instanceof $b){const v=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=v}switch(t.borderStyle.style){case Oc.SOLID:o.borderStyle="solid";break;case Oc.DASHED:o.borderStyle="dashed";break;case Oc.BEVELED:ge("Unimplemented border style: beveled");break;case Oc.INSET:ge("Unimplemented border style: inset");break;case Oc.UNDERLINE:o.borderBottomStyle="solid";break}const m=t.borderColor||null;m?(w(this,$l,!0),o.borderColor=Q.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const u=Q.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=r.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(o.width=`${100*a/h}%`,o.height=`${100*l/d}%`):this.setRotation(g,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=Vr(this.data.rect);let a,l;e%180===0?(a=100*s/i,l=100*o/r):(a=100*o/i,l=100*s/r),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[i]=Z_[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:Z_[`${o}_rgb`](a)})};return be(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||i[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const o=i[r];if(o){const a={detail:{[r]:s},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,S,m,v]=e.subarray(2,6);if(r===y&&s===S&&t===m&&i===v)return}const{style:o}=this.container;let a;if(c(this,$l)){const{borderColor:y,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=r-t,u=s-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,S=e.length;y<S;y+=8){const m=e[y],v=e[y+1],A=e[y+2],x=e[y+3],k=h.createElement("rect"),R=(A-t)/l,L=(s-v)/u,b=(m-A)/l,I=(v-x)/u;k.setAttribute("x",R),k.setAttribute("y",L),k.setAttribute("width",b),k.setAttribute("height",I),p.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${L}" width="${b}" height="${I}"/>`)}c(this,$l)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=w(this,Vl,new Yv({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){Oe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(s===-1||o===t)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Ca.has(u)){ge(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:u})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&Ca.has(r)&&i.push({id:o,exportValue:s,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Xo=new WeakMap,$l=new WeakMap,Vl=new WeakMap,Rh=new WeakSet,Kv=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:h}=Vr(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+l)/o}%`,r===0?(t.width=`${100*u/s}%`,t.height=`${100*h/o}%`):this.setRotation(r)};let dt=W0;var jn,lo,Bb,Ub;class Hb extends dt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});E(this,jn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(_(this,jn,Bb).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(_(this,jn,Ub).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&_(this,jn,lo).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),_(this,jn,lo).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const o=r.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),_(this,jn,lo).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),_(this,jn,lo).call(this),!this._fieldObjects){ge('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var d;r==null||r();const{fields:s,refs:o,include:a}=i,l=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const p of s){const g=this._fieldObjects[p]||[];for(const{id:y}of g)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===a&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!Ca.has(g)){ge(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}jn=new WeakSet,lo=function(){this.container.setAttribute("data-internal-link","")},Bb=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,r),!1},_(this,jn,lo).call(this)},Ub=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),_(this,jn,lo).call(this)};class nL extends dt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Na extends dt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return yn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(e,t,i,r){var s,o,a;for(const[l,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Q.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||eL,s=e.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(hm*r))||1,d=u/h;o=Math.min(r,l(d/hm))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(u/hm))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=Q.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class iL extends Na{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),s.setValue(o.id,{[r]:i})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ca.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Cd,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var y;if(h.focused)return;const{target:g}=p;h.userValue&&(g.value=h.userValue),h.lastCommittedValue=g.value,h.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const g={value(y){h.userValue=y.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),y.target.value=h.userValue},formattedValue(y){const{formattedValue:S}=y.detail;h.formattedValue=S,S!=null&&y.target!==document.activeElement&&(y.target.value=S),e.setValue(t,{formattedValue:S})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var A;const{charLimit:S}=y.detail,{target:m}=y;if(S===0){m.removeAttribute("maxLength");return}m.setAttribute("maxLength",S);let v=h.userValue;!v||v.length<=S||(v=v.slice(0,S),m.value=h.userValue=v,e.setValue(t,{value:v}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:m.selectionStart,selEnd:m.selectionEnd}}))}};this._dispatchEventFromSandbox(g,p)}),i.addEventListener("keydown",p=>{var S;h.commitKey=1;let g=-1;if(p.key==="Escape"?g=0:p.key==="Enter"&&!this.data.multiLine?g=2:p.key==="Tab"&&(h.commitKey=3),g===-1)return;const{value:y}=p.target;h.lastCommittedValue!==y&&(h.lastCommittedValue=y,h.userValue=y,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:g,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var y,S;if(!h.focused||!p.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(h.focused=!1);const{value:g}=p.target;h.userValue=g,h.lastCommittedValue!==g&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",p=>{var k;h.lastCommittedValue=null;const{data:g,target:y}=p,{value:S,selectionStart:m,selectionEnd:v}=y;let A=m,x=v;switch(p.inputType){case"deleteWordBackward":{const R=S.substring(0,m).match(/\w*[^\w]*$/);R&&(A-=R[0].length);break}case"deleteWordForward":{const R=S.substring(m).match(/^[^\w]*\w*/);R&&(x+=R[0].length);break}case"deleteContentBackward":m===v&&(A-=1);break;case"deleteContentForward":m===v&&(x+=1);break}p.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:g||"",willCommit:!1,selStart:A,selEnd:x}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class rL extends Na{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class sL extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Ca.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Cd,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i)){const h=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $b extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Ca.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=Cd,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class oL extends Hb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class aL extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Ca.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Cd;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let o=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=r;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const y of r.options)y.selected=g.has(y.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){r.multiple=!0},remove(f){const p=r.options,g=f.detail.remove;p[g].selected=!1,r.remove(g),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:g,exportValue:y}=f.detail.insert,S=r.children[p],m=document.createElement("option");m.textContent=g,m.value=y,S?S.before(m):r.append(m),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;r.length!==0;)r.remove(0);for(const g of p){const{displayValue:y,exportValue:S}=g,m=document.createElement("option");m.textContent=y,m.value=S,r.append(m)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),r.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Yv extends dt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:dt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new lL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${VS}${i}`).join(",")),this.container}}var Wl,Bp,Up,Gl,Ko,at,Cr,Yo,Ph,Lh,Xl,kr,vi,Tr,Mh,Rr,Dh,qo,Qo,je,Lf,qv,Vb,Wb,Gb,Xb,Mf,Df,Qv;class lL{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:u,parentRect:h,open:d}){E(this,je);E(this,Wl,_(this,je,Gb).bind(this));E(this,Bp,_(this,je,Qv).bind(this));E(this,Up,_(this,je,Df).bind(this));E(this,Gl,_(this,je,Mf).bind(this));E(this,Ko,null);E(this,at,null);E(this,Cr,null);E(this,Yo,null);E(this,Ph,null);E(this,Lh,null);E(this,Xl,null);E(this,kr,!1);E(this,vi,null);E(this,Tr,null);E(this,Mh,null);E(this,Rr,null);E(this,Dh,null);E(this,qo,null);E(this,Qo,!1);var f;w(this,at,e),w(this,Dh,r),w(this,Cr,o),w(this,Rr,a),w(this,Lh,l),w(this,Ko,t),w(this,Mh,u),w(this,Xl,h),w(this,Ph,i),w(this,Yo,YS.toDateObject(s)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,Gl)),p.addEventListener("mouseenter",c(this,Up)),p.addEventListener("mouseleave",c(this,Bp)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",c(this,Wl));c(this,at).hidden=!0,d&&_(this,je,Mf).call(this)}render(){if(c(this,vi))return;const e=w(this,vi,document.createElement("div"));if(e.className="popup",c(this,Ko)){const s=e.style.outlineColor=Q.makeHexColor(...c(this,Ko));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=Q.makeHexColor(...c(this,Ko).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=c(this,Dh),e.append(t),c(this,Yo)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),s.setAttribute("data-l10n-args",JSON.stringify({date:c(this,Yo).toLocaleDateString(),time:c(this,Yo).toLocaleTimeString()})),t.append(s)}const r=c(this,je,Lf);if(r)zb.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(c(this,Cr));e.append(s)}c(this,at).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const a=r[s];i.append(document.createTextNode(a)),s<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;c(this,qo)||w(this,qo,{contentsObj:c(this,Cr),richText:c(this,Rr)}),e&&w(this,Tr,null),t&&(w(this,Rr,_(this,je,Wb).call(this,t)),w(this,Cr,null)),(i=c(this,vi))==null||i.remove(),w(this,vi,null)}resetEdited(){var e;c(this,qo)&&({contentsObj:xn(this,Cr)._,richText:xn(this,Rr)._}=c(this,qo),w(this,qo,null),(e=c(this,vi))==null||e.remove(),w(this,vi,null),w(this,Tr,null))}forceHide(){w(this,Qo,this.isVisible),c(this,Qo)&&(c(this,at).hidden=!0)}maybeShow(){c(this,Qo)&&(c(this,vi)||_(this,je,Df).call(this),w(this,Qo,!1),c(this,at).hidden=!1)}get isVisible(){return c(this,at).hidden===!1}}Wl=new WeakMap,Bp=new WeakMap,Up=new WeakMap,Gl=new WeakMap,Ko=new WeakMap,at=new WeakMap,Cr=new WeakMap,Yo=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,Xl=new WeakMap,kr=new WeakMap,vi=new WeakMap,Tr=new WeakMap,Mh=new WeakMap,Rr=new WeakMap,Dh=new WeakMap,qo=new WeakMap,Qo=new WeakMap,je=new WeakSet,Lf=function(){const e=c(this,Rr),t=c(this,Cr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Rr).html||null},qv=function(){var e,t,i;return((i=(t=(e=c(this,je,Lf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},Vb=function(){var e,t,i;return((i=(t=(e=c(this,je,Lf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},Wb=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,je,Vb),fontSize:c(this,je,qv)?`calc(${c(this,je,qv)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return i},Gb=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,kr))&&_(this,je,Mf).call(this)},Xb=function(){if(c(this,Tr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=c(this,Lh);let o=!!c(this,Xl),a=o?c(this,Xl):c(this,Mh);for(const g of c(this,Ph))if(!a||Q.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=Q.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=l[0]+h,f=l[1];w(this,Tr,[100*(d-r)/t,100*(f-s)/i]);const{style:p}=c(this,at);p.left=`${c(this,Tr)[0]}%`,p.top=`${c(this,Tr)[1]}%`},Mf=function(){w(this,kr,!c(this,kr)),c(this,kr)?(_(this,je,Df).call(this),c(this,at).addEventListener("click",c(this,Gl)),c(this,at).addEventListener("keydown",c(this,Wl))):(_(this,je,Qv).call(this),c(this,at).removeEventListener("click",c(this,Gl)),c(this,at).removeEventListener("keydown",c(this,Wl)))},Df=function(){c(this,vi)||this.render(),this.isVisible?c(this,kr)&&c(this,at).classList.add("focused"):(_(this,je,Xb).call(this),c(this,at).hidden=!1,c(this,at).style.zIndex=parseInt(c(this,at).style.zIndex)+1e3)},Qv=function(){c(this,at).classList.remove("focused"),!(c(this,kr)||!this.isVisible)&&(c(this,at).hidden=!0,c(this,at).style.zIndex=parseInt(c(this,at).style.zIndex)-1e3)};class Kb extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Ih;class cL extends dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Ih,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Vr(t.rect),s=this.svgFactory.create(i,r,!0),o=w(this,Ih,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var Fh;class uL extends dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Fh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Vr(t.rect),s=this.svgFactory.create(i,r,!0),o=t.borderStyle.width,a=w(this,Fh,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fh=new WeakMap;var Nh;class hL extends dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Nh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Vr(t.rect),s=this.svgFactory.create(i,r,!0),o=t.borderStyle.width,a=w(this,Nh,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",r/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;var Oh;class Yb extends dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Oh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:s}}=this;if(!i)return this.container;const{width:o,height:a}=Vr(t),l=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-t[0],g=t[3]-i[d+1];u.push(`${p},${g}`)}u=u.join(" ");const h=w(this,Oh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oh=new WeakMap;class dL extends Yb{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fL extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var jh;class qb extends dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,jh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Ae.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:s}}=this,{width:o,height:a}=Vr(t),l=this.svgFactory.create(o,a,!0);for(const u of i){let h=[];for(let f=0,p=u.length;f<p;f+=2){const g=u[f]-t[0],y=t[3]-u[f+1];h.push(`${g},${y}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);c(this,jh).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),!s&&this.hasPopupData&&this._createPopup(),l.append(d)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return c(this,jh)}addHighlightArea(){this.container.classList.add("highlightArea")}}jh=new WeakMap;class pL extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class gL extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mL extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class vL extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Qb extends dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var zh,Hh,Jv;class yL extends dt{constructor(t){var r;super(t,{isRenderable:!0});E(this,Hh);E(this,zh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",_(this,Hh,Jv).bind(this)),w(this,zh,r);const{isMac:s}=yn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&_(this,Hh,Jv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,zh)}addHighlightArea(){this.container.classList.add("highlightArea")}}zh=new WeakMap,Hh=new WeakSet,Jv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Bh,Jo,Kl,Ta,Jb,Zv,uE;let wL=(uE=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o}){E(this,Ta);E(this,Bh,null);E(this,Jo,null);E(this,Kl,new Map);this.div=e,w(this,Bh,t),w(this,Jo,i),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}async render(e){var o;const{annotations:t}=e,i=this.div;ba(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new D0,annotationStorage:e.annotationStorage||new j0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===yt.POPUP;if(l){const d=r.get(a.id);if(!d)continue;s.elements=d}else{const{width:d,height:f}=Vr(a.rect);if(d<=0||f<=0)continue}s.data=a;const u=tL.create(s);if(!u.isRenderable)continue;if(!l&&a.popupRef){const d=r.get(a.popupRef);d?d.push(u):r.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),_(this,Ta,Jb).call(this,h,a.id),u.annotationEditorType>0&&(c(this,Kl).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}_(this,Ta,Zv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ba(t,{rotation:e.rotation}),_(this,Ta,Zv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Kl).values())}getEditableAnnotation(e){return c(this,Kl).get(e)}},Bh=new WeakMap,Jo=new WeakMap,Kl=new WeakMap,Ta=new WeakSet,Jb=function(e,t){var r;const i=e.firstChild||e;i.id=`${VS}${t}`,this.div.append(e),(r=c(this,Bh))==null||r.moveElementInDOM(this.div,e,i,!1)},Zv=function(){if(!c(this,Jo))return;const e=this.div;for(const[t,i]of c(this,Jo)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}c(this,Jo).clear()},uE);const of=/\r\n?|\n/g;var Uh,$h,Vh,Wh,Gh,yi,Ln,Xh,Mn,Yl,vt,Zb,e1,t1,If,Gr,Ff,Nf,n1,ty,i1;const We=class We extends Le{constructor(t){super({...t,name:"freeTextEditor"});E(this,vt);E(this,Uh,this.editorDivBlur.bind(this));E(this,$h,this.editorDivFocus.bind(this));E(this,Vh,this.editorDivInput.bind(this));E(this,Wh,this.editorDivKeydown.bind(this));E(this,Gh,this.editorDivPaste.bind(this));E(this,yi);E(this,Ln,"");E(this,Xh,`${this.id}-editor`);E(this,Mn);E(this,Yl,null);w(this,yi,t.color||We._defaultColor||Le._defaultLineColor),w(this,Mn,t.fontSize||We._defaultFontSize)}static get _keyboardManager(){const t=We.prototype,i=o=>o.isEmpty(),r=xa.TRANSLATE_SMALL,s=xa.TRANSLATE_BIG;return be(this,"_keyboardManager",new bd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){Le.initialize(t,i,{strings:["pdfjs-free-text-default-content"]});const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case oe.FREETEXT_SIZE:We._defaultFontSize=i;break;case oe.FREETEXT_COLOR:We._defaultColor=i;break}}updateParams(t,i){switch(t){case oe.FREETEXT_SIZE:_(this,vt,Zb).call(this,i);break;case oe.FREETEXT_COLOR:_(this,vt,e1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[oe.FREETEXT_SIZE,We._defaultFontSize],[oe.FREETEXT_COLOR,We._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[oe.FREETEXT_SIZE,c(this,Mn)],[oe.FREETEXT_COLOR,c(this,yi)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-We._internalPadding*t,-(We._internalPadding+c(this,Mn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ae.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",c(this,Wh),{signal:t}),this.editorDiv.addEventListener("focus",c(this,$h),{signal:t}),this.editorDiv.addEventListener("blur",c(this,Uh),{signal:t}),this.editorDiv.addEventListener("input",c(this,Vh),{signal:t}),this.editorDiv.addEventListener("paste",c(this,Gh),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Xh)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",c(this,Wh)),this.editorDiv.removeEventListener("focus",c(this,$h)),this.editorDiv.removeEventListener("blur",c(this,Uh)),this.editorDiv.removeEventListener("input",c(this,Vh)),this.editorDiv.removeEventListener("paste",c(this,Gh)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Ln),i=w(this,Ln,_(this,vt,t1).call(this).trimEnd());if(t===i)return;const r=s=>{if(w(this,Ln,s),!s){this.remove();return}_(this,vt,Nf).call(this),this._uiManager.rebuild(this),_(this,vt,If).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),_(this,vt,If).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){We._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Xh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Le._l10nPromise.get("pdfjs-free-text-default-content").then(s=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",s)}),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Mn)}px * var(--scale-factor))`,r.color=c(this,yi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),_p(this,this.div,["dblclick","keydown"]),this.width){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=c(this,Yl);let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,y;switch(this.rotation){case 0:g=t+(a[0]-f)/h,y=i+this.height-(a[1]-p)/d;break;case 90:g=t+(a[0]-f)/h,y=i-(a[1]-p)/d,[l,u]=[u,-l];break;case 180:g=t-this.width+(a[0]-f)/h,y=i-(a[1]-p)/d,[l,u]=[-l,-u];break;case 270:g=t+(a[0]-f-this.height*d)/h,y=i+(a[1]-p-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(g*s,y*o,l,u)}else this.setAt(t*s,i*o,this.width*s,this.height*o);_(this,vt,Nf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,y,S;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=_(g=We,Gr,ty).call(g,i.getData("text")||"").replaceAll(of,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const m=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(of,"")),m!==this.editorDiv){let v=h;for(const A of this.editorDiv.childNodes){if(A===m){v=d;continue}v.push(_(y=We,Gr,Ff).call(y,A))}}h.push(l.nodeValue.slice(0,u).replaceAll(of,""))}else if(l===this.editorDiv){let m=h,v=0;for(const A of this.editorDiv.childNodes)v++===u&&(m=d),m.push(_(S=We,Gr,Ff).call(S,A))}w(this,Ln,`${h.join(`
`)}${s}${d.join(`
`)}`),_(this,vt,Nf).call(this);const f=new Range;let p=h.reduce((m,v)=>m+v.length,0);for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const v=m.nodeValue.length;if(p<=v){f.setStart(m,p),f.setEnd(m,p);break}p-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(t,i,r){var a;let s=null;if(t instanceof Kb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f},textContent:p,textPosition:g,parent:{page:{pageNumber:y}}}=t;if(!p||p.length===0)return null;s=t={annotationType:Ae.FREETEXT,color:Array.from(u),fontSize:l,value:p.join(`
`),position:g,pageIndex:y-1,rect:h.slice(0),rotation:d,id:f,deleted:!1}}const o=super.deserialize(t,i,r);return w(o,Mn,t.fontSize),w(o,yi,Q.makeHexColor(...t.color)),w(o,Ln,_(a=We,Gr,ty).call(a,t.value)),o.annotationElementId=t.id||null,w(o,Yl,s),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=We._internalPadding*this.parentScale,r=this.getRect(i,i),s=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,yi)),o={annotationType:Ae.FREETEXT,color:s,fontSize:c(this,Mn),value:_(this,vt,n1).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!_(this,vt,i1).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${c(this,Mn)}px * var(--scale-factor))`,r.color=c(this,yi),i.replaceChildren();for(const o of c(this,Ln).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const s=We._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:c(this,Ln)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Uh=new WeakMap,$h=new WeakMap,Vh=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,yi=new WeakMap,Ln=new WeakMap,Xh=new WeakMap,Mn=new WeakMap,Yl=new WeakMap,vt=new WeakSet,Zb=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-c(this,Mn))*this.parentScale),w(this,Mn,s),_(this,vt,If).call(this)},r=c(this,Mn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},e1=function(t){const i=s=>{w(this,yi,this.editorDiv.style.color=s)},r=c(this,yi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},t1=function(){var i;const t=[];this.editorDiv.normalize();for(const r of this.editorDiv.childNodes)t.push(_(i=We,Gr,Ff).call(i,r));return t.join(`
`)},If=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},Gr=new WeakSet,Ff=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(of,"")},Nf=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ln))for(const t of c(this,Ln).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},n1=function(){return c(this,Ln).replaceAll(""," ")},ty=function(t){return t.replaceAll(" ","")},i1=function(t){const{value:i,fontSize:r,color:s,pageIndex:o}=c(this,Yl);return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((a,l)=>a!==s[l])||t.pageIndex!==o},E(We,Gr),le(We,"_freeTextDefaultContent",""),le(We,"_internalPadding",0),le(We,"_defaultColor",null),le(We,"_defaultFontSize",10),le(We,"_type","freetext"),le(We,"_editorType",Ae.FREETEXT);let ey=We;var Kh,Cs,wi,cn,r1,Of,s1,o1,iy;class ny{constructor(e,t=0,i=0,r=!0){E(this,cn);E(this,Kh);E(this,Cs,[]);E(this,wi,[]);let s=1/0,o=-1/0,a=1/0,l=-1/0;const h=10**-4;for(const{x:m,y:v,width:A,height:x}of e){const k=Math.floor((m-t)/h)*h,R=Math.ceil((m+A+t)/h)*h,L=Math.floor((v-t)/h)*h,b=Math.ceil((v+x+t)/h)*h,I=[k,L,b,!0],F=[R,L,b,!1];c(this,Cs).push(I,F),s=Math.min(s,k),o=Math.max(o,R),a=Math.min(a,L),l=Math.max(l,b)}const d=o-s+2*i,f=l-a+2*i,p=s-i,g=a-i,y=c(this,Cs).at(r?-1:-2),S=[y[0],y[2]];for(const m of c(this,Cs)){const[v,A,x]=m;m[0]=(v-p)/d,m[1]=(A-g)/f,m[2]=(x-g)/f}w(this,Kh,{x:p,y:g,width:d,height:f,lastPoint:S})}getOutlines(){c(this,Cs).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of c(this,Cs))t[3]?(e.push(..._(this,cn,iy).call(this,t)),_(this,cn,s1).call(this,t)):(_(this,cn,o1).call(this,t),e.push(..._(this,cn,iy).call(this,t)));return _(this,cn,r1).call(this,e)}}Kh=new WeakMap,Cs=new WeakMap,wi=new WeakMap,cn=new WeakSet,r1=function(e){const t=[],i=new Set;for(const o of e){const[a,l,u]=o;t.push([a,l,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],u=t[o+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const r=[];let s;for(;i.size>0;){const o=i.values().next().value;let[a,l,u,h,d]=o;i.delete(o);let f=a,p=l;for(s=[a,u],r.push(s);;){let g;if(i.has(h))g=h;else if(i.has(d))g=d;else break;i.delete(g),[a,l,u,h,d]=g,f!==a&&(s.push(f,p,a,p===l?l:u),f=a),p=p===l?u:l}s.push(f,p)}return new _L(r,c(this,Kh))},Of=function(e){const t=c(this,wi);let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,o=t[s][0];if(o===e)return s;o<e?i=s+1:r=s-1}return r+1},s1=function([,e,t]){const i=_(this,cn,Of).call(this,e);c(this,wi).splice(i,0,[e,t])},o1=function([,e,t]){const i=_(this,cn,Of).call(this,e);for(let r=i;r<c(this,wi).length;r++){const[s,o]=c(this,wi)[r];if(s!==e)break;if(s===e&&o===t){c(this,wi).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,o]=c(this,wi)[r];if(s!==e)break;if(s===e&&o===t){c(this,wi).splice(r,1);return}}},iy=function(e){const[t,i,r]=e,s=[[t,i,r]],o=_(this,cn,Of).call(this,r);for(let a=0;a<o;a++){const[l,u]=c(this,wi)[a];for(let h=0,d=s.length;h<d;h++){const[,f,p]=s[h];if(!(u<=f||p<=l)){if(f>=l){if(p>u)s[h][1]=u;else{if(d===1)return[];s.splice(h,1),h--,d--}continue}s[h][2]=l,p>u&&s.push([t,u,p])}}}return s};class a1{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof sy}}var Yh,ql;class _L extends a1{constructor(t,i){super();E(this,Yh);E(this,ql);w(this,ql,t),w(this,Yh,i)}toSVGPath(){const t=[];for(const i of c(this,ql)){let[r,s]=i;t.push(`M${r} ${s}`);for(let o=2;o<i.length;o+=2){const a=i[o],l=i[o+1];a===r?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,i,r,s],o){const a=[],l=r-t,u=s-i;for(const h of c(this,ql)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*l,d[f+1]=s-h[f+1]*u;a.push(d)}return a}get box(){return c(this,Yh)}}Yh=new WeakMap,ql=new WeakMap;var $i,Pr,Ql,Jl,Vi,Ee,Zo,ea,qh,Qh,Zl,ec,ks,Jh,$p,Vp,Zh,ry;const hr=class hr{constructor({x:e,y:t},i,r,s,o,a=0){E(this,Zh);E(this,$i);E(this,Pr,[]);E(this,Ql);E(this,Jl);E(this,Vi,[]);E(this,Ee,new Float64Array(18));E(this,Zo);E(this,ea);E(this,qh);E(this,Qh);E(this,Zl);E(this,ec);E(this,ks,[]);w(this,$i,i),w(this,ec,s*r),w(this,Jl,o),c(this,Ee).set([NaN,NaN,NaN,NaN,e,t],6),w(this,Ql,a),w(this,Qh,c(hr,Jh)*r),w(this,qh,c(hr,Vp)*r),w(this,Zl,r),c(this,ks).push(e,t)}get free(){return!0}isEmpty(){return isNaN(c(this,Ee)[8])}add({x:e,y:t}){var I;w(this,Zo,e),w(this,ea,t);const[i,r,s,o]=c(this,$i);let[a,l,u,h]=c(this,Ee).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<c(this,qh))return!1;const g=p-c(this,Qh),y=g/p,S=y*d,m=y*f;let v=a,A=l;a=u,l=h,u+=S,h+=m,(I=c(this,ks))==null||I.push(e,t);const x=-m/g,k=S/g,R=x*c(this,ec),L=k*c(this,ec);return c(this,Ee).set(c(this,Ee).subarray(2,8),0),c(this,Ee).set([u+R,h+L],4),c(this,Ee).set(c(this,Ee).subarray(14,18),12),c(this,Ee).set([u-R,h-L],16),isNaN(c(this,Ee)[6])?(c(this,Vi).length===0&&(c(this,Ee).set([a+R,l+L],2),c(this,Vi).push(NaN,NaN,NaN,NaN,(a+R-i)/s,(l+L-r)/o),c(this,Ee).set([a-R,l-L],14),c(this,Pr).push(NaN,NaN,NaN,NaN,(a-R-i)/s,(l-L-r)/o)),c(this,Ee).set([v,A,a,l,u,h],6),!this.isEmpty()):(c(this,Ee).set([v,A,a,l,u,h],6),Math.abs(Math.atan2(A-l,v-a)-Math.atan2(m,S))<Math.PI/2?([a,l,u,h]=c(this,Ee).subarray(2,6),c(this,Vi).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/s,((l+h)/2-r)/o),[a,l,v,A]=c(this,Ee).subarray(14,18),c(this,Pr).push(NaN,NaN,NaN,NaN,((v+a)/2-i)/s,((A+l)/2-r)/o),!0):([v,A,a,l,u,h]=c(this,Ee).subarray(0,6),c(this,Vi).push(((v+5*a)/6-i)/s,((A+5*l)/6-r)/o,((5*a+u)/6-i)/s,((5*l+h)/6-r)/o,((a+u)/2-i)/s,((l+h)/2-r)/o),[u,h,a,l,v,A]=c(this,Ee).subarray(12,18),c(this,Pr).push(((v+5*a)/6-i)/s,((A+5*l)/6-r)/o,((5*a+u)/6-i)/s,((5*l+h)/6-r)/o,((a+u)/2-i)/s,((l+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Vi),t=c(this,Pr),i=c(this,Ee).subarray(4,6),r=c(this,Ee).subarray(16,18),[s,o,a,l]=c(this,$i),[u,h,d,f]=_(this,Zh,ry).call(this);if(isNaN(c(this,Ee)[6])&&!this.isEmpty())return`M${(c(this,Ee)[2]-s)/a} ${(c(this,Ee)[3]-o)/l} L${(c(this,Ee)[4]-s)/a} ${(c(this,Ee)[5]-o)/l} L${u} ${h} L${d} ${f} L${(c(this,Ee)[16]-s)/a} ${(c(this,Ee)[17]-o)/l} L${(c(this,Ee)[14]-s)/a} ${(c(this,Ee)[15]-o)/l} Z`;const p=[];p.push(`M${e[4]} ${e[5]}`);for(let g=6;g<e.length;g+=6)isNaN(e[g])?p.push(`L${e[g+4]} ${e[g+5]}`):p.push(`C${e[g]} ${e[g+1]} ${e[g+2]} ${e[g+3]} ${e[g+4]} ${e[g+5]}`);p.push(`L${(i[0]-s)/a} ${(i[1]-o)/l} L${u} ${h} L${d} ${f} L${(r[0]-s)/a} ${(r[1]-o)/l}`);for(let g=t.length-6;g>=6;g-=6)isNaN(t[g])?p.push(`L${t[g+4]} ${t[g+5]}`):p.push(`C${t[g]} ${t[g+1]} ${t[g+2]} ${t[g+3]} ${t[g+4]} ${t[g+5]}`);return p.push(`L${t[4]} ${t[5]} Z`),p.join(" ")}getOutlines(){var m;const e=c(this,Vi),t=c(this,Pr),i=c(this,Ee),r=i.subarray(4,6),s=i.subarray(16,18),[o,a,l,u]=c(this,$i),h=new Float64Array((((m=c(this,ks))==null?void 0:m.length)??0)+2);for(let v=0,A=h.length-2;v<A;v+=2)h[v]=(c(this,ks)[v]-o)/l,h[v+1]=(c(this,ks)[v+1]-a)/u;h[h.length-2]=(c(this,Zo)-o)/l,h[h.length-1]=(c(this,ea)-a)/u;const[d,f,p,g]=_(this,Zh,ry).call(this);if(isNaN(i[6])&&!this.isEmpty()){const v=new Float64Array(36);return v.set([NaN,NaN,NaN,NaN,(i[2]-o)/l,(i[3]-a)/u,NaN,NaN,NaN,NaN,(i[4]-o)/l,(i[5]-a)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(i[16]-o)/l,(i[17]-a)/u,NaN,NaN,NaN,NaN,(i[14]-o)/l,(i[15]-a)/u],0),new sy(v,h,c(this,$i),c(this,Zl),c(this,Ql),c(this,Jl))}const y=new Float64Array(c(this,Vi).length+24+c(this,Pr).length);let S=e.length;for(let v=0;v<S;v+=2){if(isNaN(e[v])){y[v]=y[v+1]=NaN;continue}y[v]=e[v],y[v+1]=e[v+1]}y.set([NaN,NaN,NaN,NaN,(r[0]-o)/l,(r[1]-a)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/u],S),S+=24;for(let v=t.length-6;v>=6;v-=6)for(let A=0;A<6;A+=2){if(isNaN(t[v+A])){y[S]=y[S+1]=NaN,S+=2;continue}y[S]=t[v+A],y[S+1]=t[v+A+1],S+=2}return y.set([NaN,NaN,NaN,NaN,t[4],t[5]],S),new sy(y,h,c(this,$i),c(this,Zl),c(this,Ql),c(this,Jl))}};$i=new WeakMap,Pr=new WeakMap,Ql=new WeakMap,Jl=new WeakMap,Vi=new WeakMap,Ee=new WeakMap,Zo=new WeakMap,ea=new WeakMap,qh=new WeakMap,Qh=new WeakMap,Zl=new WeakMap,ec=new WeakMap,ks=new WeakMap,Jh=new WeakMap,$p=new WeakMap,Vp=new WeakMap,Zh=new WeakSet,ry=function(){const e=c(this,Ee).subarray(4,6),t=c(this,Ee).subarray(16,18),[i,r,s,o]=c(this,$i);return[(c(this,Zo)+(e[0]-t[0])/2-i)/s,(c(this,ea)+(e[1]-t[1])/2-r)/o,(c(this,Zo)+(t[0]-e[0])/2-i)/s,(c(this,ea)+(t[1]-e[1])/2-r)/o]},E(hr,Jh,8),E(hr,$p,2),E(hr,Vp,c(hr,Jh)+c(hr,$p));let bp=hr;var tc,ta,Lr,ed,Dn,td,ut,wn,Zc,eu,l1;class sy extends a1{constructor(t,i,r,s,o,a){super();E(this,wn);E(this,tc);E(this,ta,null);E(this,Lr);E(this,ed);E(this,Dn);E(this,td);E(this,ut);w(this,ut,t),w(this,Dn,i),w(this,tc,r),w(this,td,s),w(this,Lr,o),w(this,ed,a),_(this,wn,l1).call(this,a);const{x:l,y:u,width:h,height:d}=c(this,ta);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-l)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${c(this,ut)[4]} ${c(this,ut)[5]}`];for(let i=6,r=c(this,ut).length;i<r;i+=6){if(isNaN(c(this,ut)[i])){t.push(`L${c(this,ut)[i+4]} ${c(this,ut)[i+5]}`);continue}t.push(`C${c(this,ut)[i]} ${c(this,ut)[i+1]} ${c(this,ut)[i+2]} ${c(this,ut)[i+3]} ${c(this,ut)[i+4]} ${c(this,ut)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,s],o){const a=r-t,l=s-i;let u,h;switch(o){case 0:u=_(this,wn,Zc).call(this,c(this,ut),t,s,a,-l),h=_(this,wn,Zc).call(this,c(this,Dn),t,s,a,-l);break;case 90:u=_(this,wn,eu).call(this,c(this,ut),t,i,a,l),h=_(this,wn,eu).call(this,c(this,Dn),t,i,a,l);break;case 180:u=_(this,wn,Zc).call(this,c(this,ut),r,i,-a,l),h=_(this,wn,Zc).call(this,c(this,Dn),r,i,-a,l);break;case 270:u=_(this,wn,eu).call(this,c(this,ut),r,s,-a,-l),h=_(this,wn,eu).call(this,c(this,Dn),r,s,-a,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,ta)}getNewOutline(t,i){const{x:r,y:s,width:o,height:a}=c(this,ta),[l,u,h,d]=c(this,tc),f=o*h,p=a*d,g=r*h+l,y=s*d+u,S=new bp({x:c(this,Dn)[0]*f+g,y:c(this,Dn)[1]*p+y},c(this,tc),c(this,td),t,c(this,ed),i??c(this,Lr));for(let m=2;m<c(this,Dn).length;m+=2)S.add({x:c(this,Dn)[m]*f+g,y:c(this,Dn)[m+1]*p+y});return S.getOutlines()}}tc=new WeakMap,ta=new WeakMap,Lr=new WeakMap,ed=new WeakMap,Dn=new WeakMap,td=new WeakMap,ut=new WeakMap,wn=new WeakSet,Zc=function(t,i,r,s,o){const a=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)a[l]=i+t[l]*s,a[l+1]=r+t[l+1]*o;return a},eu=function(t,i,r,s,o){const a=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)a[l]=i+t[l+1]*s,a[l+1]=r+t[l]*o;return a},l1=function(t){const i=c(this,ut);let r=i[4],s=i[5],o=r,a=s,l=r,u=s,h=r,d=s;const f=t?Math.max:Math.min;for(let m=6,v=i.length;m<v;m+=6){if(isNaN(i[m]))o=Math.min(o,i[m+4]),a=Math.min(a,i[m+5]),l=Math.max(l,i[m+4]),u=Math.max(u,i[m+5]),d<i[m+5]?(h=i[m+4],d=i[m+5]):d===i[m+5]&&(h=f(h,i[m+4]));else{const A=Q.bezierBoundingBox(r,s,...i.slice(m,m+6));o=Math.min(o,A[0]),a=Math.min(a,A[1]),l=Math.max(l,A[2]),u=Math.max(u,A[3]),d<A[3]?(h=A[2],d=A[3]):d===A[3]&&(h=f(h,A[2]))}r=i[m+4],s=i[m+5]}const p=o-c(this,Lr),g=a-c(this,Lr),y=l-o+2*c(this,Lr),S=u-a+2*c(this,Lr);w(this,ta,{x:p,y:g,width:y,height:S,lastPoint:[h,d]})};var nd,id,_i,na,nc,_t,rd,ic,sd,od,Ei,rc,$e,oy,ay,c1,co,u1,ls;const dr=class dr{constructor({editor:e=null,uiManager:t=null}){E(this,$e);E(this,nd,_(this,$e,c1).bind(this));E(this,id,_(this,$e,u1).bind(this));E(this,_i,null);E(this,na,null);E(this,nc);E(this,_t,null);E(this,rd,!1);E(this,ic,!1);E(this,sd,null);E(this,od);E(this,Ei,null);E(this,rc);var i;e?(w(this,ic,!1),w(this,rc,oe.HIGHLIGHT_COLOR),w(this,sd,e)):(w(this,ic,!0),w(this,rc,oe.HIGHLIGHT_DEFAULT_COLOR)),w(this,Ei,(e==null?void 0:e._uiManager)||t),w(this,od,c(this,Ei)._eventBus),w(this,nc,(e==null?void 0:e.color)||((i=c(this,Ei))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return be(this,"_keyboardManager",new bd([[["Escape","mac+Escape"],dr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],dr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],dr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],dr.prototype._moveToPrevious],[["Home","mac+Home"],dr.prototype._moveToBeginning],[["End","mac+End"],dr.prototype._moveToEnd]]))}renderButton(){const e=w(this,_i,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,Ei)._signal;e.addEventListener("click",_(this,$e,co).bind(this),{signal:t}),e.addEventListener("keydown",c(this,nd),{signal:t});const i=w(this,na,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=c(this,nc),e.append(i),e}renderMainDropdown(){const e=w(this,_t,_(this,$e,oy).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,_i)){_(this,$e,co).call(this,e);return}const t=e.target.getAttribute("data-color");t&&_(this,$e,ay).call(this,t,e)}_moveToNext(e){var t,i;if(!c(this,$e,ls)){_(this,$e,co).call(this,e);return}if(e.target===c(this,_i)){(t=c(this,_t).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=c(this,_t))==null?void 0:t.firstChild)||e.target===c(this,_i)){c(this,$e,ls)&&this._hideDropdownFromKeyboard();return}c(this,$e,ls)||_(this,$e,co).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!c(this,$e,ls)){_(this,$e,co).call(this,e);return}(t=c(this,_t).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,$e,ls)){_(this,$e,co).call(this,e);return}(t=c(this,_t).lastChild)==null||t.focus()}hideDropdown(){var e;(e=c(this,_t))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",c(this,id))}_hideDropdownFromKeyboard(){var e;if(!c(this,ic)){if(!c(this,$e,ls)){(e=c(this,sd))==null||e.unselect();return}this.hideDropdown(),c(this,_i).focus({preventScroll:!0,focusVisible:c(this,rd)})}}updateColor(e){if(c(this,na)&&(c(this,na).style.backgroundColor=e),!c(this,_t))return;const t=c(this,Ei).highlightColors.values();for(const i of c(this,_t).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,_i))==null||e.remove(),w(this,_i,null),w(this,na,null),(t=c(this,_t))==null||t.remove(),w(this,_t,null)}};nd=new WeakMap,id=new WeakMap,_i=new WeakMap,na=new WeakMap,nc=new WeakMap,_t=new WeakMap,rd=new WeakMap,ic=new WeakMap,sd=new WeakMap,od=new WeakMap,Ei=new WeakMap,rc=new WeakMap,$e=new WeakSet,oy=function(){const e=document.createElement("div"),t=c(this,Ei)._signal;e.addEventListener("contextmenu",Sn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of c(this,Ei).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.setAttribute("aria-selected",r===c(this,nc)),s.addEventListener("click",_(this,$e,ay).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",c(this,nd),{signal:t}),e},ay=function(e,t){t.stopPropagation(),c(this,od).dispatch("switchannotationeditorparams",{source:this,type:c(this,rc),value:e})},c1=function(e){dr._keyboardManager.exec(this,e)},co=function(e){if(c(this,$e,ls)){this.hideDropdown();return}if(w(this,rd,e.detail===0),window.addEventListener("pointerdown",c(this,id),{signal:c(this,Ei)._signal}),c(this,_t)){c(this,_t).classList.remove("hidden");return}const t=w(this,_t,_(this,$e,oy).call(this));c(this,_i).append(t)},u1=function(e){var t;(t=c(this,_t))!=null&&t.contains(e.target)||this.hideDropdown()},ls=function(){return c(this,_t)&&!c(this,_t).classList.contains("hidden")};let xp=dr;var sc,ad,Ts,ia,oc,qn,ld,cd,ra,Ai,tn,In,Wp,ac,sa,Et,lc,Wi,ud,ve,ly,cy,h1,d1,f1,uy,tu,ni,Ga,p1,jf,nu,g1,m1,v1,y1;const ke=class ke extends Le{constructor(t){super({...t,name:"highlightEditor"});E(this,ve);E(this,sc,null);E(this,ad,0);E(this,Ts);E(this,ia,null);E(this,oc,null);E(this,qn,null);E(this,ld,null);E(this,cd,0);E(this,ra,null);E(this,Ai,null);E(this,tn,null);E(this,In,!1);E(this,Wp,_(this,ve,p1).bind(this));E(this,ac,null);E(this,sa);E(this,Et,null);E(this,lc,"");E(this,Wi);E(this,ud,"");this.color=t.color||ke._defaultColor,w(this,Wi,t.thickness||ke._defaultThickness),w(this,sa,t.opacity||ke._defaultOpacity),w(this,Ts,t.boxes||null),w(this,ud,t.methodOfCreation||""),w(this,lc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(w(this,In,!0),_(this,ve,cy).call(this,t),_(this,ve,tu).call(this)):(w(this,sc,t.anchorNode),w(this,ad,t.anchorOffset),w(this,ld,t.focusNode),w(this,cd,t.focusOffset),_(this,ve,ly).call(this),_(this,ve,tu).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ke.prototype;return be(this,"_keyboardManager",new bd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,In)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Wi),methodOfCreation:c(this,ud)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;Le.initialize(t,i),ke._defaultColor||(ke._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case oe.HIGHLIGHT_DEFAULT_COLOR:ke._defaultColor=i;break;case oe.HIGHLIGHT_THICKNESS:ke._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return c(this,ac)}updateParams(t,i){switch(t){case oe.HIGHLIGHT_COLOR:_(this,ve,h1).call(this,i);break;case oe.HIGHLIGHT_THICKNESS:_(this,ve,d1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[oe.HIGHLIGHT_DEFAULT_COLOR,ke._defaultColor],[oe.HIGHLIGHT_THICKNESS,ke._defaultThickness]]}get propertiesToUpdate(){return[[oe.HIGHLIGHT_COLOR,this.color||ke._defaultColor],[oe.HIGHLIGHT_THICKNESS,c(this,Wi)||ke._defaultThickness],[oe.HIGHLIGHT_FREE,c(this,In)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(w(this,oc,new xp({editor:this})),t.addColorPicker(c(this,oc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,ve,nu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,_(this,ve,nu).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){_(this,ve,uy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,ve,tu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?_(this,ve,uy).call(this):t&&(_(this,ve,tu).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,o,a;const{drawLayer:i}=this.parent;let r;c(this,In)?(t=(t-this.rotation+360)%360,r=_(s=ke,ni,Ga).call(s,c(this,Ai).box,t)):r=_(o=ke,ni,Ga).call(o,this,t),i.rotate(c(this,tn),t),i.rotate(c(this,Et),t),i.updateBox(c(this,tn),r),i.updateBox(c(this,Et),_(a=ke,ni,Ga).call(a,c(this,qn).box,t))}render(){if(this.div)return this.div;const t=super.render();c(this,lc)&&(t.setAttribute("aria-label",c(this,lc)),t.setAttribute("role","mark")),c(this,In)?t.classList.add("free"):this.div.addEventListener("keydown",c(this,Wp),{signal:this._uiManager._signal});const i=w(this,ra,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,ia);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),_p(this,c(this,ra),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(c(this,Et),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(c(this,Et),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:_(this,ve,jf).call(this,!0);break;case 1:case 3:_(this,ve,jf).call(this,!1);break}}select(){var t,i;super.select(),c(this,Et)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,Et),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(c(this,Et),"selected"))}unselect(){var t;super.unselect(),c(this,Et)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,Et),"selected"),c(this,In)||_(this,ve,jf).call(this,!1))}get _mustFixPosition(){return!c(this,In)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(c(this,tn),t),this.parent.drawLayer.show(c(this,Et),t))}static startHighlighting(t,i,{target:r,x:s,y:o}){const{x:a,y:l,width:u,height:h}=r.getBoundingClientRect(),d=S=>{_(this,ni,v1).call(this,t,S)},f=t._signal,p={capture:!0,passive:!1,signal:f},g=S=>{S.preventDefault(),S.stopPropagation()},y=S=>{r.removeEventListener("pointermove",d),window.removeEventListener("blur",y),window.removeEventListener("pointerup",y),window.removeEventListener("pointerdown",g,p),window.removeEventListener("contextmenu",Sn),_(this,ni,y1).call(this,t,S)};window.addEventListener("blur",y,{signal:f}),window.addEventListener("pointerup",y,{signal:f}),window.addEventListener("pointerdown",g,p),window.addEventListener("contextmenu",Sn,{signal:f}),r.addEventListener("pointermove",d,{signal:f}),this._freeHighlight=new bp({x:s,y:o},[a,l,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,i,r){var y;const s=super.deserialize(t,i,r),{rect:[o,a,l,u],color:h,quadPoints:d}=t;s.color=Q.makeHexColor(...h),w(s,sa,t.opacity);const[f,p]=s.pageDimensions;s.width=(l-o)/f,s.height=(u-a)/p;const g=w(s,Ts,[]);for(let S=0;S<d.length;S+=8)g.push({x:(d[4]-l)/f,y:(u-(1-d[S+5]))/p,width:(d[S+2]-d[S])/f,height:(d[S+5]-d[S+1])/p});return _(y=s,ve,ly).call(y),s}serialize(t=!1){if(this.isEmpty()||t)return null;const i=this.getRect(0,0),r=Le._colorManager.convert(this.color);return{annotationType:Ae.HIGHLIGHT,color:r,opacity:c(this,sa),thickness:c(this,Wi),quadPoints:_(this,ve,g1).call(this),outlines:_(this,ve,m1).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:_(this,ve,nu).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};sc=new WeakMap,ad=new WeakMap,Ts=new WeakMap,ia=new WeakMap,oc=new WeakMap,qn=new WeakMap,ld=new WeakMap,cd=new WeakMap,ra=new WeakMap,Ai=new WeakMap,tn=new WeakMap,In=new WeakMap,Wp=new WeakMap,ac=new WeakMap,sa=new WeakMap,Et=new WeakMap,lc=new WeakMap,Wi=new WeakMap,ud=new WeakMap,ve=new WeakSet,ly=function(){const t=new ny(c(this,Ts),.001);w(this,Ai,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Ai).box;const i=new ny(c(this,Ts),.0025,.001,this._uiManager.direction==="ltr");w(this,qn,i.getOutlines());const{lastPoint:r}=c(this,qn).box;w(this,ac,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},cy=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var d,f;if(w(this,Ai,t),w(this,qn,t.getNewOutline(c(this,Wi)/2+1.5,.0025)),i>=0)w(this,tn,i),w(this,ia,r),this.parent.drawLayer.finalizeLine(i,t),w(this,Et,this.parent.drawLayer.highlightOutline(c(this,qn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,tn),t),this.parent.drawLayer.updateBox(c(this,tn),_(d=ke,ni,Ga).call(d,c(this,Ai).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,Et),c(this,qn)),this.parent.drawLayer.updateBox(c(this,Et),_(f=ke,ni,Ga).call(f,c(this,qn).box,p))}const{x:o,y:a,width:l,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/p,this.height=u*p/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/p,this.height=u*p/g;break}}const{lastPoint:h}=c(this,qn).box;w(this,ac,[(h[0]-o)/l,(h[1]-a)/u])},h1=function(t){const i=s=>{var o,a;this.color=s,(o=this.parent)==null||o.drawLayer.changeColor(c(this,tn),s),(a=c(this,oc))==null||a.updateColor(s)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},d1=function(t){const i=c(this,Wi),r=s=>{w(this,Wi,s),_(this,ve,f1).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},f1=function(t){if(!c(this,In))return;_(this,ve,cy).call(this,{highlightOutlines:c(this,Ai).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},uy=function(){c(this,tn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,tn)),w(this,tn,null),this.parent.drawLayer.remove(c(this,Et)),w(this,Et,null))},tu=function(t=this.parent){c(this,tn)===null&&({id:xn(this,tn)._,clipPathId:xn(this,ia)._}=t.drawLayer.highlight(c(this,Ai),this.color,c(this,sa)),w(this,Et,t.drawLayer.highlightOutline(c(this,qn))),c(this,ra)&&(c(this,ra).style.clipPath=c(this,ia)))},ni=new WeakSet,Ga=function({x:t,y:i,width:r,height:s},o){switch(o){case 90:return{x:1-i-s,y:t,width:s,height:r};case 180:return{x:1-t-r,y:1-i-s,width:r,height:s};case 270:return{x:i,y:1-t-r,width:s,height:r}}return{x:t,y:i,width:r,height:s}},p1=function(t){ke._keyboardManager.exec(this,t)},jf=function(t){if(!c(this,sc))return;const i=window.getSelection();t?i.setPosition(c(this,sc),c(this,ad)):i.setPosition(c(this,ld),c(this,cd))},nu=function(){return c(this,In)?this.rotation:0},g1=function(){if(c(this,In))return null;const[t,i]=this.pageDimensions,r=c(this,Ts),s=new Float32Array(r.length*8);let o=0;for(const{x:a,y:l,width:u,height:h}of r){const d=a*t,f=(1-l-h)*i;s[o]=s[o+4]=d,s[o+1]=s[o+3]=f,s[o+2]=s[o+6]=d+u*t,s[o+5]=s[o+7]=f+h*i,o+=8}return s},m1=function(t){return c(this,Ai).serialize(t,_(this,ve,nu).call(this))},v1=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},y1=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},E(ke,ni),le(ke,"_defaultColor",null),le(ke,"_defaultOpacity",1),le(ke,"_defaultThickness",12),le(ke,"_l10nPromise"),le(ke,"_type","highlight"),le(ke,"_editorType",Ae.HIGHLIGHT),le(ke,"_freeHighlightId",-1),le(ke,"_freeHighlight",null),le(ke,"_freeHighlightClipId","");let Cp=ke;var oa,aa,hd,dd,fd,la,Gi,Mr,Qn,ca,ua,Dr,ha,da,Rs,V,w1,_1,E1,A1,dy,S1,fy,b1,x1,C1,k1,T1,uo,py,zf,Hf,Xa,gy,Bf,Jr,R1,my,P1,L1,vy,Uf,iu;const Ze=class Ze extends Le{constructor(t){super({...t,name:"inkEditor"});E(this,V);E(this,oa,0);E(this,aa,0);E(this,hd,this.canvasPointermove.bind(this));E(this,dd,this.canvasPointerleave.bind(this));E(this,fd,this.canvasPointerup.bind(this));E(this,la,this.canvasPointerdown.bind(this));E(this,Gi,null);E(this,Mr,new Path2D);E(this,Qn,!1);E(this,ca,!1);E(this,ua,!1);E(this,Dr,null);E(this,ha,0);E(this,da,0);E(this,Rs,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){Le.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case oe.INK_THICKNESS:Ze._defaultThickness=i;break;case oe.INK_COLOR:Ze._defaultColor=i;break;case oe.INK_OPACITY:Ze._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case oe.INK_THICKNESS:_(this,V,w1).call(this,i);break;case oe.INK_COLOR:_(this,V,_1).call(this,i);break;case oe.INK_OPACITY:_(this,V,E1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[oe.INK_THICKNESS,Ze._defaultThickness],[oe.INK_COLOR,Ze._defaultColor||Le._defaultLineColor],[oe.INK_OPACITY,Math.round(Ze._defaultOpacity*100)]]}get propertiesToUpdate(){return[[oe.INK_THICKNESS,this.thickness||Ze._defaultThickness],[oe.INK_COLOR,this.color||Ze._defaultColor||Le._defaultLineColor],[oe.INK_OPACITY,Math.round(100*(this.opacity??Ze._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(_(this,V,zf).call(this),_(this,V,Hf).call(this)),this.isAttachedToDOM||(this.parent.add(this),_(this,V,Xa).call(this)),_(this,V,iu).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,Gi)&&(clearTimeout(c(this,Gi)),w(this,Gi,null)),(t=c(this,Dr))==null||t.disconnect(),w(this,Dr,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,s=this.height*i;this.setDimensions(r,s)}enableEditMode(){c(this,Qn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",c(this,la),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",c(this,la)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,Qn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),w(this,Qn,!0),this.div.classList.add("disabled"),_(this,V,iu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||c(this,Qn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),_(this,V,S1).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),_(this,V,fy).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),_(this,V,py).call(this,t)}canvasPointerleave(t){_(this,V,py).call(this,t)}get isResizable(){return!this.isEmpty()&&c(this,Qn)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,o,a]=_(this,V,A1).call(this);if(this.setAt(r,s,0,0),this.setDims(o,a),_(this,V,zf).call(this),this.width){const[l,u]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*u),this.setAt(t*l,i*u,this.width*l,this.height*u),w(this,ua,!0),_(this,V,Xa).call(this),this.setDims(this.width*l,this.height*u),_(this,V,uo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _(this,V,Hf).call(this),this.div}setDimensions(t,i){const r=Math.round(t),s=Math.round(i);if(c(this,ha)===r&&c(this,da)===s)return;w(this,ha,r),w(this,da,s),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=i/a,this.fixAndSetPosition(),c(this,Qn)&&_(this,V,gy).call(this,t,i),_(this,V,Xa).call(this),_(this,V,uo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,i,r){var S,m,v;if(t instanceof qb)return null;const s=super.deserialize(t,i,r);s.thickness=t.thickness,s.color=Q.makeHexColor(...t.color),s.opacity=t.opacity;const[o,a]=s.pageDimensions,l=s.width*o,u=s.height*a,h=s.parentScale,d=t.thickness/2;w(s,Qn,!0),w(s,ha,Math.round(l)),w(s,da,Math.round(u));const{paths:f,rect:p,rotation:g}=t;for(let{bezier:A}of f){A=_(S=Ze,Jr,P1).call(S,A,p,g);const x=[];s.paths.push(x);let k=h*(A[0]-d),R=h*(A[1]-d);for(let b=2,I=A.length;b<I;b+=6){const F=h*(A[b]-d),O=h*(A[b+1]-d),J=h*(A[b+2]-d),Y=h*(A[b+3]-d),W=h*(A[b+4]-d),se=h*(A[b+5]-d);x.push([[k,R],[F,O],[J,Y],[W,se]]),k=W,R=se}const L=_(this,Jr,R1).call(this,x);s.bezierPath2D.push(L)}const y=_(m=s,V,vy).call(m);return w(s,aa,Math.max(Le.MIN_SIZE,y[2]-y[0])),w(s,oa,Math.max(Le.MIN_SIZE,y[3]-y[1])),_(v=s,V,gy).call(v,l,u),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=Le._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ae.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:_(this,V,L1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};oa=new WeakMap,aa=new WeakMap,hd=new WeakMap,dd=new WeakMap,fd=new WeakMap,la=new WeakMap,Gi=new WeakMap,Mr=new WeakMap,Qn=new WeakMap,ca=new WeakMap,ua=new WeakMap,Dr=new WeakMap,ha=new WeakMap,da=new WeakMap,Rs=new WeakMap,V=new WeakSet,w1=function(t){const i=s=>{this.thickness=s,_(this,V,iu).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_1=function(t){const i=s=>{this.color=s,_(this,V,uo).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},E1=function(t){const i=s=>{this.opacity=s,_(this,V,uo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},A1=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},dy=function(){const{ctx:t,color:i,opacity:r,thickness:s,parentScale:o,scaleFactor:a}=this;t.lineWidth=s*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${VR(r)}`},S1=function(t,i){const r=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Sn,{signal:r}),this.canvas.addEventListener("pointerleave",c(this,dd),{signal:r}),this.canvas.addEventListener("pointermove",c(this,hd),{signal:r}),this.canvas.addEventListener("pointerup",c(this,fd),{signal:r}),this.canvas.removeEventListener("pointerdown",c(this,la)),this.isEditing=!0,c(this,ua)||(w(this,ua,!0),_(this,V,Xa).call(this),this.thickness||(this.thickness=Ze._defaultThickness),this.color||(this.color=Ze._defaultColor||Le._defaultLineColor),this.opacity??(this.opacity=Ze._defaultOpacity)),this.currentPath.push([t,i]),w(this,ca,!1),_(this,V,dy).call(this),w(this,Rs,()=>{_(this,V,C1).call(this),c(this,Rs)&&window.requestAnimationFrame(c(this,Rs))}),window.requestAnimationFrame(c(this,Rs))},fy=function(t,i){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===s)return;const o=this.currentPath;let a=c(this,Mr);if(o.push([t,i]),w(this,ca,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,i);return}o.length===3&&(w(this,Mr,a=new Path2D),a.moveTo(...o[0])),_(this,V,k1).call(this,a,...o.at(-3),...o.at(-2),t,i)},b1=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);c(this,Mr).lineTo(...t)},x1=function(t,i){w(this,Rs,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),_(this,V,fy).call(this,t,i),_(this,V,b1).call(this);let r;if(this.currentPath.length!==1)r=_(this,V,T1).call(this);else{const u=[t,i];r=[[u,u.slice(),u.slice(),u]]}const s=c(this,Mr),o=this.currentPath;this.currentPath=[],w(this,Mr,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_(this,V,zf).call(this),_(this,V,Hf).call(this)),_(this,V,iu).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},C1=function(){if(!c(this,ca))return;w(this,ca,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(a=>a[0]),s=i.map(a=>a[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...s)-t,Math.max(...s)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(c(this,Mr)),o.restore()},k1=function(t,i,r,s,o,a,l){const u=(i+s)/2,h=(r+o)/2,d=(s+a)/2,f=(o+l)/2;t.bezierCurveTo(u+2*(s-u)/3,h+2*(o-h)/3,d+2*(s-d)/3,f+2*(o-f)/3,d,f)},T1=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[s,o]=t[0];for(r=1;r<t.length-2;r++){const[p,g]=t[r],[y,S]=t[r+1],m=(p+y)/2,v=(g+S)/2,A=[s+2*(p-s)/3,o+2*(g-o)/3],x=[m+2*(p-m)/3,v+2*(g-v)/3];i.push([[s,o],A,x,[m,v]]),[s,o]=[m,v]}const[a,l]=t[r],[u,h]=t[r+1],d=[s+2*(a-s)/3,o+2*(l-o)/3],f=[u+2*(a-u)/3,h+2*(l-h)/3];return i.push([[s,o],d,f,[u,h]]),i},uo=function(){if(this.isEmpty()){_(this,V,Bf).call(this);return}_(this,V,dy).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),_(this,V,Bf).call(this);for(const r of this.bezierPath2D)i.stroke(r)},py=function(t){this.canvas.removeEventListener("pointerleave",c(this,dd)),this.canvas.removeEventListener("pointermove",c(this,hd)),this.canvas.removeEventListener("pointerup",c(this,fd)),this.canvas.addEventListener("pointerdown",c(this,la),{signal:this._uiManager._signal}),c(this,Gi)&&clearTimeout(c(this,Gi)),w(this,Gi,setTimeout(()=>{w(this,Gi,null),this.canvas.removeEventListener("contextmenu",Sn)},10)),_(this,V,x1).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},zf=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Hf=function(){w(this,Dr,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),c(this,Dr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,Dr))==null||t.disconnect(),w(this,Dr,null)},{once:!0})},Xa=function(){if(!c(this,ua))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),_(this,V,Bf).call(this)},gy=function(t,i){const r=_(this,V,Uf).call(this),s=(t-r)/c(this,aa),o=(i-r)/c(this,oa);this.scaleFactor=Math.min(s,o)},Bf=function(){const t=_(this,V,Uf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Jr=new WeakSet,R1=function(t){const i=new Path2D;for(let r=0,s=t.length;r<s;r++){const[o,a,l,u]=t[r];r===0&&i.moveTo(...o),i.bezierCurveTo(a[0],a[1],l[0],l[1],u[0],u[1])}return i},my=function(t,i,r){const[s,o,a,l]=i;switch(r){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=s,t[u+1]=l-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+s,t[u+1]=d+o}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=a-t[u+1],t[u+1]=l-d}break;default:throw new Error("Invalid rotation")}return t},P1=function(t,i,r){const[s,o,a,l]=i;switch(r){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=s,t[u+1]=l-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-o,t[u+1]=d-s}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=l-t[u+1],t[u+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},L1=function(t,i,r,s){var h,d;const o=[],a=this.thickness/2,l=t*i+a,u=t*r+a;for(const f of this.paths){const p=[],g=[];for(let y=0,S=f.length;y<S;y++){const[m,v,A,x]=f[y];if(m[0]===x[0]&&m[1]===x[1]&&S===1){const Y=t*m[0]+l,W=t*m[1]+u;p.push(Y,W),g.push(Y,W);break}const k=t*m[0]+l,R=t*m[1]+u,L=t*v[0]+l,b=t*v[1]+u,I=t*A[0]+l,F=t*A[1]+u,O=t*x[0]+l,J=t*x[1]+u;y===0&&(p.push(k,R),g.push(k,R)),p.push(L,b,I,F,O,J),g.push(L,b),y===S-1&&g.push(O,J)}o.push({bezier:_(h=Ze,Jr,my).call(h,p,s,this.rotation),points:_(d=Ze,Jr,my).call(d,g,s,this.rotation)})}return o},vy=function(){let t=1/0,i=-1/0,r=1/0,s=-1/0;for(const o of this.paths)for(const[a,l,u,h]of o){const d=Q.bezierBoundingBox(...a,...l,...u,...h);t=Math.min(t,d[0]),r=Math.min(r,d[1]),i=Math.max(i,d[2]),s=Math.max(s,d[3])}return[t,r,i,s]},Uf=function(){return c(this,Qn)?Math.ceil(this.thickness*this.parentScale):0},iu=function(t=!1){if(this.isEmpty())return;if(!c(this,Qn)){_(this,V,uo).call(this);return}const i=_(this,V,vy).call(this),r=_(this,V,Uf).call(this);w(this,aa,Math.max(Le.MIN_SIZE,i[2]-i[0])),w(this,oa,Math.max(Le.MIN_SIZE,i[3]-i[1]));const s=Math.ceil(r+c(this,aa)*this.scaleFactor),o=Math.ceil(r+c(this,oa)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=s/a,this.height=o/l,this.setAspectRatio(s,o);const u=this.translationX,h=this.translationY;this.translationX=-i[0],this.translationY=-i[1],_(this,V,Xa).call(this),_(this,V,uo).call(this),w(this,ha,s),w(this,da,o),this.setDims(s,o);const d=t?r/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},E(Ze,Jr),le(Ze,"_defaultColor",null),le(Ze,"_defaultOpacity",1),le(Ze,"_defaultThickness",1),le(Ze,"_type","ink"),le(Ze,"_editorType",Ae.INK);let hy=Ze;var jt,zt,Ps,Ir,Ls,cc,Xi,Fr,Ki,Si,pd,Ce,ru,su,$f,wy,M1,D1,_y,Vf,I1;const vu=class vu extends Le{constructor(t){super({...t,name:"stampEditor"});E(this,Ce);E(this,jt,null);E(this,zt,null);E(this,Ps,null);E(this,Ir,null);E(this,Ls,null);E(this,cc,"");E(this,Xi,null);E(this,Fr,null);E(this,Ki,null);E(this,Si,!1);E(this,pd,!1);w(this,Ir,t.bitmapUrl),w(this,Ls,t.bitmapFile)}static initialize(t,i){Le.initialize(t,i)}static get supportedTypes(){return be(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return be(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Ae.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,i;c(this,zt)&&(w(this,jt,null),this._uiManager.imageManager.deleteId(c(this,zt)),(t=c(this,Xi))==null||t.remove(),w(this,Xi,null),(i=c(this,Fr))==null||i.disconnect(),w(this,Fr,null),c(this,Ki)&&(clearTimeout(c(this,Ki)),w(this,Ki,null))),super.remove()}rebuild(){if(!this.parent){c(this,zt)&&_(this,Ce,$f).call(this);return}super.rebuild(),this.div!==null&&(c(this,zt)&&c(this,Xi)===null&&_(this,Ce,$f).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,Ps)||c(this,jt)||c(this,Ir)||c(this,Ls)||c(this,zt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(this,jt)?_(this,Ce,wy).call(this):_(this,Ce,$f).call(this),this.width){const[r,s]=this.parentDimensions;this.setAt(t*r,i*s,this.width*r,this.height*s)}return this.div}getImageForAltText(){return c(this,Xi)}static deserialize(t,i,r){if(t instanceof Qb)return null;const s=super.deserialize(t,i,r),{rect:o,bitmapUrl:a,bitmapId:l,isSvg:u,accessibilityData:h}=t;l&&r.imageManager.isValidId(l)?w(s,zt,l):w(s,Ir,a),w(s,Si,u);const[d,f]=s.pageDimensions;return s.width=(o[2]-o[0])/d,s.height=(o[3]-o[1])/f,h&&(s.altTextData=h),s}serialize(t=!1,i=null){if(this.isEmpty())return null;const r={annotationType:Ae.STAMP,bitmapId:c(this,zt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Si),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=_(this,Ce,Vf).call(this,!0),r.accessibilityData=this.altTextData,r;const{decorative:s,altText:o}=this.altTextData;if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),i===null)return r;i.stamps||(i.stamps=new Map);const a=c(this,Si)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(c(this,zt)))i.stamps.set(c(this,zt),{area:a,serialized:r}),r.bitmap=_(this,Ce,Vf).call(this,!1);else if(c(this,Si)){const l=i.stamps.get(c(this,zt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=_(this,Ce,Vf).call(this,!1))}return r}};jt=new WeakMap,zt=new WeakMap,Ps=new WeakMap,Ir=new WeakMap,Ls=new WeakMap,cc=new WeakMap,Xi=new WeakMap,Fr=new WeakMap,Ki=new WeakMap,Si=new WeakMap,pd=new WeakMap,Ce=new WeakSet,ru=function(t,i=!1){if(!t){this.remove();return}w(this,jt,t.bitmap),i||(w(this,zt,t.id),w(this,Si,t.isSvg)),t.file&&w(this,cc,t.file.name),_(this,Ce,wy).call(this)},su=function(){w(this,Ps,null),this._uiManager.enableWaiting(!1),c(this,Xi)&&this.div.focus()},$f=function(){if(c(this,zt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,zt)).then(r=>_(this,Ce,ru).call(this,r,!0)).finally(()=>_(this,Ce,su).call(this));return}if(c(this,Ir)){const r=c(this,Ir);w(this,Ir,null),this._uiManager.enableWaiting(!0),w(this,Ps,this._uiManager.imageManager.getFromUrl(r).then(s=>_(this,Ce,ru).call(this,s)).finally(()=>_(this,Ce,su).call(this)));return}if(c(this,Ls)){const r=c(this,Ls);w(this,Ls,null),this._uiManager.enableWaiting(!0),w(this,Ps,this._uiManager.imageManager.getFromFile(r).then(s=>_(this,Ce,ru).call(this,s)).finally(()=>_(this,Ce,su).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=vu.supportedTypesStr;const i=this._uiManager._signal;w(this,Ps,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);_(this,Ce,ru).call(this,s)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>_(this,Ce,su).call(this))),t.click()},wy=function(){const{div:t}=this;let{width:i,height:r}=c(this,jt);const[s,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*s,r=this.height*o;else if(i>a*s||r>a*o){const d=Math.min(a*s/i,a*o/r);i*=d,r*=d}const[l,u]=this.parentDimensions;this.setDims(i*l/s,r*u/o),this._uiManager.enableWaiting(!1);const h=w(this,Xi,document.createElement("canvas"));t.append(h),t.hidden=!1,_(this,Ce,_y).call(this,i,r),_(this,Ce,I1).call(this),c(this,pd)||(this.parent.addUndoableEditor(this),w(this,pd,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,cc)&&h.setAttribute("aria-label",c(this,cc))},M1=function(t,i){var a;const[r,s]=this.parentDimensions;this.width=t/r,this.height=i/s,this.setDims(t,i),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,Ki)!==null&&clearTimeout(c(this,Ki)),w(this,Ki,setTimeout(()=>{w(this,Ki,null),_(this,Ce,_y).call(this,t,i)},200))},D1=function(t,i){const{width:r,height:s}=c(this,jt);let o=r,a=s,l=c(this,jt);for(;o>2*t||a>2*i;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,u,h,0,0,o,a),l=d.transferToImageBitmap()}return l},_y=function(t,i){t=Math.ceil(t),i=Math.ceil(i);const r=c(this,Xi);if(!r||r.width===t&&r.height===i)return;r.width=t,r.height=i;const s=c(this,Si)?c(this,jt):_(this,Ce,D1).call(this,t,i);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(t,i).getContext("2d");l.drawImage(s,0,0,s.width,s.height,0,0,t,i),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,t,i).data,width:t,height:i,channels:4}}).then(u=>{const h=(u==null?void 0:u.output)||"";this.parent&&h&&!this.hasAltText()&&(this.altTextData={altText:h,decorative:!1})})}const o=r.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(s,0,0,s.width,s.height,0,0,t,i)},Vf=function(t){if(t){if(c(this,Si)){const s=this._uiManager.imageManager.getSvgUrl(c(this,zt));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,jt),i.getContext("2d").drawImage(c(this,jt),0,0),i.toDataURL()}if(c(this,Si)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*Xs.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Xs.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(c(this,jt),0,0,c(this,jt).width,c(this,jt).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(c(this,jt))},I1=function(){this._uiManager._signal&&(w(this,Fr,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&_(this,Ce,M1).call(this,i.width,i.height)})),c(this,Fr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,Fr))==null||t.disconnect(),w(this,Fr,null)},{once:!0}))},le(vu,"_type","stamp"),le(vu,"_editorType",Ae.STAMP);let yy=vu;var fa,uc,Yi,pa,Nr,Or,jr,Fn,Ms,hc,dc,nn,ee,Ds,Ut,F1,Ay,Sy,by,Wf;const li=class li{constructor({uiManager:e,pageIndex:t,div:i,accessibilityManager:r,annotationLayer:s,drawLayer:o,textLayer:a,viewport:l,l10n:u}){E(this,Ut);E(this,fa);E(this,uc,!1);E(this,Yi,null);E(this,pa,null);E(this,Nr,null);E(this,Or,null);E(this,jr,null);E(this,Fn,new Map);E(this,Ms,!1);E(this,hc,!1);E(this,dc,!1);E(this,nn,null);E(this,ee);const h=[...c(li,Ds).values()];if(!li._initialized){li._initialized=!0;for(const d of h)d.initialize(u,e)}e.registerEditorTypes(h),w(this,ee,e),this.pageIndex=t,this.div=i,w(this,fa,r),w(this,Yi,s),this.viewport=l,w(this,nn,a),this.drawLayer=o,c(this,ee).addLayer(this)}get isEmpty(){return c(this,Fn).size===0}get isInvisible(){return this.isEmpty&&c(this,ee).getMode()===Ae.NONE}updateToolbar(e){c(this,ee).updateToolbar(e)}updateMode(e=c(this,ee).getMode()){switch(_(this,Ut,Wf).call(this),e){case Ae.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ae.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of c(li,Ds).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,nn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(c(this,ee).getMode()!==Ae.INK)return;if(!e){for(const i of c(this,Fn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){c(this,ee).setEditingState(e)}addCommands(e){c(this,ee).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Yi))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of c(this,Fn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,ee).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!c(this,Yi))return;const t=c(this,Yi).getEditableAnnotations();for(const i of t){if(i.hide(),c(this,ee).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;w(this,dc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of c(this,Fn).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(c(this,Yi)){const s=c(this,Yi).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(c(this,ee).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(c(this,ee).addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show()}}_(this,Ut,Wf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of c(li,Ds).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,dc,!1)}getEditableAnnotation(e){var t;return((t=c(this,Yi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,ee).getActive()!==e&&c(this,ee).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=c(this,nn))!=null&&e.div&&!c(this,Or)&&(w(this,Or,_(this,Ut,F1).bind(this)),c(this,nn).div.addEventListener("pointerdown",c(this,Or),{signal:c(this,ee)._signal}),c(this,nn).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,nn))!=null&&e.div&&c(this,Or)&&(c(this,nn).div.removeEventListener("pointerdown",c(this,Or)),w(this,Or,null),c(this,nn).div.classList.remove("highlighting"))}enableClick(){if(c(this,Nr))return;const e=c(this,ee)._signal;w(this,Nr,this.pointerdown.bind(this)),w(this,pa,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",c(this,Nr),{signal:e}),this.div.addEventListener("pointerup",c(this,pa),{signal:e})}disableClick(){c(this,Nr)&&(this.div.removeEventListener("pointerdown",c(this,Nr)),this.div.removeEventListener("pointerup",c(this,pa)),w(this,Nr,null),w(this,pa,null))}attach(e){c(this,Fn).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,ee).isDeletedAnnotationElement(t)&&c(this,ee).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Fn).delete(e.id),(t=c(this,fa))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,dc)&&e.annotationElementId&&c(this,ee).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,ee).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,c(this,hc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,ee).addDeletedAnnotationElement(e.annotationElementId),Le.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,ee).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),c(this,ee).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,jr)&&(e._focusEventsAllowed=!1,w(this,jr,setTimeout(()=>{w(this,jr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,ee)._signal}),t.focus())},0))),e._structTreeParentId=(i=c(this,fa))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return c(this,ee).getId()}get _signal(){return c(this,ee)._signal}canCreateNewEmptyEditor(){var e;return(e=c(this,Ut,Ay))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,ee).updateToolbar(e),c(this,ee).updateMode(e);const{offsetX:i,offsetY:r}=_(this,Ut,by).call(this),s=this.getNextId(),o=_(this,Ut,Sy).call(this,{parent:this,id:s,x:i,y:r,uiManager:c(this,ee),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=c(li,Ds).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,ee)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),s=_(this,Ut,Sy).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,ee),isCentered:t,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(_(this,Ut,by).call(this),!0)}setSelected(e){c(this,ee).setSelected(e)}toggleSelected(e){c(this,ee).toggleSelected(e)}isSelected(e){return c(this,ee).isSelected(e)}unselect(e){c(this,ee).unselect(e)}pointerup(e){const{isMac:t}=yn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,Ms)){if(w(this,Ms,!1),!c(this,uc)){w(this,uc,!0);return}if(c(this,ee).getMode()===Ae.STAMP){c(this,ee).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(c(this,ee).getMode()===Ae.HIGHLIGHT&&this.enableTextSelection(),c(this,Ms)){w(this,Ms,!1);return}const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;w(this,Ms,!0);const i=c(this,ee).getActive();w(this,uc,!i||i.isEmpty())}findNewParent(e,t,i){const r=c(this,ee).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=c(this,ee).getActive())==null?void 0:e.parent)===this&&(c(this,ee).commitOrRemove(),c(this,ee).setActiveEditor(null)),c(this,jr)&&(clearTimeout(c(this,jr)),w(this,jr,null));for(const i of c(this,Fn).values())(t=c(this,fa))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,Fn).clear(),c(this,ee).removeLayer(this)}render({viewport:e}){this.viewport=e,ba(this.div,e);for(const t of c(this,ee).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,ee).commitOrRemove(),_(this,Ut,Wf).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,ba(this.div,{rotation:i}),t!==i)for(const r of c(this,Fn).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,ee).viewParameters.realScale}};fa=new WeakMap,uc=new WeakMap,Yi=new WeakMap,pa=new WeakMap,Nr=new WeakMap,Or=new WeakMap,jr=new WeakMap,Fn=new WeakMap,Ms=new WeakMap,hc=new WeakMap,dc=new WeakMap,nn=new WeakMap,ee=new WeakMap,Ds=new WeakMap,Ut=new WeakSet,F1=function(e){if(c(this,ee).unselectAll(),e.target===c(this,nn).div){const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t)return;c(this,ee).showAllEditors("highlight",!0,!0),c(this,nn).div.classList.add("free"),Cp.startHighlighting(this,c(this,ee).direction==="ltr",e),c(this,nn).div.addEventListener("pointerup",()=>{c(this,nn).div.classList.remove("free")},{once:!0,signal:c(this,ee)._signal}),e.preventDefault()}},Ay=function(){return c(li,Ds).get(c(this,ee).getMode())},Sy=function(e){const t=c(this,Ut,Ay);return t?new t.prototype.constructor(e):null},by=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+r),u=(s+a)/2-e,h=(o+l)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Wf=function(){w(this,hc,!0);for(const e of c(this,Fn).values())e.isEmpty()&&e.remove();w(this,hc,!1)},le(li,"_initialized",!1),E(li,Ds,new Map([ey,hy,yy,Cp].map(e=>[e._editorType,e])));let Ey=li;var qi,gd,At,Is,md,Cy,Ra,ky,N1;const Dt=class Dt{constructor({pageIndex:e}){E(this,Ra);E(this,qi,null);E(this,gd,0);E(this,At,new Map);E(this,Is,new Map);this.pageIndex=e}setParent(e){if(!c(this,qi)){w(this,qi,e);return}if(c(this,qi)!==e){if(c(this,At).size>0)for(const t of c(this,At).values())t.remove(),e.append(t);w(this,qi,e)}}static get _svgFactory(){return be(this,"_svgFactory",new D0)}highlight(e,t,i,r=!1){const s=xn(this,gd)._++,o=_(this,Ra,ky).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=Dt._svgFactory.createElement("defs");o.append(a);const l=Dt._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("d",e.toSVGPath()),r&&c(this,Is).set(s,l);const h=_(this,Ra,N1).call(this,a,u),d=Dt._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${u}`),c(this,At).set(s,o),{id:s,clipPathId:`url(#${h})`}}highlightOutline(e){const t=xn(this,gd)._++,i=_(this,Ra,ky).call(this,e.box);i.classList.add("highlightOutline");const r=Dt._svgFactory.createElement("defs");i.append(r);const s=Dt._svgFactory.createElement("path");r.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){i.classList.add("free");const h=Dt._svgFactory.createElement("mask");r.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const d=Dt._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Dt._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const l=Dt._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const u=l.cloneNode();return i.append(u),l.classList.add("mainOutline"),u.classList.add("secondaryOutline"),c(this,At).set(t,i),t}finalizeLine(e,t){const i=c(this,Is).get(e);c(this,Is).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){c(this,At).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),c(this,Is).delete(e)}updatePath(e,t){c(this,Is).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;_(i=Dt,md,Cy).call(i,c(this,At).get(e),t)}show(e,t){c(this,At).get(e).classList.toggle("hidden",!t)}rotate(e,t){c(this,At).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){c(this,At).get(e).setAttribute("fill",t)}changeOpacity(e,t){c(this,At).get(e).setAttribute("fill-opacity",t)}addClass(e,t){c(this,At).get(e).classList.add(t)}removeClass(e,t){c(this,At).get(e).classList.remove(t)}remove(e){c(this,qi)!==null&&(c(this,At).get(e).remove(),c(this,At).delete(e))}destroy(){w(this,qi,null);for(const e of c(this,At).values())e.remove();c(this,At).clear()}};qi=new WeakMap,gd=new WeakMap,At=new WeakMap,Is=new WeakMap,md=new WeakSet,Cy=function(e,{x:t=0,y:i=0,width:r=1,height:s=1}={}){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},Ra=new WeakSet,ky=function(e){var i;const t=Dt._svgFactory.create(1,1,!0);return c(this,qi).append(t),t.setAttribute("aria-hidden",!0),_(i=Dt,md,Cy).call(i,t,e),t},N1=function(e,t){const i=Dt._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Dt._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},E(Dt,md);let xy=Dt;var EL=re.AbortException,AL=re.AnnotationEditorLayer,SL=re.AnnotationEditorParamsType,bL=re.AnnotationEditorType,xL=re.AnnotationEditorUIManager,O1=re.AnnotationLayer,j1=re.AnnotationMode,CL=re.CMapCompressionType,kL=re.ColorPicker,TL=re.DOMSVGFactory,RL=re.DrawLayer,PL=re.FeatureTest,B0=re.GlobalWorkerOptions,LL=re.ImageKind,ML=re.InvalidPDFException,DL=re.MissingPDFException,IL=re.OPS,FL=re.Outliner,NL=re.PDFDataRangeTransport,OL=re.PDFDateString,jL=re.PDFWorker,zL=re.PasswordResponses,HL=re.PermissionFlag,BL=re.PixelsPerInch,UL=re.RenderingCancelledException,z1=re.TextLayer,$L=re.UnexpectedResponseException,VL=re.Util,WL=re.VerbosityLevel,GL=re.XfaLayer,XL=re.build,KL=re.createValidAbsoluteUrl,YL=re.fetchData,H1=re.getDocument,qL=re.getFilenameFromUrl,QL=re.getPdfFilenameFromUrl,JL=re.getXfaPageViewport,ZL=re.isDataScheme,eM=re.isPdfFile,tM=re.noContextMenu,nM=re.normalizeUnicode,iM=re.renderTextLayer,rM=re.setLayerDimensions,sM=re.shadow,oM=re.updateTextLayer,B1=re.version;const aM=Object.freeze(Object.defineProperty({__proto__:null,AbortException:EL,AnnotationEditorLayer:AL,AnnotationEditorParamsType:SL,AnnotationEditorType:bL,AnnotationEditorUIManager:xL,AnnotationLayer:O1,AnnotationMode:j1,CMapCompressionType:CL,ColorPicker:kL,DOMSVGFactory:TL,DrawLayer:RL,FeatureTest:PL,GlobalWorkerOptions:B0,ImageKind:LL,InvalidPDFException:ML,MissingPDFException:DL,OPS:IL,Outliner:FL,PDFDataRangeTransport:NL,PDFDateString:OL,PDFWorker:jL,PasswordResponses:zL,PermissionFlag:HL,PixelsPerInch:BL,RenderingCancelledException:UL,TextLayer:z1,UnexpectedResponseException:$L,Util:VL,VerbosityLevel:WL,XfaLayer:GL,build:XL,createValidAbsoluteUrl:KL,fetchData:YL,getDocument:H1,getFilenameFromUrl:qL,getPdfFilenameFromUrl:QL,getXfaPageViewport:JL,isDataScheme:ZL,isPdfFile:eM,noContextMenu:tM,normalizeUnicode:nM,renderTextLayer:iM,setLayerDimensions:rM,shadow:sM,updateTextLayer:oM,version:B1},Symbol.toStringTag,{value:"Module"}));var kt=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))},lM=["onCopy","onCut","onPaste"],cM=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],uM=["onFocus","onBlur"],hM=["onInput","onInvalid","onReset","onSubmit"],dM=["onLoad","onError"],fM=["onKeyDown","onKeyPress","onKeyUp"],pM=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],gM=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],mM=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],vM=["onSelect"],yM=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],wM=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],_M=["onScroll"],EM=["onWheel"],AM=["onAnimationStart","onAnimationEnd","onAnimationIteration"],SM=["onTransitionEnd"],bM=["onToggle"],xM=["onChange"],CM=kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt([],lM,!0),cM,!0),uM,!0),hM,!0),dM,!0),fM,!0),pM,!0),gM,!0),mM,!0),vM,!0),yM,!0),wM,!0),_M,!0),EM,!0),AM,!0),SM,!0),xM,!0),bM,!0);function U1(n,e){var t={};return CM.forEach(function(i){var r=n[i];r&&(e?t[i]=function(s){return r(s,e(i))}:t[i]=r)}),t}function kd(n){var e=!1,t=new Promise(function(i,r){n.then(function(s){return!e&&i(s)}).catch(function(s){return!e&&r(s)})});return{promise:t,cancel:function(){e=!0}}}function $1(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=$1(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Sg(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=$1(n))&&(i&&(i+=" "),i+=e);return i}var kM="Invariant failed";function Ue(n,e){if(!n)throw new Error(kM)}var TM=function(){},RM=TM;const Qt=Py(RM);var eE=Object.prototype.hasOwnProperty;function tE(n,e,t){for(t of n.keys())if(ml(t,e))return t}function ml(n,e){var t,i,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&ml(n[i],e[i]););return i===-1}if(t===Set){if(n.size!==e.size)return!1;for(i of n)if(r=i,r&&typeof r=="object"&&(r=tE(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(i of n)if(r=i[0],r&&typeof r=="object"&&(r=tE(e,r),!r)||!ml(i[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((i=n.byteLength)===e.byteLength)for(;i--&&n.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(eE.call(n,t)&&++i&&!eE.call(e,t)||!(t in e)||!ml(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}const V1=D.createContext(null);function vl({children:n,type:e}){return P.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const PM="noopener noreferrer nofollow";class LM{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ue(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ue(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ue(this.pdfDocument),Ue(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ue(Array.isArray(t));const i=t[0];new Promise(r=>{Ue(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(s=>{r(s)}).catch(()=>{Ue(!1)}):typeof i=="number"?r(i):Ue(!1)}).then(r=>{const s=r+1;Ue(this.pdfViewer),Ue(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:s})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ue(this.pdfViewer),Ue(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||PM,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const nE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},bg=typeof document<"u",W1=bg&&window.location.protocol==="file:";function MM(n){return typeof n<"u"}function so(n){return MM(n)&&n!==null}function DM(n){return typeof n=="string"}function IM(n){return n instanceof ArrayBuffer}function FM(n){return Ue(bg),n instanceof Blob}function Ty(n){return DM(n)&&/^data:/.test(n)}function iE(n){Ue(Ty(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function NM(){return bg&&window.devicePixelRatio||1}const G1="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function rE(){Qt(!W1,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${G1}`)}function OM(){Qt(!W1,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${G1}`)}function ka(n){n!=null&&n.cancel&&n.cancel()}function Ry(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function jM(n){return n.name==="RenderingCancelledException"}function zM(n){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:s}=r.target;if(!s)return t(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}function HM(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function _c(){return D.useReducer(HM,{value:void 0,error:void 0})}var BM=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(i.next(h))}catch(d){o(d)}}function l(h){try{u(i.throw(h))}catch(d){o(d)}}function u(h){h.done?s(h.value):r(h.value).then(a,l)}u((i=i.apply(n,e||[])).next())})},sE=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const{PDFDataRangeTransport:UM}=aM,$M=(n,e)=>{switch(e){case nE.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case nE.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function oE(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const VM=D.forwardRef(function(e,t){var{children:i,className:r,error:s="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:u,imageResourcesPath:h,loading:d="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:g,onLoadProgress:y,onLoadSuccess:S,onPassword:m=$M,onSourceError:v,onSourceSuccess:A,options:x,renderMode:k,rotate:R}=e,L=sE(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[b,I]=_c(),{value:F,error:O}=b,[J,Y]=_c(),{value:W,error:se}=J,ae=D.useRef(new LM),U=D.useRef([]),N=D.useRef(void 0),B=D.useRef(void 0);l&&l!==N.current&&oE(l)&&(Qt(!ml(l,N.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),N.current=l),x&&x!==B.current&&(Qt(!ml(x,B.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),B.current=x);const Z=D.useRef({scrollPageIntoView:De=>{const{dest:_e,pageNumber:Je,pageIndex:ct=Je-1}=De;if(p){p({dest:_e,pageIndex:ct,pageNumber:Je});return}const Pi=U.current[ct];if(Pi){Pi.scrollIntoView();return}Qt(!1,`An internal link leading to page ${Je} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});D.useImperativeHandle(t,()=>({linkService:ae,pages:U,viewer:Z}),[]);function we(){A&&A()}function ne(){O&&(Qt(!1,O.toString()),v&&v(O))}function de(){I({type:"RESET"})}D.useEffect(de,[l,I]);const ze=D.useCallback(()=>BM(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return Ty(l)?{data:iE(l)}:(rE(),{url:l});if(l instanceof UM)return{range:l};if(IM(l))return{data:l};if(bg&&FM(l))return{data:yield zM(l)};if(Ue(typeof l=="object"),Ue(oE(l)),"url"in l&&typeof l.url=="string"){if(Ty(l.url)){const{url:De}=l,_e=sE(l,["url"]),Je=iE(De);return Object.assign({data:Je},_e)}rE()}return l}),[l]);D.useEffect(()=>{const De=kd(ze());return De.promise.then(_e=>{I({type:"RESOLVE",value:_e})}).catch(_e=>{I({type:"REJECT",error:_e})}),()=>{ka(De)}},[ze,I]),D.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){ne();return}we()}},[F]);function Qe(){W&&(S&&S(W),U.current=new Array(W.numPages),ae.current.setDocument(W))}function Se(){se&&(Qt(!1,se.toString()),g&&g(se))}D.useEffect(function(){Y({type:"RESET"})},[Y,F]),D.useEffect(function(){if(!F)return;const _e=Object.assign(Object.assign({},F),x),Je=H1(_e);y&&(Je.onProgress=y),m&&(Je.onPassword=m);const ct=Je;return ct.promise.then(Pi=>{Y({type:"RESOLVE",value:Pi})}).catch(Pi=>{ct.destroyed||Y({type:"REJECT",error:Pi})}),()=>{ct.destroy()}},[x,Y,F]),D.useEffect(()=>{if(!(typeof W>"u")){if(W===!1){Se();return}Qe()}},[W]),D.useEffect(function(){ae.current.setViewer(Z.current),ae.current.setExternalLinkRel(o),ae.current.setExternalLinkTarget(a)},[o,a]);const fe=D.useCallback((De,_e)=>{U.current[De]=_e},[]),st=D.useCallback(De=>{delete U.current[De]},[]),Vn=D.useMemo(()=>({imageResourcesPath:h,linkService:ae.current,onItemClick:p,pdf:W,registerPage:fe,renderMode:k,rotate:R,unregisterPage:st}),[h,p,W,fe,k,R,st]),Ve=D.useMemo(()=>U1(L,()=>W),[L,W]);function eo(){return P.jsx(V1.Provider,{value:Vn,children:i})}function to(){return l?W==null?P.jsx(vl,{type:"loading",children:typeof d=="function"?d():d}):W===!1?P.jsx(vl,{type:"error",children:typeof s=="function"?s():s}):eo():P.jsx(vl,{type:"no-data",children:typeof f=="function"?f():f})}return P.jsx("div",Object.assign({className:Sg("react-pdf__Document",r),ref:u,style:{"--scale-factor":"1"}},Ve,{children:to()}))});function X1(){return D.useContext(V1)}function K1(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(s){t.forEach(function(o){typeof o=="function"?o(s):o&&(o.current=s)})}}const Y1=D.createContext(null),q1={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},WM=/^H(\d+)$/;function GM(n){return n in q1}function xg(n){return"children"in n}function Q1(n){return xg(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function XM(n){const e={};if(xg(n)){const{role:t}=n,i=t.match(WM);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(GM(t)){const r=q1[t];r&&(e.role=r)}}return e}function J1(n){const e={};if(xg(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),Q1(n)){const[t]=n.children;if(t){const i=J1(t);return Object.assign(Object.assign({},e),i)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function KM(n){return n?Object.assign(Object.assign({},XM(n)),J1(n)):null}function Z1({className:n,node:e}){const t=D.useMemo(()=>KM(e),[e]),i=D.useMemo(()=>!xg(e)||Q1(e)?null:e.children.map((r,s)=>P.jsx(Z1,{node:r},s)),[e]);return P.jsx("span",Object.assign({className:n},t,{children:i}))}function Cg(){return D.useContext(Y1)}function YM(){const n=Cg();Ue(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[i,r]=_c(),{value:s,error:o}=i,{customTextRenderer:a,page:l}=n;function u(){s&&t&&t(s)}function h(){o&&(Qt(!1,o.toString()),e&&e(o))}return D.useEffect(function(){r({type:"RESET"})},[r,l]),D.useEffect(function(){if(a||!l)return;const f=kd(l.getStructTree()),p=f;return f.promise.then(g=>{r({type:"RESOLVE",value:g})}).catch(g=>{r({type:"REJECT",error:g})}),()=>ka(p)},[a,l,r]),D.useEffect(()=>{if(s!==void 0){if(s===!1){h();return}u()}},[s]),s?P.jsx(Z1,{className:"react-pdf__Page__structTree structTree",node:s}):null}const aE=j1;function qM(n){const e=Cg();Ue(e);const t=Object.assign(Object.assign({},e),n),{_className:i,canvasBackground:r,devicePixelRatio:s=NM(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:p}=n;Ue(l);const g=D.useRef(null);function y(){l&&a&&a(Ry(l,f))}function S(x){jM(x)||(Qt(!1,x.toString()),o&&o(x))}const m=D.useMemo(()=>l.getViewport({scale:f*s,rotation:d}),[s,l,d,f]),v=D.useMemo(()=>l.getViewport({scale:f,rotation:d}),[l,d,f]);D.useEffect(function(){if(!l)return;l.cleanup();const{current:k}=g;if(!k)return;k.width=m.width,k.height=m.height,k.style.width=`${Math.floor(v.width)}px`,k.style.height=`${Math.floor(v.height)}px`,k.style.visibility="hidden";const R={annotationMode:u?aE.ENABLE_FORMS:aE.ENABLE,canvasContext:k.getContext("2d",{alpha:!1}),viewport:m};r&&(R.background=r);const L=l.render(R),b=L;return L.promise.then(()=>{k.style.visibility="",y()}).catch(S),()=>ka(b)},[r,l,u,m,v]);const A=D.useCallback(()=>{const{current:x}=g;x&&(x.width=0,x.height=0)},[]);return D.useEffect(()=>A,[A]),P.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:K1(p,g),style:{display:"block",userSelect:"none"},children:h?P.jsx(YM,{}):null})}function QM(n){return"str"in n}function JM(){const n=Cg();Ue(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:s,page:o,pageIndex:a,pageNumber:l,rotate:u,scale:h}=n;Ue(o);const[d,f]=_c(),{value:p,error:g}=d,y=D.useRef(null),S=D.useRef(void 0);Qt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function m(){p&&i&&i(p)}function v(){g&&(Qt(!1,g.toString()),t&&t(g))}D.useEffect(function(){f({type:"RESET"})},[o,f]),D.useEffect(function(){if(!o)return;const I=kd(o.getTextContent()),F=I;return I.promise.then(O=>{f({type:"RESOLVE",value:O})}).catch(O=>{f({type:"REJECT",error:O})}),()=>ka(F)},[o,f]),D.useEffect(()=>{if(p!==void 0){if(p===!1){v();return}m()}},[p]);const A=D.useCallback(()=>{s&&s()},[s]),x=D.useCallback(b=>{Qt(!1,b.toString()),r&&r(b)},[r]);function k(){const b=S.current;b&&b.classList.add("active")}function R(){const b=S.current;b&&b.classList.remove("active")}const L=D.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return D.useLayoutEffect(function(){if(!o||!p)return;const{current:I}=y;if(!I)return;I.innerHTML="";const F=o.streamTextContent({includeMarkedContent:!0}),O={container:I,textContentSource:F,viewport:L},J=new z1(O),Y=J;return J.render().then(()=>{const W=document.createElement("div");W.className="endOfContent",I.append(W),S.current=W;const se=I.querySelectorAll('[role="presentation"]');if(e){let ae=0;p.items.forEach((U,N)=>{if(!QM(U))return;const B=se[ae];if(!B)return;const Z=e(Object.assign({pageIndex:a,pageNumber:l,itemIndex:N},U));B.innerHTML=Z,ae+=U.str&&U.hasEOL?2:1})}A()}).catch(x),()=>ka(Y)},[e,x,A,o,a,l,p,L]),P.jsx("div",{className:Sg("react-pdf__Page__textContent","textLayer"),onMouseUp:R,onMouseDown:k,ref:y})}function ZM(){const n=X1(),e=Cg();Ue(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:u,pdf:h,renderForms:d,rotate:f,scale:p=1}=t;Ue(h),Ue(u),Ue(r);const[g,y]=_c(),{value:S,error:m}=g,v=D.useRef(null);Qt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function A(){S&&o&&o(S)}function x(){m&&(Qt(!1,m.toString()),s&&s(m))}D.useEffect(function(){y({type:"RESET"})},[y,u]),D.useEffect(function(){if(!u)return;const I=kd(u.getAnnotations()),F=I;return I.promise.then(O=>{y({type:"RESOLVE",value:O})}).catch(O=>{y({type:"REJECT",error:O})}),()=>{ka(F)}},[y,u]),D.useEffect(()=>{if(S!==void 0){if(S===!1){x();return}A()}},[S]);function k(){l&&l()}function R(b){Qt(!1,`${b}`),a&&a(b)}const L=D.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return D.useEffect(function(){if(!h||!u||!r||!S)return;const{current:I}=v;if(!I)return;const F=L.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:I,l10n:null,page:u,viewport:F},J={annotations:S,annotationStorage:h.annotationStorage,div:I,imageResourcesPath:i,linkService:r,page:u,renderForms:d,viewport:F};I.innerHTML="";try{new O1(O).render(J),k()}catch(Y){R(Y)}return()=>{}},[S,i,r,u,h,d,L]),P.jsx("div",{className:Sg("react-pdf__Page__annotations","annotationLayer"),ref:v})}var eD=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const lE=1;function tD(n){const e=X1(),t=Object.assign(Object.assign({},e),n),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:s,canvasRef:o,children:a,className:l,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:g,loading:y="Loading page",noData:S="No page specified.",onGetAnnotationsError:m,onGetAnnotationsSuccess:v,onGetStructTreeError:A,onGetStructTreeSuccess:x,onGetTextError:k,onGetTextSuccess:R,onLoadError:L,onLoadSuccess:b,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:F,onRenderError:O,onRenderSuccess:J,onRenderTextLayerError:Y,onRenderTextLayerSuccess:W,pageIndex:se,pageNumber:ae,pdf:U,registerPage:N,renderAnnotationLayer:B=!0,renderForms:Z=!1,renderMode:we="canvas",renderTextLayer:ne=!0,rotate:de,scale:ze=lE,unregisterPage:Qe,width:Se}=t,fe=eD(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[st,Vn]=_c(),{value:Ve,error:eo}=st,to=D.useRef(null);Ue(U);const De=so(ae)?ae-1:se??null,_e=ae??(so(se)?se+1:null),Je=de??(Ve?Ve.rotate:null),ct=D.useMemo(()=>{if(!Ve)return null;let Wn=1;const ro=ze??lE;if(Se||p){const ts=Ve.getViewport({scale:1,rotation:Je});Se?Wn=Se/ts.width:p&&(Wn=p/ts.height)}return ro*Wn},[p,Ve,Je,ze,Se]);D.useEffect(function(){return()=>{so(De)&&r&&Qe&&Qe(De)}},[r,U,De,Qe]);function Pi(){if(b){if(!Ve||!ct)return;b(Ry(Ve,ct))}if(r&&N){if(!so(De)||!to.current)return;N(De,to.current)}}function ir(){eo&&(Qt(!1,eo.toString()),L&&L(eo))}D.useEffect(function(){Vn({type:"RESET"})},[Vn,U,De]),D.useEffect(function(){if(!U||!_e)return;const ro=kd(U.getPage(_e)),ts=ro;return ro.promise.then(Gn=>{Vn({type:"RESOLVE",value:Gn})}).catch(Gn=>{Vn({type:"REJECT",error:Gn})}),()=>ka(ts)},[Vn,U,_e]),D.useEffect(()=>{if(Ve!==void 0){if(Ve===!1){ir();return}Pi()}},[Ve,ct]);const kg=D.useMemo(()=>Ve&&so(De)&&_e&&so(Je)&&so(ct)?{_className:i,canvasBackground:s,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:m,onGetAnnotationsSuccess:v,onGetStructTreeError:A,onGetStructTreeSuccess:x,onGetTextError:k,onGetTextSuccess:R,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:F,onRenderError:O,onRenderSuccess:J,onRenderTextLayerError:Y,onRenderTextLayerSuccess:W,page:Ve,pageIndex:De,pageNumber:_e,renderForms:Z,renderTextLayer:ne,rotate:Je,scale:ct}:null,[i,s,h,d,m,v,A,x,k,R,I,F,O,J,Y,W,Ve,De,_e,Z,ne,Je,ct]),Tg=D.useMemo(()=>U1(fe,()=>Ve&&(ct?Ry(Ve,ct):void 0)),[fe,Ve,ct]),no=`${De}@${ct}/${Je}`;function Rg(){switch(we){case"custom":return Ue(u),P.jsx(u,{},`${no}_custom`);case"none":return null;case"canvas":default:return P.jsx(qM,{canvasRef:o},`${no}_canvas`)}}function Pg(){return ne?P.jsx(JM,{},`${no}_text`):null}function Lg(){return B?P.jsx(ZM,{},`${no}_annotations`):null}function Mg(){return P.jsxs(Y1.Provider,{value:kg,children:[Rg(),Pg(),Lg(),a]})}function io(){return _e?U===null||Ve===void 0||Ve===null?P.jsx(vl,{type:"loading",children:typeof y=="function"?y():y}):U===!1||Ve===!1?P.jsx(vl,{type:"error",children:typeof f=="function"?f():f}):Mg():P.jsx(vl,{type:"no-data",children:typeof S=="function"?S():S})}return P.jsx("div",Object.assign({className:Sg(i,l),"data-page-number":_e,ref:K1(g,to),style:{"--scale-factor":`${ct}`,backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Tg,{children:io()}))}OM();B0.workerSrc="pdf.worker.mjs";B0.workerSrc=`//unpkg.com/pdfjs-dist@${B1}/build/pdf.worker.min.mjs`;const nD=()=>P.jsx(VM,{file:"src/assets/BinhLeResume.pdf",children:P.jsx(tD,{pageNumber:1})}),iD=tR([{path:"/",element:P.jsx(mR,{})},{path:"/experience",element:P.jsx(vR,{})},{path:"/projects",element:P.jsx(yR,{})},{path:"/about",element:P.jsx(wR,{})},{path:"/resume",element:P.jsx(nD,{})}]);vm.createRoot(document.getElementById("root")).render(P.jsx(AE.StrictMode,{children:P.jsx(uR,{router:iD})}));
